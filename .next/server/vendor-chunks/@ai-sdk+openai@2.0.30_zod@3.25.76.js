"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ai-sdk+openai@2.0.30_zod@3.25.76";
exports.ids = ["vendor-chunks/@ai-sdk+openai@2.0.30_zod@3.25.76"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@ai-sdk+openai@2.0.30_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@ai-sdk+openai@2.0.30_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOpenAI: () => (/* binding */ createOpenAI),\n/* harmony export */   openai: () => (/* binding */ openai)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(rsc)/./node_modules/.pnpm/@ai-sdk+provider-utils@3.0.9_zod@3.25.76/node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(rsc)/./node_modules/.pnpm/@ai-sdk+provider@2.0.0/node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/coerce.js\");\n// src/openai-provider.ts\n\n\n// src/chat/openai-chat-language-model.ts\n\n\n\n\n// src/openai-error.ts\n\n\nvar openaiErrorDataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    // The additional information below is handled loosely to support\n    // OpenAI-compatible providers that have slightly different error\n    // responses:\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.any().nullish(),\n    code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).nullish()\n  })\n});\nvar openaiFailedResponseHandler = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n  errorSchema: openaiErrorDataSchema,\n  errorToMessage: (data) => data.error.message\n});\n\n// src/chat/convert-to-openai-chat-messages.ts\n\n\nfunction convertToOpenAIChatMessages({\n  prompt,\n  systemMessageMode = \"system\"\n}) {\n  const messages = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            messages.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            messages.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        if (content.length === 1 && content[0].type === \"text\") {\n          messages.push({ role: \"user\", content: content[0].text });\n          break;\n        }\n        messages.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a, _b, _c;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"image_url\",\n                    image_url: {\n                      url: part.data instanceof URL ? part.data.toString() : `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`,\n                      // OpenAI specific extension: image detail\n                      detail: (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.imageDetail\n                    }\n                  };\n                } else if (part.mediaType.startsWith(\"audio/\")) {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"audio file parts with URLs\"\n                    });\n                  }\n                  switch (part.mediaType) {\n                    case \"audio/wav\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"wav\"\n                        }\n                      };\n                    }\n                    case \"audio/mp3\":\n                    case \"audio/mpeg\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"mp3\"\n                        }\n                      };\n                    }\n                    default: {\n                      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                        functionality: `audio content parts with media type ${part.mediaType}`\n                      });\n                    }\n                  }\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"PDF file parts with URLs\"\n                    });\n                  }\n                  return {\n                    type: \"file\",\n                    file: typeof part.data === \"string\" && part.data.startsWith(\"file-\") ? { file_id: part.data } : {\n                      filename: (_c = part.filename) != null ? _c : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        let text = \"\";\n        const toolCalls = [];\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              text += part.text;\n              break;\n            }\n            case \"tool-call\": {\n              toolCalls.push({\n                id: part.toolCallId,\n                type: \"function\",\n                function: {\n                  name: part.toolName,\n                  arguments: JSON.stringify(part.input)\n                }\n              });\n              break;\n            }\n          }\n        }\n        messages.push({\n          role: \"assistant\",\n          content: text,\n          tool_calls: toolCalls.length > 0 ? toolCalls : void 0\n        });\n        break;\n      }\n      case \"tool\": {\n        for (const toolResponse of content) {\n          const output = toolResponse.output;\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          messages.push({\n            role: \"tool\",\n            tool_call_id: toolResponse.toolCallId,\n            content: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { messages, warnings };\n}\n\n// src/chat/get-response-metadata.ts\nfunction getResponseMetadata({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/chat/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/chat/openai-chat-options.ts\n\nvar openaiProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Modify the likelihood of specified tokens appearing in the completion.\n   *\n   * Accepts a JSON object that maps tokens (specified by their token ID in\n   * the GPT tokenizer) to an associated bias value from -100 to 100.\n   */\n  logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_3__.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n  /**\n   * Return the log probabilities of the tokens.\n   *\n   * Setting to true will return the log probabilities of the tokens that\n   * were generated.\n   *\n   * Setting to a number will return the log probabilities of the top n\n   * tokens that were generated.\n   */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).optional(),\n  /**\n   * Whether to enable parallel function calling during tool use. Default to true.\n   */\n  parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * A unique identifier representing your end-user, which can help OpenAI to\n   * monitor and detect abuse.\n   */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * Reasoning effort for reasoning models. Defaults to `medium`.\n   */\n  reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"minimal\", \"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * Maximum number of completion tokens to generate. Useful for reasoning models.\n   */\n  maxCompletionTokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n   * Whether to enable persistence in responses API.\n   */\n  store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Metadata to associate with the request.\n   */\n  metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().max(64), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().max(512)).optional(),\n  /**\n   * Parameters for prediction mode.\n   */\n  prediction: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.any()).optional(),\n  /**\n   * Whether to use structured outputs.\n   *\n   * @default true\n   */\n  structuredOutputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Service tier for the request.\n   * - 'auto': Default service tier\n   * - 'flex': 50% cheaper processing at the cost of increased latency. Only available for o3 and o4-mini models.\n   * - 'priority': Higher-speed processing with predictably low latency at premium cost. Available for Enterprise customers.\n   *\n   * @default 'auto'\n   */\n  serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"flex\", \"priority\"]).optional(),\n  /**\n   * Whether to use strict JSON schema validation.\n   *\n   * @default false\n   */\n  strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Controls the verbosity of the model's responses.\n   * Lower values will result in more concise responses, while higher values will result in more verbose responses.\n   */\n  textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * A cache key for prompt caching. Allows manual control over prompt caching behavior.\n   * Useful for improving cache hit rates and working around automatic caching issues.\n   */\n  promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * A stable identifier used to help detect users of your application\n   * that may be violating OpenAI's usage policies. The IDs should be a\n   * string that uniquely identifies each user. We recommend hashing their\n   * username or email address, in order to avoid sending us any identifying\n   * information.\n   */\n  safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/chat/openai-chat-prepare-tools.ts\n\n\n// src/tool/file-search.ts\n\n\nvar comparisonFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  key: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"eq\", \"ne\", \"gt\", \"gte\", \"lt\", \"lte\"]),\n  value: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean()])\n});\nvar compoundFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"and\", \"or\"]),\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([comparisonFilterSchema, zod_v4__WEBPACK_IMPORTED_MODULE_0__.lazy(() => compoundFilterSchema)])\n  )\n});\nvar filtersSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([comparisonFilterSchema, compoundFilterSchema]);\nvar fileSearchArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  vectorStoreIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  maxNumResults: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  ranking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    ranker: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"default-2024-08-21\"]).optional()\n  }).optional(),\n  filters: filtersSchema.optional()\n});\nvar fileSearch = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.file_search\",\n  name: \"file_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  })\n});\n\n// src/tool/web-search-preview.ts\n\n\nvar webSearchPreviewArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Search context size to use for the web search.\n   * - high: Most comprehensive context, highest cost, slower response\n   * - medium: Balanced context, cost, and latency (default)\n   * - low: Least context, lowest cost, fastest response\n   */\n  searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * User location information to provide geographically relevant search results.\n   */\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    /**\n     * Type of location (always 'approximate')\n     */\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    /**\n     * Two-letter ISO country code (e.g., 'US', 'GB')\n     */\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * City name (free text, e.g., 'Minneapolis')\n     */\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * Region name (free text, e.g., 'Minnesota')\n     */\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * IANA timezone (e.g., 'America/Chicago')\n     */\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearchPreview = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.web_search_preview\",\n  name: \"web_search_preview\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      })\n    ]).nullish()\n  })\n});\n\n// src/chat/openai-chat-prepare-tools.ts\nfunction prepareChatTools({\n  tools,\n  toolChoice,\n  structuredOutputs,\n  strictJsonSchema\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: tool.inputSchema,\n            strict: structuredOutputs ? strictJsonSchema : void 0\n          }\n        });\n        break;\n      case \"provider-defined\":\n        switch (tool.id) {\n          case \"openai.file_search\": {\n            const args = fileSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"file_search\",\n              vector_store_ids: args.vectorStoreIds,\n              max_num_results: args.maxNumResults,\n              ranking_options: args.ranking ? { ranker: args.ranking.ranker } : void 0,\n              filters: args.filters\n            });\n            break;\n          }\n          case \"openai.web_search_preview\": {\n            const args = webSearchPreviewArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search_preview\",\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          default:\n            toolWarnings.push({ type: \"unsupported-tool\", tool });\n            break;\n        }\n        break;\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: {\n          type: \"function\",\n          function: {\n            name: toolChoice.toolName\n          }\n        },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/chat/openai-chat-language-model.ts\nvar OpenAIChatLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiProviderOptions\n    })) != null ? _a : {};\n    const structuredOutputs = (_b = openaiOptions.structuredOutputs) != null ? _b : true;\n    if (topK != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"topK\"\n      });\n    }\n    if ((responseFormat == null ? void 0 : responseFormat.type) === \"json\" && responseFormat.schema != null && !structuredOutputs) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"responseFormat\",\n        details: \"JSON response format schema is only supported with structuredOutputs\"\n      });\n    }\n    const { messages, warnings: messageWarnings } = convertToOpenAIChatMessages(\n      {\n        prompt,\n        systemMessageMode: getSystemMessageMode(this.modelId)\n      }\n    );\n    warnings.push(...messageWarnings);\n    const strictJsonSchema = (_c = openaiOptions.strictJsonSchema) != null ? _c : false;\n    const baseArgs = {\n      // model id:\n      model: this.modelId,\n      // model specific settings:\n      logit_bias: openaiOptions.logitBias,\n      logprobs: openaiOptions.logprobs === true || typeof openaiOptions.logprobs === \"number\" ? true : void 0,\n      top_logprobs: typeof openaiOptions.logprobs === \"number\" ? openaiOptions.logprobs : typeof openaiOptions.logprobs === \"boolean\" ? openaiOptions.logprobs ? 0 : void 0 : void 0,\n      user: openaiOptions.user,\n      parallel_tool_calls: openaiOptions.parallelToolCalls,\n      // standardized settings:\n      max_tokens: maxOutputTokens,\n      temperature,\n      top_p: topP,\n      frequency_penalty: frequencyPenalty,\n      presence_penalty: presencePenalty,\n      response_format: (responseFormat == null ? void 0 : responseFormat.type) === \"json\" ? structuredOutputs && responseFormat.schema != null ? {\n        type: \"json_schema\",\n        json_schema: {\n          schema: responseFormat.schema,\n          strict: strictJsonSchema,\n          name: (_d = responseFormat.name) != null ? _d : \"response\",\n          description: responseFormat.description\n        }\n      } : { type: \"json_object\" } : void 0,\n      stop: stopSequences,\n      seed,\n      verbosity: openaiOptions.textVerbosity,\n      // openai specific settings:\n      // TODO AI SDK 6: remove, we auto-map maxOutputTokens now\n      max_completion_tokens: openaiOptions.maxCompletionTokens,\n      store: openaiOptions.store,\n      metadata: openaiOptions.metadata,\n      prediction: openaiOptions.prediction,\n      reasoning_effort: openaiOptions.reasoningEffort,\n      service_tier: openaiOptions.serviceTier,\n      prompt_cache_key: openaiOptions.promptCacheKey,\n      safety_identifier: openaiOptions.safetyIdentifier,\n      // messages:\n      messages\n    };\n    if (isReasoningModel(this.modelId)) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_p != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.frequency_penalty != null) {\n        baseArgs.frequency_penalty = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"frequencyPenalty\",\n          details: \"frequencyPenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.presence_penalty != null) {\n        baseArgs.presence_penalty = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"presencePenalty\",\n          details: \"presencePenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logit_bias != null) {\n        baseArgs.logit_bias = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logitBias is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logprobs != null) {\n        baseArgs.logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_logprobs != null) {\n        baseArgs.top_logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"topLogprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.max_tokens != null) {\n        if (baseArgs.max_completion_tokens == null) {\n          baseArgs.max_completion_tokens = baseArgs.max_tokens;\n        }\n        baseArgs.max_tokens = void 0;\n      }\n    } else if (this.modelId.startsWith(\"gpt-4o-search-preview\") || this.modelId.startsWith(\"gpt-4o-mini-search-preview\")) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for the search preview models and has been removed.\"\n        });\n      }\n    }\n    if (openaiOptions.serviceTier === \"flex\" && !supportsFlexProcessing(this.modelId)) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    if (openaiOptions.serviceTier === \"priority\" && !supportsPriorityProcessing(this.modelId)) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareChatTools({\n      tools,\n      toolChoice,\n      structuredOutputs,\n      strictJsonSchema\n    });\n    return {\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n    const { args: body, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiChatResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const content = [];\n    const text = choice.message.content;\n    if (text != null && text.length > 0) {\n      content.push({ type: \"text\", text });\n    }\n    for (const toolCall of (_a = choice.message.tool_calls) != null ? _a : []) {\n      content.push({\n        type: \"tool-call\",\n        toolCallId: (_b = toolCall.id) != null ? _b : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        toolName: toolCall.function.name,\n        input: toolCall.function.arguments\n      });\n    }\n    for (const annotation of (_c = choice.message.annotations) != null ? _c : []) {\n      content.push({\n        type: \"source\",\n        sourceType: \"url\",\n        id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        url: annotation.url,\n        title: annotation.title\n      });\n    }\n    const completionTokenDetails = (_d = response.usage) == null ? void 0 : _d.completion_tokens_details;\n    const promptTokenDetails = (_e = response.usage) == null ? void 0 : _e.prompt_tokens_details;\n    const providerMetadata = { openai: {} };\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens) != null) {\n      providerMetadata.openai.acceptedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens;\n    }\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens) != null) {\n      providerMetadata.openai.rejectedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens;\n    }\n    if (((_f = choice.logprobs) == null ? void 0 : _f.content) != null) {\n      providerMetadata.openai.logprobs = choice.logprobs.content;\n    }\n    return {\n      content,\n      finishReason: mapOpenAIFinishReason(choice.finish_reason),\n      usage: {\n        inputTokens: (_h = (_g = response.usage) == null ? void 0 : _g.prompt_tokens) != null ? _h : void 0,\n        outputTokens: (_j = (_i = response.usage) == null ? void 0 : _i.completion_tokens) != null ? _j : void 0,\n        totalTokens: (_l = (_k = response.usage) == null ? void 0 : _k.total_tokens) != null ? _l : void 0,\n        reasoningTokens: (_m = completionTokenDetails == null ? void 0 : completionTokenDetails.reasoning_tokens) != null ? _m : void 0,\n        cachedInputTokens: (_n = promptTokenDetails == null ? void 0 : promptTokenDetails.cached_tokens) != null ? _n : void 0\n      },\n      request: { body },\n      response: {\n        ...getResponseMetadata(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      warnings,\n      providerMetadata\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiChatChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const toolCalls = [];\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    let isFirstChunk = true;\n    let isActiveText = false;\n    const providerMetadata = { openai: {} };\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata(value)\n              });\n            }\n            if (value.usage != null) {\n              usage.inputTokens = (_a = value.usage.prompt_tokens) != null ? _a : void 0;\n              usage.outputTokens = (_b = value.usage.completion_tokens) != null ? _b : void 0;\n              usage.totalTokens = (_c = value.usage.total_tokens) != null ? _c : void 0;\n              usage.reasoningTokens = (_e = (_d = value.usage.completion_tokens_details) == null ? void 0 : _d.reasoning_tokens) != null ? _e : void 0;\n              usage.cachedInputTokens = (_g = (_f = value.usage.prompt_tokens_details) == null ? void 0 : _f.cached_tokens) != null ? _g : void 0;\n              if (((_h = value.usage.completion_tokens_details) == null ? void 0 : _h.accepted_prediction_tokens) != null) {\n                providerMetadata.openai.acceptedPredictionTokens = (_i = value.usage.completion_tokens_details) == null ? void 0 : _i.accepted_prediction_tokens;\n              }\n              if (((_j = value.usage.completion_tokens_details) == null ? void 0 : _j.rejected_prediction_tokens) != null) {\n                providerMetadata.openai.rejectedPredictionTokens = (_k = value.usage.completion_tokens_details) == null ? void 0 : _k.rejected_prediction_tokens;\n              }\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = mapOpenAIFinishReason(choice.finish_reason);\n            }\n            if (((_l = choice == null ? void 0 : choice.logprobs) == null ? void 0 : _l.content) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs.content;\n            }\n            if ((choice == null ? void 0 : choice.delta) == null) {\n              return;\n            }\n            const delta = choice.delta;\n            if (delta.content != null) {\n              if (!isActiveText) {\n                controller.enqueue({ type: \"text-start\", id: \"0\" });\n                isActiveText = true;\n              }\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: delta.content\n              });\n            }\n            if (delta.tool_calls != null) {\n              for (const toolCallDelta of delta.tool_calls) {\n                const index = toolCallDelta.index;\n                if (toolCalls[index] == null) {\n                  if (toolCallDelta.type !== \"function\") {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function' type.`\n                    });\n                  }\n                  if (toolCallDelta.id == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'id' to be a string.`\n                    });\n                  }\n                  if (((_m = toolCallDelta.function) == null ? void 0 : _m.name) == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function.name' to be a string.`\n                    });\n                  }\n                  controller.enqueue({\n                    type: \"tool-input-start\",\n                    id: toolCallDelta.id,\n                    toolName: toolCallDelta.function.name\n                  });\n                  toolCalls[index] = {\n                    id: toolCallDelta.id,\n                    type: \"function\",\n                    function: {\n                      name: toolCallDelta.function.name,\n                      arguments: (_n = toolCallDelta.function.arguments) != null ? _n : \"\"\n                    },\n                    hasFinished: false\n                  };\n                  const toolCall2 = toolCalls[index];\n                  if (((_o = toolCall2.function) == null ? void 0 : _o.name) != null && ((_p = toolCall2.function) == null ? void 0 : _p.arguments) != null) {\n                    if (toolCall2.function.arguments.length > 0) {\n                      controller.enqueue({\n                        type: \"tool-input-delta\",\n                        id: toolCall2.id,\n                        delta: toolCall2.function.arguments\n                      });\n                    }\n                    if ((0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall2.function.arguments)) {\n                      controller.enqueue({\n                        type: \"tool-input-end\",\n                        id: toolCall2.id\n                      });\n                      controller.enqueue({\n                        type: \"tool-call\",\n                        toolCallId: (_q = toolCall2.id) != null ? _q : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                        toolName: toolCall2.function.name,\n                        input: toolCall2.function.arguments\n                      });\n                      toolCall2.hasFinished = true;\n                    }\n                  }\n                  continue;\n                }\n                const toolCall = toolCalls[index];\n                if (toolCall.hasFinished) {\n                  continue;\n                }\n                if (((_r = toolCallDelta.function) == null ? void 0 : _r.arguments) != null) {\n                  toolCall.function.arguments += (_t = (_s = toolCallDelta.function) == null ? void 0 : _s.arguments) != null ? _t : \"\";\n                }\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.id,\n                  delta: (_u = toolCallDelta.function.arguments) != null ? _u : \"\"\n                });\n                if (((_v = toolCall.function) == null ? void 0 : _v.name) != null && ((_w = toolCall.function) == null ? void 0 : _w.arguments) != null && (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall.function.arguments)) {\n                  controller.enqueue({\n                    type: \"tool-input-end\",\n                    id: toolCall.id\n                  });\n                  controller.enqueue({\n                    type: \"tool-call\",\n                    toolCallId: (_x = toolCall.id) != null ? _x : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                    toolName: toolCall.function.name,\n                    input: toolCall.function.arguments\n                  });\n                  toolCall.hasFinished = true;\n                }\n              }\n            }\n            if (delta.annotations != null) {\n              for (const annotation of delta.annotations) {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              }\n            }\n          },\n          flush(controller) {\n            if (isActiveText) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage,\n              ...providerMetadata != null ? { providerMetadata } : {}\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar openaiTokenUsageSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  prompt_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  }).nullish(),\n  completion_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    accepted_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    rejected_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  }).nullish()\n}).nullish();\nvar openaiChatResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\").nullish(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\"),\n            function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n            })\n          })\n        ).nullish(),\n        annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n            start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ).nullish()\n      }),\n      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n              })\n            )\n          })\n        ).nullish()\n      }).nullish(),\n      finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    })\n  ),\n  usage: openaiTokenUsageSchema\n});\nvar openaiChatChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          role: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"assistant\"]).nullish(),\n          content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n          tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\").nullish(),\n              function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n              })\n            })\n          ).nullish(),\n          annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n              start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n            })\n          ).nullish()\n        }).nullish(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                  token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                  logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n                })\n              )\n            })\n          ).nullish()\n        }).nullish(),\n        finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n      })\n    ),\n    usage: openaiTokenUsageSchema\n  }),\n  openaiErrorDataSchema\n]);\nfunction isReasoningModel(modelId) {\n  return (modelId.startsWith(\"o\") || modelId.startsWith(\"gpt-5\")) && !modelId.startsWith(\"gpt-5-chat\");\n}\nfunction supportsFlexProcessing(modelId) {\n  return modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n}\nfunction supportsPriorityProcessing(modelId) {\n  return modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n}\nfunction getSystemMessageMode(modelId) {\n  var _a, _b;\n  if (!isReasoningModel(modelId)) {\n    return \"system\";\n  }\n  return (_b = (_a = reasoningModels[modelId]) == null ? void 0 : _a.systemMessageMode) != null ? _b : \"developer\";\n}\nvar reasoningModels = {\n  \"o1-mini\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-mini-2024-09-12\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-preview\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-preview-2024-09-12\": {\n    systemMessageMode: \"remove\"\n  },\n  o3: {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-2025-04-16\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-mini\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-mini-2025-01-31\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o4-mini\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o4-mini-2025-04-16\": {\n    systemMessageMode: \"developer\"\n  }\n};\n\n// src/completion/openai-completion-language-model.ts\n\n\n\n// src/completion/convert-to-openai-completion-prompt.ts\n\nfunction convertToOpenAICompletionPrompt({\n  prompt,\n  user = \"user\",\n  assistant = \"assistant\"\n}) {\n  let text = \"\";\n  if (prompt[0].role === \"system\") {\n    text += `${prompt[0].content}\n\n`;\n    prompt = prompt.slice(1);\n  }\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidPromptError({\n          message: \"Unexpected system message in prompt: ${content}\",\n          prompt\n        });\n      }\n      case \"user\": {\n        const userMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n          }\n        }).filter(Boolean).join(\"\");\n        text += `${user}:\n${userMessage}\n\n`;\n        break;\n      }\n      case \"assistant\": {\n        const assistantMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n            case \"tool-call\": {\n              throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                functionality: \"tool-call messages\"\n              });\n            }\n          }\n        }).join(\"\");\n        text += `${assistant}:\n${assistantMessage}\n\n`;\n        break;\n      }\n      case \"tool\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n          functionality: \"tool messages\"\n        });\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  text += `${assistant}:\n`;\n  return {\n    prompt: text,\n    stopSequences: [`\n${user}:`]\n  };\n}\n\n// src/completion/get-response-metadata.ts\nfunction getResponseMetadata2({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/completion/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason2(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/completion/openai-completion-options.ts\n\nvar openaiCompletionProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n  Echo back the prompt in addition to the completion.\n     */\n  echo: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n  Modify the likelihood of specified tokens appearing in the completion.\n  \n  Accepts a JSON object that maps tokens (specified by their token ID in\n  the GPT tokenizer) to an associated bias value from -100 to 100. You\n  can use this tokenizer tool to convert text to token IDs. Mathematically,\n  the bias is added to the logits generated by the model prior to sampling.\n  The exact effect will vary per model, but values between -1 and 1 should\n  decrease or increase likelihood of selection; values like -100 or 100\n  should result in a ban or exclusive selection of the relevant token.\n  \n  As an example, you can pass {\"50256\": -100} to prevent the <|endoftext|>\n  token from being generated.\n   */\n  logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n  /**\n  The suffix that comes after a completion of inserted text.\n   */\n  suffix: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n  A unique identifier representing your end-user, which can help OpenAI to\n  monitor and detect abuse. Learn more.\n   */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n  Return the log probabilities of the tokens. Including logprobs will increase\n  the response size and can slow down response times. However, it can\n  be useful to better understand how the model is behaving.\n  Setting to true will return the log probabilities of the tokens that\n  were generated.\n  Setting to a number will return the log probabilities of the top n\n  tokens that were generated.\n     */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).optional()\n});\n\n// src/completion/openai-completion-language-model.ts\nvar OpenAICompletionLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      // No URLs are supported for completion models.\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get providerOptionsName() {\n    return this.config.provider.split(\".\")[0].trim();\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences: userStopSequences,\n    responseFormat,\n    tools,\n    toolChoice,\n    seed,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openaiOptions = {\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: \"openai\",\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      }),\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: this.providerOptionsName,\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      })\n    };\n    if (topK != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"topK\" });\n    }\n    if (tools == null ? void 0 : tools.length) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"tools\" });\n    }\n    if (toolChoice != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"toolChoice\" });\n    }\n    if (responseFormat != null && responseFormat.type !== \"text\") {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"responseFormat\",\n        details: \"JSON response format is not supported.\"\n      });\n    }\n    const { prompt: completionPrompt, stopSequences } = convertToOpenAICompletionPrompt({ prompt });\n    const stop = [...stopSequences != null ? stopSequences : [], ...userStopSequences != null ? userStopSequences : []];\n    return {\n      args: {\n        // model id:\n        model: this.modelId,\n        // model specific settings:\n        echo: openaiOptions.echo,\n        logit_bias: openaiOptions.logitBias,\n        logprobs: (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? 0 : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === false ? void 0 : openaiOptions == null ? void 0 : openaiOptions.logprobs,\n        suffix: openaiOptions.suffix,\n        user: openaiOptions.user,\n        // standardized settings:\n        max_tokens: maxOutputTokens,\n        temperature,\n        top_p: topP,\n        frequency_penalty: frequencyPenalty,\n        presence_penalty: presencePenalty,\n        seed,\n        // prompt:\n        prompt: completionPrompt,\n        // stop sequences:\n        stop: stop.length > 0 ? stop : void 0\n      },\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const { args, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: args,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiCompletionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const providerMetadata = { openai: {} };\n    if (choice.logprobs != null) {\n      providerMetadata.openai.logprobs = choice.logprobs;\n    }\n    return {\n      content: [{ type: \"text\", text: choice.text }],\n      usage: {\n        inputTokens: (_a = response.usage) == null ? void 0 : _a.prompt_tokens,\n        outputTokens: (_b = response.usage) == null ? void 0 : _b.completion_tokens,\n        totalTokens: (_c = response.usage) == null ? void 0 : _c.total_tokens\n      },\n      finishReason: mapOpenAIFinishReason2(choice.finish_reason),\n      request: { body: args },\n      response: {\n        ...getResponseMetadata2(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiCompletionChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    let finishReason = \"unknown\";\n    const providerMetadata = { openai: {} };\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    let isFirstChunk = true;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata2(value)\n              });\n              controller.enqueue({ type: \"text-start\", id: \"0\" });\n            }\n            if (value.usage != null) {\n              usage.inputTokens = value.usage.prompt_tokens;\n              usage.outputTokens = value.usage.completion_tokens;\n              usage.totalTokens = value.usage.total_tokens;\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = mapOpenAIFinishReason2(choice.finish_reason);\n            }\n            if ((choice == null ? void 0 : choice.logprobs) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs;\n            }\n            if ((choice == null ? void 0 : choice.text) != null && choice.text.length > 0) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: choice.text\n              });\n            }\n          },\n          flush(controller) {\n            if (!isFirstChunk) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              providerMetadata,\n              usage\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar usageSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar openaiCompletionResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n        token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n        top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number())).nullish()\n      }).nullish()\n    })\n  ),\n  usage: usageSchema.nullish()\n});\nvar openaiCompletionChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n          token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n          top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number())).nullish()\n        }).nullish()\n      })\n    ),\n    usage: usageSchema.nullish()\n  }),\n  openaiErrorDataSchema\n]);\n\n// src/embedding/openai-embedding-model.ts\n\n\n\n\n// src/embedding/openai-embedding-options.ts\n\nvar openaiEmbeddingProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n  The number of dimensions the resulting output embeddings should have.\n  Only supported in text-embedding-3 and later models.\n     */\n  dimensions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n  A unique identifier representing your end-user, which can help OpenAI to\n  monitor and detect abuse. Learn more.\n  */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/embedding/openai-embedding-model.ts\nvar OpenAIEmbeddingModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.maxEmbeddingsPerCall = 2048;\n    this.supportsParallelCalls = true;\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doEmbed({\n    values,\n    headers,\n    abortSignal,\n    providerOptions\n  }) {\n    var _a;\n    if (values.length > this.maxEmbeddingsPerCall) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.TooManyEmbeddingValuesForCallError({\n        provider: this.provider,\n        modelId: this.modelId,\n        maxEmbeddingsPerCall: this.maxEmbeddingsPerCall,\n        values\n      });\n    }\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiEmbeddingProviderOptions\n    })) != null ? _a : {};\n    const {\n      responseHeaders,\n      value: response,\n      rawValue\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/embeddings\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        input: values,\n        encoding_format: \"float\",\n        dimensions: openaiOptions.dimensions,\n        user: openaiOptions.user\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTextEmbeddingResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      embeddings: response.data.map((item) => item.embedding),\n      usage: response.usage ? { tokens: response.usage.prompt_tokens } : void 0,\n      response: { headers: responseHeaders, body: rawValue }\n    };\n  }\n};\nvar openaiTextEmbeddingResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ embedding: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()) })),\n  usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number() }).nullish()\n});\n\n// src/image/openai-image-model.ts\n\n\n\n// src/image/openai-image-options.ts\nvar modelMaxImagesPerCall = {\n  \"dall-e-3\": 1,\n  \"dall-e-2\": 10,\n  \"gpt-image-1\": 10\n};\nvar hasDefaultResponseFormat = /* @__PURE__ */ new Set([\"gpt-image-1\"]);\n\n// src/image/openai-image-model.ts\nvar OpenAIImageModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get maxImagesPerCall() {\n    var _a;\n    return (_a = modelMaxImagesPerCall[this.modelId]) != null ? _a : 1;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doGenerate({\n    prompt,\n    n,\n    size,\n    aspectRatio,\n    seed,\n    providerOptions,\n    headers,\n    abortSignal\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    if (aspectRatio != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"aspectRatio\",\n        details: \"This model does not support aspect ratio. Use `size` instead.\"\n      });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"seed\" });\n    }\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { value: response, responseHeaders } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/images/generations\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        prompt,\n        n,\n        size,\n        ...(_d = providerOptions.openai) != null ? _d : {},\n        ...!hasDefaultResponseFormat.has(this.modelId) ? { response_format: \"b64_json\" } : {}\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiImageResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      images: response.data.map((item) => item.b64_json),\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders\n      },\n      providerMetadata: {\n        openai: {\n          images: response.data.map(\n            (item) => item.revised_prompt ? {\n              revisedPrompt: item.revised_prompt\n            } : null\n          )\n        }\n      }\n    };\n  }\n};\nvar openaiImageResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ b64_json: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), revised_prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional() })\n  )\n});\n\n// src/tool/code-interpreter.ts\n\n\nvar codeInterpreterInputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  containerId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar codeInterpreterOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n    ])\n  ).nullish()\n});\nvar codeInterpreterArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  container: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      fileIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n    })\n  ]).optional()\n});\nvar codeInterpreterToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.code_interpreter\",\n  name: \"code_interpreter\",\n  inputSchema: codeInterpreterInputSchema,\n  outputSchema: codeInterpreterOutputSchema\n});\nvar codeInterpreter = (args = {}) => {\n  return codeInterpreterToolFactory(args);\n};\n\n// src/tool/web-search.ts\n\n\nvar webSearchArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    allowedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  }).optional(),\n  searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearchToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.web_search\",\n  name: \"web_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      })\n    ]).nullish()\n  })\n});\nvar webSearch = (args = {}) => {\n  return webSearchToolFactory(args);\n};\n\n// src/openai-tools.ts\nvar openaiTools = {\n  /**\n   * The Code Interpreter tool allows models to write and run Python code in a\n   * sandboxed environment to solve complex problems in domains like data analysis,\n   * coding, and math.\n   *\n   * @param container - The container to use for the code interpreter.\n   *\n   * Must have name `code_interpreter`.\n   */\n  codeInterpreter,\n  /**\n   * File search is a tool available in the Responses API. It enables models to\n   * retrieve information in a knowledge base of previously uploaded files through\n   * semantic and keyword search.\n   *\n   * Must have name `file_search`.\n   *\n   * @param vectorStoreIds - The vector store IDs to use for the file search.\n   * @param maxNumResults - The maximum number of results to return.\n   * @param ranking - The ranking options to use for the file search.\n   * @param filters - The filters to use for the file search.\n   */\n  fileSearch,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * Must have name `web_search_preview`.\n   *\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   *\n   * @deprecated Use `webSearch` instead.\n   */\n  webSearchPreview,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * Must have name `web_search`.\n   *\n   * @param filters - The filters to use for the web search.\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   */\n  webSearch\n};\n\n// src/responses/openai-responses-language-model.ts\n\n\n\n\n// src/responses/convert-to-openai-responses-input.ts\n\n\n\nfunction isFileId(data, prefixes) {\n  if (!prefixes) return false;\n  return prefixes.some((prefix) => data.startsWith(prefix));\n}\nasync function convertToOpenAIResponsesInput({\n  prompt,\n  systemMessageMode,\n  fileIdPrefixes\n}) {\n  var _a, _b, _c, _d, _e, _f;\n  const input = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            input.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            input.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        input.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a2, _b2, _c2;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"input_text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"input_image\",\n                    ...part.data instanceof URL ? { image_url: part.data.toString() } : typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      image_url: `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    },\n                    detail: (_b2 = (_a2 = part.providerOptions) == null ? void 0 : _a2.openai) == null ? void 0 : _b2.imageDetail\n                  };\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    return {\n                      type: \"input_file\",\n                      file_url: part.data.toString()\n                    };\n                  }\n                  return {\n                    type: \"input_file\",\n                    ...typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      filename: (_c2 = part.filename) != null ? _c2 : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        const reasoningMessages = {};\n        const toolCallParts = {};\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              input.push({\n                role: \"assistant\",\n                content: [{ type: \"output_text\", text: part.text }],\n                id: (_c = (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.itemId) != null ? _c : void 0\n              });\n              break;\n            }\n            case \"tool-call\": {\n              toolCallParts[part.toolCallId] = part;\n              if (part.providerExecuted) {\n                break;\n              }\n              input.push({\n                type: \"function_call\",\n                call_id: part.toolCallId,\n                name: part.toolName,\n                arguments: JSON.stringify(part.input),\n                id: (_f = (_e = (_d = part.providerOptions) == null ? void 0 : _d.openai) == null ? void 0 : _e.itemId) != null ? _f : void 0\n              });\n              break;\n            }\n            case \"tool-result\": {\n              warnings.push({\n                type: \"other\",\n                message: `tool result parts in assistant messages are not supported for OpenAI responses`\n              });\n              break;\n            }\n            case \"reasoning\": {\n              const providerOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n                provider: \"openai\",\n                providerOptions: part.providerOptions,\n                schema: openaiResponsesReasoningProviderOptionsSchema\n              });\n              const reasoningId = providerOptions == null ? void 0 : providerOptions.itemId;\n              if (reasoningId != null) {\n                const existingReasoningMessage = reasoningMessages[reasoningId];\n                const summaryParts = [];\n                if (part.text.length > 0) {\n                  summaryParts.push({ type: \"summary_text\", text: part.text });\n                } else if (existingReasoningMessage !== void 0) {\n                  warnings.push({\n                    type: \"other\",\n                    message: `Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(part)}.`\n                  });\n                }\n                if (existingReasoningMessage === void 0) {\n                  reasoningMessages[reasoningId] = {\n                    type: \"reasoning\",\n                    id: reasoningId,\n                    encrypted_content: providerOptions == null ? void 0 : providerOptions.reasoningEncryptedContent,\n                    summary: summaryParts\n                  };\n                  input.push(reasoningMessages[reasoningId]);\n                } else {\n                  existingReasoningMessage.summary.push(...summaryParts);\n                }\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(part)}.`\n                });\n              }\n              break;\n            }\n          }\n        }\n        break;\n      }\n      case \"tool\": {\n        for (const part of content) {\n          const output = part.output;\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          input.push({\n            type: \"function_call_output\",\n            call_id: part.toolCallId,\n            output: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { input, warnings };\n}\nvar openaiResponsesReasoningProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  itemId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningEncryptedContent: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\n// src/responses/map-openai-responses-finish-reason.ts\nfunction mapOpenAIResponseFinishReason({\n  finishReason,\n  hasFunctionCall\n}) {\n  switch (finishReason) {\n    case void 0:\n    case null:\n      return hasFunctionCall ? \"tool-calls\" : \"stop\";\n    case \"max_output_tokens\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    default:\n      return hasFunctionCall ? \"tool-calls\" : \"unknown\";\n  }\n}\n\n// src/responses/openai-responses-prepare-tools.ts\n\nfunction prepareResponsesTools({\n  tools,\n  toolChoice,\n  strictJsonSchema\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          name: tool.name,\n          description: tool.description,\n          parameters: tool.inputSchema,\n          strict: strictJsonSchema\n        });\n        break;\n      case \"provider-defined\": {\n        switch (tool.id) {\n          case \"openai.file_search\": {\n            const args = fileSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"file_search\",\n              vector_store_ids: args.vectorStoreIds,\n              max_num_results: args.maxNumResults,\n              ranking_options: args.ranking ? { ranker: args.ranking.ranker } : void 0,\n              filters: args.filters\n            });\n            break;\n          }\n          case \"openai.web_search_preview\": {\n            const args = webSearchPreviewArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search_preview\",\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.web_search\": {\n            const args = webSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search\",\n              filters: args.filters != null ? { allowed_domains: args.filters.allowedDomains } : void 0,\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.code_interpreter\": {\n            const args = codeInterpreterArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"code_interpreter\",\n              container: args.container == null ? { type: \"auto\", file_ids: void 0 } : typeof args.container === \"string\" ? args.container : { type: \"auto\", file_ids: args.container.fileIds }\n            });\n            break;\n          }\n          default: {\n            toolWarnings.push({ type: \"unsupported-tool\", tool });\n            break;\n          }\n        }\n        break;\n      }\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: toolChoice.toolName === \"code_interpreter\" || toolChoice.toolName === \"file_search\" || toolChoice.toolName === \"web_search_preview\" || toolChoice.toolName === \"web_search\" ? { type: toolChoice.toolName } : { type: \"function\", name: toolChoice.toolName },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/responses/openai-responses-language-model.ts\nvar webSearchCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n      query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ]).nullish()\n});\nvar codeInterpreterCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_interpreter_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n  container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n    ])\n  ).nullable()\n});\nvar TOP_LOGPROBS_MAX = 20;\nvar LOGPROBS_SCHEMA = zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n      })\n    )\n  })\n);\nvar OpenAIResponsesLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/],\n      \"application/pdf\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    maxOutputTokens,\n    temperature,\n    stopSequences,\n    topP,\n    topK,\n    presencePenalty,\n    frequencyPenalty,\n    seed,\n    prompt,\n    providerOptions,\n    tools,\n    toolChoice,\n    responseFormat\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    const modelConfig = getResponsesModelConfig(this.modelId);\n    if (topK != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"topK\" });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"seed\" });\n    }\n    if (presencePenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"presencePenalty\"\n      });\n    }\n    if (frequencyPenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"frequencyPenalty\"\n      });\n    }\n    if (stopSequences != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"stopSequences\" });\n    }\n    const { input, warnings: inputWarnings } = await convertToOpenAIResponsesInput({\n      prompt,\n      systemMessageMode: modelConfig.systemMessageMode,\n      fileIdPrefixes: this.config.fileIdPrefixes\n    });\n    warnings.push(...inputWarnings);\n    const openaiOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiResponsesProviderOptionsSchema\n    });\n    const strictJsonSchema = (_a = openaiOptions == null ? void 0 : openaiOptions.strictJsonSchema) != null ? _a : false;\n    let include = openaiOptions == null ? void 0 : openaiOptions.include;\n    const topLogprobs = typeof (openaiOptions == null ? void 0 : openaiOptions.logprobs) === \"number\" ? openaiOptions == null ? void 0 : openaiOptions.logprobs : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? TOP_LOGPROBS_MAX : void 0;\n    include = topLogprobs ? Array.isArray(include) ? [...include, \"message.output_text.logprobs\"] : [\"message.output_text.logprobs\"] : include;\n    const webSearchToolName = (_b = tools == null ? void 0 : tools.find(\n      (tool) => tool.type === \"provider-defined\" && (tool.id === \"openai.web_search\" || tool.id === \"openai.web_search_preview\")\n    )) == null ? void 0 : _b.name;\n    include = webSearchToolName ? Array.isArray(include) ? [...include, \"web_search_call.action.sources\"] : [\"web_search_call.action.sources\"] : include;\n    const codeInterpreterToolName = (_c = tools == null ? void 0 : tools.find(\n      (tool) => tool.type === \"provider-defined\" && tool.id === \"openai.code_interpreter\"\n    )) == null ? void 0 : _c.name;\n    include = codeInterpreterToolName ? Array.isArray(include) ? [...include, \"code_interpreter_call.outputs\"] : [\"code_interpreter_call.outputs\"] : include;\n    const baseArgs = {\n      model: this.modelId,\n      input,\n      temperature,\n      top_p: topP,\n      max_output_tokens: maxOutputTokens,\n      ...((responseFormat == null ? void 0 : responseFormat.type) === \"json\" || (openaiOptions == null ? void 0 : openaiOptions.textVerbosity)) && {\n        text: {\n          ...(responseFormat == null ? void 0 : responseFormat.type) === \"json\" && {\n            format: responseFormat.schema != null ? {\n              type: \"json_schema\",\n              strict: strictJsonSchema,\n              name: (_d = responseFormat.name) != null ? _d : \"response\",\n              description: responseFormat.description,\n              schema: responseFormat.schema\n            } : { type: \"json_object\" }\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.textVerbosity) && {\n            verbosity: openaiOptions.textVerbosity\n          }\n        }\n      },\n      // provider options:\n      metadata: openaiOptions == null ? void 0 : openaiOptions.metadata,\n      parallel_tool_calls: openaiOptions == null ? void 0 : openaiOptions.parallelToolCalls,\n      previous_response_id: openaiOptions == null ? void 0 : openaiOptions.previousResponseId,\n      store: openaiOptions == null ? void 0 : openaiOptions.store,\n      user: openaiOptions == null ? void 0 : openaiOptions.user,\n      instructions: openaiOptions == null ? void 0 : openaiOptions.instructions,\n      service_tier: openaiOptions == null ? void 0 : openaiOptions.serviceTier,\n      include,\n      prompt_cache_key: openaiOptions == null ? void 0 : openaiOptions.promptCacheKey,\n      safety_identifier: openaiOptions == null ? void 0 : openaiOptions.safetyIdentifier,\n      top_logprobs: topLogprobs,\n      // model-specific settings:\n      ...modelConfig.isReasoningModel && ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null || (openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) && {\n        reasoning: {\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null && {\n            effort: openaiOptions.reasoningEffort\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null && {\n            summary: openaiOptions.reasoningSummary\n          }\n        }\n      },\n      ...modelConfig.requiredAutoTruncation && {\n        truncation: \"auto\"\n      }\n    };\n    if (modelConfig.isReasoningModel) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_p != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported for reasoning models\"\n        });\n      }\n    } else {\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"reasoningEffort\",\n          details: \"reasoningEffort is not supported for non-reasoning models\"\n        });\n      }\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"reasoningSummary\",\n          details: \"reasoningSummary is not supported for non-reasoning models\"\n        });\n      }\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"flex\" && !modelConfig.supportsFlexProcessing) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      delete baseArgs.service_tier;\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"priority\" && !modelConfig.supportsPriorityProcessing) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      delete baseArgs.service_tier;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareResponsesTools({\n      tools,\n      toolChoice,\n      strictJsonSchema\n    });\n    return {\n      webSearchToolName,\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;\n    const {\n      args: body,\n      warnings,\n      webSearchToolName\n    } = await this.getArgs(options);\n    const url = this.config.url({\n      path: \"/responses\",\n      modelId: this.modelId\n    });\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url,\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n          created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n          error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          }).nullish(),\n          model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n          output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n                role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"output_text\"),\n                    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                    logprobs: LOGPROBS_SCHEMA.nullish(),\n                    annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                      zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n                          start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                          end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                          title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                        }),\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_citation\"),\n                          file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                          filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                          index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n                        }),\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"container_file_citation\")\n                        })\n                      ])\n                    )\n                  })\n                )\n              }),\n              codeInterpreterCallItem,\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n                call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n              }),\n              webSearchCallItem,\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n                queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).nullish(),\n                results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                      score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                    })\n                  })\n                ).nullish()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                summary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"summary_text\"),\n                    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                  })\n                )\n              })\n            ])\n          ),\n          service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n          incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).nullable(),\n          usage: usageSchema2\n        })\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    if (response.error) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.APICallError({\n        message: response.error.message,\n        url,\n        requestBodyValues: body,\n        statusCode: 400,\n        responseHeaders,\n        responseBody: rawResponse,\n        isRetryable: false\n      });\n    }\n    const content = [];\n    const logprobs = [];\n    let hasFunctionCall = false;\n    for (const part of response.output) {\n      switch (part.type) {\n        case \"reasoning\": {\n          if (part.summary.length === 0) {\n            part.summary.push({ type: \"summary_text\", text: \"\" });\n          }\n          for (const summary of part.summary) {\n            content.push({\n              type: \"reasoning\",\n              text: summary.text,\n              providerMetadata: {\n                openai: {\n                  itemId: part.id,\n                  reasoningEncryptedContent: (_a = part.encrypted_content) != null ? _a : null\n                }\n              }\n            });\n          }\n          break;\n        }\n        case \"message\": {\n          for (const contentPart of part.content) {\n            if (((_c = (_b = options.providerOptions) == null ? void 0 : _b.openai) == null ? void 0 : _c.logprobs) && contentPart.logprobs) {\n              logprobs.push(contentPart.logprobs);\n            }\n            content.push({\n              type: \"text\",\n              text: contentPart.text,\n              providerMetadata: {\n                openai: {\n                  itemId: part.id\n                }\n              }\n            });\n            for (const annotation of contentPart.annotations) {\n              if (annotation.type === \"url_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_f = (_e = (_d = this.config).generateId) == null ? void 0 : _e.call(_d)) != null ? _f : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              } else if (annotation.type === \"file_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_i = (_h = (_g = this.config).generateId) == null ? void 0 : _h.call(_g)) != null ? _i : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_k = (_j = annotation.quote) != null ? _j : annotation.filename) != null ? _k : \"Document\",\n                  filename: (_l = annotation.filename) != null ? _l : annotation.file_id\n                });\n              }\n            }\n          }\n          break;\n        }\n        case \"function_call\": {\n          hasFunctionCall = true;\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: part.name,\n            input: part.arguments,\n            providerMetadata: {\n              openai: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"web_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n            input: JSON.stringify({ action: part.action }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n            result: { status: part.status },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"computer_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"computer_use\",\n            input: \"\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"computer_use\",\n            result: {\n              type: \"computer_use_tool_result\",\n              status: part.status || \"completed\"\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"file_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"file_search\",\n            input: \"\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"file_search\",\n            result: {\n              type: \"file_search_tool_result\",\n              status: part.status || \"completed\",\n              ...part.queries && { queries: part.queries },\n              ...part.results && { results: part.results }\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"code_interpreter_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"code_interpreter\",\n            input: JSON.stringify({\n              code: part.code,\n              containerId: part.container_id\n            }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"code_interpreter\",\n            result: {\n              outputs: part.outputs\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n      }\n    }\n    const providerMetadata = {\n      openai: { responseId: response.id }\n    };\n    if (logprobs.length > 0) {\n      providerMetadata.openai.logprobs = logprobs;\n    }\n    if (typeof response.service_tier === \"string\") {\n      providerMetadata.openai.serviceTier = response.service_tier;\n    }\n    return {\n      content,\n      finishReason: mapOpenAIResponseFinishReason({\n        finishReason: (_m = response.incomplete_details) == null ? void 0 : _m.reason,\n        hasFunctionCall\n      }),\n      usage: {\n        inputTokens: response.usage.input_tokens,\n        outputTokens: response.usage.output_tokens,\n        totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n        reasoningTokens: (_o = (_n = response.usage.output_tokens_details) == null ? void 0 : _n.reasoning_tokens) != null ? _o : void 0,\n        cachedInputTokens: (_q = (_p = response.usage.input_tokens_details) == null ? void 0 : _p.cached_tokens) != null ? _q : void 0\n      },\n      request: { body },\n      response: {\n        id: response.id,\n        timestamp: new Date(response.created_at * 1e3),\n        modelId: response.model,\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const {\n      args: body,\n      warnings,\n      webSearchToolName\n    } = await this.getArgs(options);\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/responses\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: {\n        ...body,\n        stream: true\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiResponsesChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const self = this;\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    const logprobs = [];\n    let responseId = null;\n    const ongoingToolCalls = {};\n    let hasFunctionCall = false;\n    const activeReasoning = {};\n    let serviceTier;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (isResponseOutputItemAddedChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: value.item.name,\n                  toolCallId: value.item.call_id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.call_id,\n                  toolName: value.item.name\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: webSearchToolName != null ? webSearchToolName : \"web_search\"\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: \"computer_use\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: \"computer_use\"\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: \"file_search\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: \"file_search\"\n                });\n              } else if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-start\",\n                  id: value.item.id,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (isResponseOutputItemAddedReasoningChunk(value)) {\n                activeReasoning[value.item.id] = {\n                  encryptedContent: value.item.encrypted_content,\n                  summaryParts: [0]\n                };\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item.id}:0`,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id,\n                      reasoningEncryptedContent: (_a = value.item.encrypted_content) != null ? _a : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseOutputItemDoneChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                hasFunctionCall = true;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.call_id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: value.item.name,\n                  input: value.item.arguments,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"web_search\",\n                  input: JSON.stringify({ action: value.item.action }),\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"web_search\",\n                  result: { status: value.item.status },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"computer_use\",\n                  input: \"\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"computer_use\",\n                  result: {\n                    type: \"computer_use_tool_result\",\n                    status: value.item.status || \"completed\"\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"file_search\",\n                  input: \"\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"file_search\",\n                  result: {\n                    type: \"file_search_tool_result\",\n                    status: value.item.status || \"completed\",\n                    ...value.item.queries && { queries: value.item.queries },\n                    ...value.item.results && { results: value.item.results }\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"code_interpreter\",\n                  input: JSON.stringify({\n                    code: value.item.code,\n                    containerId: value.item.container_id\n                  }),\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"code_interpreter\",\n                  result: {\n                    outputs: value.item.outputs\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-end\",\n                  id: value.item.id\n                });\n              } else if (isResponseOutputItemDoneReasoningChunk(value)) {\n                const activeReasoningPart = activeReasoning[value.item.id];\n                for (const summaryIndex of activeReasoningPart.summaryParts) {\n                  controller.enqueue({\n                    type: \"reasoning-end\",\n                    id: `${value.item.id}:${summaryIndex}`,\n                    providerMetadata: {\n                      openai: {\n                        itemId: value.item.id,\n                        reasoningEncryptedContent: (_b = value.item.encrypted_content) != null ? _b : null\n                      }\n                    }\n                  });\n                }\n                delete activeReasoning[value.item.id];\n              }\n            } else if (isResponseFunctionCallArgumentsDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: value.delta\n                });\n              }\n            } else if (isResponseCreatedChunk(value)) {\n              responseId = value.response.id;\n              controller.enqueue({\n                type: \"response-metadata\",\n                id: value.response.id,\n                timestamp: new Date(value.response.created_at * 1e3),\n                modelId: value.response.model\n              });\n            } else if (isTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: value.item_id,\n                delta: value.delta\n              });\n              if (((_d = (_c = options.providerOptions) == null ? void 0 : _c.openai) == null ? void 0 : _d.logprobs) && value.logprobs) {\n                logprobs.push(value.logprobs);\n              }\n            } else if (isResponseReasoningSummaryPartAddedChunk(value)) {\n              if (value.summary_index > 0) {\n                (_e = activeReasoning[value.item_id]) == null ? void 0 : _e.summaryParts.push(\n                  value.summary_index\n                );\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item_id}:${value.summary_index}`,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item_id,\n                      reasoningEncryptedContent: (_g = (_f = activeReasoning[value.item_id]) == null ? void 0 : _f.encryptedContent) != null ? _g : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseReasoningSummaryTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"reasoning-delta\",\n                id: `${value.item_id}:${value.summary_index}`,\n                delta: value.delta,\n                providerMetadata: {\n                  openai: {\n                    itemId: value.item_id\n                  }\n                }\n              });\n            } else if (isResponseFinishedChunk(value)) {\n              finishReason = mapOpenAIResponseFinishReason({\n                finishReason: (_h = value.response.incomplete_details) == null ? void 0 : _h.reason,\n                hasFunctionCall\n              });\n              usage.inputTokens = value.response.usage.input_tokens;\n              usage.outputTokens = value.response.usage.output_tokens;\n              usage.totalTokens = value.response.usage.input_tokens + value.response.usage.output_tokens;\n              usage.reasoningTokens = (_j = (_i = value.response.usage.output_tokens_details) == null ? void 0 : _i.reasoning_tokens) != null ? _j : void 0;\n              usage.cachedInputTokens = (_l = (_k = value.response.usage.input_tokens_details) == null ? void 0 : _k.cached_tokens) != null ? _l : void 0;\n              if (typeof value.response.service_tier === \"string\") {\n                serviceTier = value.response.service_tier;\n              }\n            } else if (isResponseAnnotationAddedChunk(value)) {\n              if (value.annotation.type === \"url_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_o = (_n = (_m = self.config).generateId) == null ? void 0 : _n.call(_m)) != null ? _o : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: value.annotation.url,\n                  title: value.annotation.title\n                });\n              } else if (value.annotation.type === \"file_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_r = (_q = (_p = self.config).generateId) == null ? void 0 : _q.call(_p)) != null ? _r : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_t = (_s = value.annotation.quote) != null ? _s : value.annotation.filename) != null ? _t : \"Document\",\n                  filename: (_u = value.annotation.filename) != null ? _u : value.annotation.file_id\n                });\n              }\n            } else if (isErrorChunk(value)) {\n              controller.enqueue({ type: \"error\", error: value });\n            }\n          },\n          flush(controller) {\n            const providerMetadata = {\n              openai: {\n                responseId\n              }\n            };\n            if (logprobs.length > 0) {\n              providerMetadata.openai.logprobs = logprobs;\n            }\n            if (serviceTier !== void 0) {\n              providerMetadata.openai.serviceTier = serviceTier;\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage,\n              providerMetadata\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar usageSchema2 = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  input_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish() }).nullish(),\n  output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  output_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish() }).nullish()\n});\nvar textDeltaChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_text.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  logprobs: LOGPROBS_SCHEMA.nullish()\n});\nvar errorChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  sequence_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar responseFinishedChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"response.completed\", \"response.incomplete\"]),\n  response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).nullish(),\n    usage: usageSchema2,\n    service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n  })\n});\nvar responseCreatedChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.created\"),\n  response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n  })\n});\nvar responseOutputItemAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_item.added\"),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n      }).nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).nullish(),\n      results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        })\n      ).optional()\n    })\n  ])\n});\nvar responseOutputItemDoneSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_item.done\"),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\")\n    }),\n    codeInterpreterCallItem,\n    webSearchCallItem,\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\")\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\"),\n      queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).nullish(),\n      results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        })\n      ).nullish()\n    })\n  ])\n});\nvar responseFunctionCallArgumentsDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.function_call_arguments.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseAnnotationAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_text.annotation.added\"),\n  annotation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_citation\"),\n      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    })\n  ])\n});\nvar responseReasoningSummaryPartAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.reasoning_summary_part.added\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar responseReasoningSummaryTextDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.reasoning_summary_text.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar openaiResponsesChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  textDeltaChunkSchema,\n  responseFinishedChunkSchema,\n  responseCreatedChunkSchema,\n  responseOutputItemAddedSchema,\n  responseOutputItemDoneSchema,\n  responseFunctionCallArgumentsDeltaSchema,\n  responseAnnotationAddedSchema,\n  responseReasoningSummaryPartAddedSchema,\n  responseReasoningSummaryTextDeltaSchema,\n  errorChunkSchema,\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).loose()\n  // fallback for unknown chunks\n]);\nfunction isTextDeltaChunk(chunk) {\n  return chunk.type === \"response.output_text.delta\";\n}\nfunction isResponseOutputItemDoneChunk(chunk) {\n  return chunk.type === \"response.output_item.done\";\n}\nfunction isResponseOutputItemDoneReasoningChunk(chunk) {\n  return isResponseOutputItemDoneChunk(chunk) && chunk.item.type === \"reasoning\";\n}\nfunction isResponseFinishedChunk(chunk) {\n  return chunk.type === \"response.completed\" || chunk.type === \"response.incomplete\";\n}\nfunction isResponseCreatedChunk(chunk) {\n  return chunk.type === \"response.created\";\n}\nfunction isResponseFunctionCallArgumentsDeltaChunk(chunk) {\n  return chunk.type === \"response.function_call_arguments.delta\";\n}\nfunction isResponseOutputItemAddedChunk(chunk) {\n  return chunk.type === \"response.output_item.added\";\n}\nfunction isResponseOutputItemAddedReasoningChunk(chunk) {\n  return isResponseOutputItemAddedChunk(chunk) && chunk.item.type === \"reasoning\";\n}\nfunction isResponseAnnotationAddedChunk(chunk) {\n  return chunk.type === \"response.output_text.annotation.added\";\n}\nfunction isResponseReasoningSummaryPartAddedChunk(chunk) {\n  return chunk.type === \"response.reasoning_summary_part.added\";\n}\nfunction isResponseReasoningSummaryTextDeltaChunk(chunk) {\n  return chunk.type === \"response.reasoning_summary_text.delta\";\n}\nfunction isErrorChunk(chunk) {\n  return chunk.type === \"error\";\n}\nfunction getResponsesModelConfig(modelId) {\n  const supportsFlexProcessing2 = modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n  const supportsPriorityProcessing2 = modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n  const defaults = {\n    requiredAutoTruncation: false,\n    systemMessageMode: \"system\",\n    supportsFlexProcessing: supportsFlexProcessing2,\n    supportsPriorityProcessing: supportsPriorityProcessing2\n  };\n  if (modelId.startsWith(\"gpt-5-chat\")) {\n    return {\n      ...defaults,\n      isReasoningModel: false\n    };\n  }\n  if (modelId.startsWith(\"o\") || modelId.startsWith(\"gpt-5\") || modelId.startsWith(\"codex-\") || modelId.startsWith(\"computer-use\")) {\n    if (modelId.startsWith(\"o1-mini\") || modelId.startsWith(\"o1-preview\")) {\n      return {\n        ...defaults,\n        isReasoningModel: true,\n        systemMessageMode: \"remove\"\n      };\n    }\n    return {\n      ...defaults,\n      isReasoningModel: true,\n      systemMessageMode: \"developer\"\n    };\n  }\n  return {\n    ...defaults,\n    isReasoningModel: false\n  };\n}\nvar openaiResponsesProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.any().nullish(),\n  parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  previousResponseId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningSummary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"flex\", \"priority\"]).nullish(),\n  include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"reasoning.encrypted_content\",\n      \"file_search_call.results\",\n      \"message.output_text.logprobs\"\n    ])\n  ).nullish(),\n  textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).nullish(),\n  promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  /**\n   * Return the log probabilities of the tokens.\n   *\n   * Setting to true will return the log probabilities of the tokens that\n   * were generated.\n   *\n   * Setting to a number will return the log probabilities of the top n\n   * tokens that were generated.\n   *\n   * @see https://platform.openai.com/docs/api-reference/responses/create\n   * @see https://cookbook.openai.com/examples/using_logprobs\n   */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(1).max(TOP_LOGPROBS_MAX)]).optional()\n});\n\n// src/speech/openai-speech-model.ts\n\n\nvar OpenAIProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  speed: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(0.25).max(4).default(1).nullish()\n});\nvar OpenAISpeechModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    text,\n    voice = \"alloy\",\n    outputFormat = \"mp3\",\n    speed,\n    instructions,\n    language,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: OpenAIProviderOptionsSchema\n    });\n    const requestBody = {\n      model: this.modelId,\n      input: text,\n      voice,\n      response_format: \"mp3\",\n      speed,\n      instructions\n    };\n    if (outputFormat) {\n      if ([\"mp3\", \"opus\", \"aac\", \"flac\", \"wav\", \"pcm\"].includes(outputFormat)) {\n        requestBody.response_format = outputFormat;\n      } else {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"outputFormat\",\n          details: `Unsupported output format: ${outputFormat}. Using mp3 instead.`\n        });\n      }\n    }\n    if (openAIOptions) {\n      const speechModelOptions = {};\n      for (const key in speechModelOptions) {\n        const value = speechModelOptions[key];\n        if (value !== void 0) {\n          requestBody[key] = value;\n        }\n      }\n    }\n    if (language) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"language\",\n        details: `OpenAI speech models do not support language selection. Language parameter \"${language}\" was ignored.`\n      });\n    }\n    return {\n      requestBody,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { requestBody, warnings } = await this.getArgs(options);\n    const {\n      value: audio,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/audio/speech\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: requestBody,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createBinaryResponseHandler)(),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      audio,\n      warnings,\n      request: {\n        body: JSON.stringify(requestBody)\n      },\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\n\n// src/transcription/openai-transcription-model.ts\n\n\n\n// src/transcription/openai-transcription-options.ts\n\nvar openAITranscriptionProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Additional information to include in the transcription response.\n   */\n  include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * The language of the input audio in ISO-639-1 format.\n   */\n  language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * An optional text to guide the model's style or continue a previous audio segment.\n   */\n  prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * The sampling temperature, between 0 and 1.\n   * @default 0\n   */\n  temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(0).max(1).default(0).optional(),\n  /**\n   * The timestamp granularities to populate for this transcription.\n   * @default ['segment']\n   */\n  timestampGranularities: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"word\", \"segment\"])).default([\"segment\"]).optional()\n});\n\n// src/transcription/openai-transcription-model.ts\nvar languageMap = {\n  afrikaans: \"af\",\n  arabic: \"ar\",\n  armenian: \"hy\",\n  azerbaijani: \"az\",\n  belarusian: \"be\",\n  bosnian: \"bs\",\n  bulgarian: \"bg\",\n  catalan: \"ca\",\n  chinese: \"zh\",\n  croatian: \"hr\",\n  czech: \"cs\",\n  danish: \"da\",\n  dutch: \"nl\",\n  english: \"en\",\n  estonian: \"et\",\n  finnish: \"fi\",\n  french: \"fr\",\n  galician: \"gl\",\n  german: \"de\",\n  greek: \"el\",\n  hebrew: \"he\",\n  hindi: \"hi\",\n  hungarian: \"hu\",\n  icelandic: \"is\",\n  indonesian: \"id\",\n  italian: \"it\",\n  japanese: \"ja\",\n  kannada: \"kn\",\n  kazakh: \"kk\",\n  korean: \"ko\",\n  latvian: \"lv\",\n  lithuanian: \"lt\",\n  macedonian: \"mk\",\n  malay: \"ms\",\n  marathi: \"mr\",\n  maori: \"mi\",\n  nepali: \"ne\",\n  norwegian: \"no\",\n  persian: \"fa\",\n  polish: \"pl\",\n  portuguese: \"pt\",\n  romanian: \"ro\",\n  russian: \"ru\",\n  serbian: \"sr\",\n  slovak: \"sk\",\n  slovenian: \"sl\",\n  spanish: \"es\",\n  swahili: \"sw\",\n  swedish: \"sv\",\n  tagalog: \"tl\",\n  tamil: \"ta\",\n  thai: \"th\",\n  turkish: \"tr\",\n  ukrainian: \"uk\",\n  urdu: \"ur\",\n  vietnamese: \"vi\",\n  welsh: \"cy\"\n};\nvar OpenAITranscriptionModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    audio,\n    mediaType,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openAITranscriptionProviderOptions\n    });\n    const formData = new FormData();\n    const blob = audio instanceof Uint8Array ? new Blob([audio]) : new Blob([(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertBase64ToUint8Array)(audio)]);\n    formData.append(\"model\", this.modelId);\n    const fileExtension = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.mediaTypeToExtension)(mediaType);\n    formData.append(\n      \"file\",\n      new File([blob], \"audio\", { type: mediaType }),\n      `audio.${fileExtension}`\n    );\n    if (openAIOptions) {\n      const transcriptionModelOptions = {\n        include: openAIOptions.include,\n        language: openAIOptions.language,\n        prompt: openAIOptions.prompt,\n        // https://platform.openai.com/docs/api-reference/audio/createTranscription#audio_createtranscription-response_format\n        // prefer verbose_json to get segments for models that support it\n        response_format: [\n          \"gpt-4o-transcribe\",\n          \"gpt-4o-mini-transcribe\"\n        ].includes(this.modelId) ? \"json\" : \"verbose_json\",\n        temperature: openAIOptions.temperature,\n        timestamp_granularities: openAIOptions.timestampGranularities\n      };\n      for (const [key, value] of Object.entries(transcriptionModelOptions)) {\n        if (value != null) {\n          if (Array.isArray(value)) {\n            for (const item of value) {\n              formData.append(`${key}[]`, String(item));\n            }\n          } else {\n            formData.append(key, String(value));\n          }\n        }\n      }\n    }\n    return {\n      formData,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { formData, warnings } = await this.getArgs(options);\n    const {\n      value: response,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postFormDataToApi)({\n      url: this.config.url({\n        path: \"/audio/transcriptions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      formData,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTranscriptionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const language = response.language != null && response.language in languageMap ? languageMap[response.language] : void 0;\n    return {\n      text: response.text,\n      segments: (_g = (_f = (_d = response.segments) == null ? void 0 : _d.map((segment) => ({\n        text: segment.text,\n        startSecond: segment.start,\n        endSecond: segment.end\n      }))) != null ? _f : (_e = response.words) == null ? void 0 : _e.map((word) => ({\n        text: word.word,\n        startSecond: word.start,\n        endSecond: word.end\n      }))) != null ? _g : [],\n      language,\n      durationInSeconds: (_h = response.duration) != null ? _h : void 0,\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\nvar openaiTranscriptionResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  duration: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  words: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      word: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n    })\n  ).nullish(),\n  segments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      seek: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n      temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      avg_logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      compression_ratio: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      no_speech_prob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n    })\n  ).nullish()\n});\n\n// src/openai-provider.ts\nfunction createOpenAI(options = {}) {\n  var _a, _b;\n  const baseURL = (_a = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(options.baseURL)) != null ? _a : \"https://api.openai.com/v1\";\n  const providerName = (_b = options.name) != null ? _b : \"openai\";\n  const getHeaders = () => ({\n    Authorization: `Bearer ${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadApiKey)({\n      apiKey: options.apiKey,\n      environmentVariableName: \"OPENAI_API_KEY\",\n      description: \"OpenAI\"\n    })}`,\n    \"OpenAI-Organization\": options.organization,\n    \"OpenAI-Project\": options.project,\n    ...options.headers\n  });\n  const createChatModel = (modelId) => new OpenAIChatLanguageModel(modelId, {\n    provider: `${providerName}.chat`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createCompletionModel = (modelId) => new OpenAICompletionLanguageModel(modelId, {\n    provider: `${providerName}.completion`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createEmbeddingModel = (modelId) => new OpenAIEmbeddingModel(modelId, {\n    provider: `${providerName}.embedding`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createImageModel = (modelId) => new OpenAIImageModel(modelId, {\n    provider: `${providerName}.image`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createTranscriptionModel = (modelId) => new OpenAITranscriptionModel(modelId, {\n    provider: `${providerName}.transcription`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createSpeechModel = (modelId) => new OpenAISpeechModel(modelId, {\n    provider: `${providerName}.speech`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createLanguageModel = (modelId) => {\n    if (new.target) {\n      throw new Error(\n        \"The OpenAI model function cannot be called with the new keyword.\"\n      );\n    }\n    return createResponsesModel(modelId);\n  };\n  const createResponsesModel = (modelId) => {\n    return new OpenAIResponsesLanguageModel(modelId, {\n      provider: `${providerName}.responses`,\n      url: ({ path }) => `${baseURL}${path}`,\n      headers: getHeaders,\n      fetch: options.fetch,\n      fileIdPrefixes: [\"file-\"]\n    });\n  };\n  const provider = function(modelId) {\n    return createLanguageModel(modelId);\n  };\n  provider.languageModel = createLanguageModel;\n  provider.chat = createChatModel;\n  provider.completion = createCompletionModel;\n  provider.responses = createResponsesModel;\n  provider.embedding = createEmbeddingModel;\n  provider.textEmbedding = createEmbeddingModel;\n  provider.textEmbeddingModel = createEmbeddingModel;\n  provider.image = createImageModel;\n  provider.imageModel = createImageModel;\n  provider.transcription = createTranscriptionModel;\n  provider.transcriptionModel = createTranscriptionModel;\n  provider.speech = createSpeechModel;\n  provider.speechModel = createSpeechModel;\n  provider.tools = openaiTools;\n  return provider;\n}\nvar openai = createOpenAI();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaytvcGVuYWlAMi4wLjMwX3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL29wZW5haS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUlnQzs7QUFFaEM7QUFHMEI7QUFTTTtBQUNDOztBQUVqQztBQUMyQjtBQUM2QztBQUN4RSw0QkFBNEIsMENBQVE7QUFDcEMsU0FBUywwQ0FBUTtBQUNqQixhQUFhLDBDQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMENBQVE7QUFDbEIsV0FBVyx1Q0FBSztBQUNoQixVQUFVLHlDQUFPLEVBQUUsMENBQVEsSUFBSSwwQ0FBUTtBQUN2QyxHQUFHO0FBQ0gsQ0FBQztBQUNELGtDQUFrQyxzRkFBOEI7QUFDaEU7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFHMEI7QUFDK0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5QkFBeUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxpQkFBaUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0NBQXdDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUYsV0FBVyxTQUFTLHVFQUFlLFlBQVk7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSw4QkFBOEIsMkVBQTZCO0FBQzNEO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQUksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sUUFBUSxx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QzlCLFlBQVksTUFBTSxRQUFRLFFBQVEsRUFBRSxLQUFLO0FBQ3pDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsYUFBYTtBQUM5QixZQUFZLE1BQU0sUUFBUSxRQUFRLEVBQUUsS0FBSztBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsaUJBQWlCLGFBQWE7QUFDOUIsWUFBWSxNQUFNLFFBQVEsUUFBUSxFQUFFLEtBQUs7QUFDekM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDLGNBQWMsTUFBTSxRQUFRLFFBQVEsRUFBRSxLQUFLO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvYWJoYXRuYWdhci9hcGFyYWppdGFhX2FpX2VuZ2luZWVyaW5nX2Jvb3RjYW1wL2FlYm9vdGNhbXBfY2Fwc3RvbmVfcHJvamVjdC9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaytvcGVuYWlAMi4wLjMwX3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL29wZW5haS9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvb3BlbmFpLXByb3ZpZGVyLnRzXG5pbXBvcnQge1xuICBsb2FkQXBpS2V5LFxuICB3aXRob3V0VHJhaWxpbmdTbGFzaFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvY2hhdC9vcGVuYWktY2hhdC1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgSW52YWxpZFJlc3BvbnNlRGF0YUVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyxcbiAgY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIsXG4gIGdlbmVyYXRlSWQsXG4gIGlzUGFyc2FibGVKc29uLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyxcbiAgcG9zdEpzb25Ub0FwaVxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL29wZW5haS1lcnJvci50c1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjRcIjtcbmltcG9ydCB7IGNyZWF0ZUpzb25FcnJvclJlc3BvbnNlSGFuZGxlciB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG52YXIgb3BlbmFpRXJyb3JEYXRhU2NoZW1hID0gei5vYmplY3Qoe1xuICBlcnJvcjogei5vYmplY3Qoe1xuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCksXG4gICAgLy8gVGhlIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYmVsb3cgaXMgaGFuZGxlZCBsb29zZWx5IHRvIHN1cHBvcnRcbiAgICAvLyBPcGVuQUktY29tcGF0aWJsZSBwcm92aWRlcnMgdGhhdCBoYXZlIHNsaWdodGx5IGRpZmZlcmVudCBlcnJvclxuICAgIC8vIHJlc3BvbnNlczpcbiAgICB0eXBlOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgICBwYXJhbTogei5hbnkoKS5udWxsaXNoKCksXG4gICAgY29kZTogei51bmlvbihbei5zdHJpbmcoKSwgei5udW1iZXIoKV0pLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyID0gY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyKHtcbiAgZXJyb3JTY2hlbWE6IG9wZW5haUVycm9yRGF0YVNjaGVtYSxcbiAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhLmVycm9yLm1lc3NhZ2Vcbn0pO1xuXG4vLyBzcmMvY2hhdC9jb252ZXJ0LXRvLW9wZW5haS1jaGF0LW1lc3NhZ2VzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHsgY29udmVydFRvQmFzZTY0IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUNoYXRNZXNzYWdlcyh7XG4gIHByb21wdCxcbiAgc3lzdGVtTWVzc2FnZU1vZGUgPSBcInN5c3RlbVwiXG59KSB7XG4gIGNvbnN0IG1lc3NhZ2VzID0gW107XG4gIGNvbnN0IHdhcm5pbmdzID0gW107XG4gIGZvciAoY29uc3QgeyByb2xlLCBjb250ZW50IH0gb2YgcHJvbXB0KSB7XG4gICAgc3dpdGNoIChyb2xlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgc3dpdGNoIChzeXN0ZW1NZXNzYWdlTW9kZSkge1xuICAgICAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImRldmVsb3BlclwiOiB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJkZXZlbG9wZXJcIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicmVtb3ZlXCI6IHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3lzdGVtIG1lc3NhZ2VzIGFyZSByZW1vdmVkIGZvciB0aGlzIG1vZGVsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSBzeXN0ZW1NZXNzYWdlTW9kZTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVuc3VwcG9ydGVkIHN5c3RlbSBtZXNzYWdlIG1vZGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ1c2VyXCI6IHtcbiAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID09PSAxICYmIGNvbnRlbnRbMF0udHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGNvbnRlbnRbMF0udGV4dCB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50Lm1hcCgocGFydCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBwYXJ0LnRleHQgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQubWVkaWFUeXBlLnN0YXJ0c1dpdGgoXCJpbWFnZS9cIikpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHlwZSA9IHBhcnQubWVkaWFUeXBlID09PSBcImltYWdlLypcIiA/IFwiaW1hZ2UvanBlZ1wiIDogcGFydC5tZWRpYVR5cGU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCA/IHBhcnQuZGF0YS50b1N0cmluZygpIDogYGRhdGE6JHttZWRpYVR5cGV9O2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gT3BlbkFJIHNwZWNpZmljIGV4dGVuc2lvbjogaW1hZ2UgZGV0YWlsXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAoX2IgPSAoX2EgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm9wZW5haSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmltYWdlRGV0YWlsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0Lm1lZGlhVHlwZS5zdGFydHNXaXRoKFwiYXVkaW8vXCIpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC5kYXRhIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogXCJhdWRpbyBmaWxlIHBhcnRzIHdpdGggVVJMc1wiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXJ0Lm1lZGlhVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8vd2F2XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9hdWRpb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfYXVkaW86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udmVydFRvQmFzZTY0KHBhcnQuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJ3YXZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImF1ZGlvL21wM1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8vbXBlZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfYXVkaW9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0X2F1ZGlvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwibXAzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogYGF1ZGlvIGNvbnRlbnQgcGFydHMgd2l0aCBtZWRpYSB0eXBlICR7cGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIikge1xuICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwiUERGIGZpbGUgcGFydHMgd2l0aCBVUkxzXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbGVcIixcbiAgICAgICAgICAgICAgICAgICAgZmlsZTogdHlwZW9mIHBhcnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBwYXJ0LmRhdGEuc3RhcnRzV2l0aChcImZpbGUtXCIpID8geyBmaWxlX2lkOiBwYXJ0LmRhdGEgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogKF9jID0gcGFydC5maWxlbmFtZSkgIT0gbnVsbCA/IF9jIDogYHBhcnQtJHtpbmRleH0ucGRmYCxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlX2RhdGE6IGBkYXRhOmFwcGxpY2F0aW9uL3BkZjtiYXNlNjQsJHtjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKX1gXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IGBmaWxlIHBhcnQgbWVkaWEgdHlwZSAke3BhcnQubWVkaWFUeXBlfWBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjoge1xuICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgY29udGVudCkge1xuICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgIHRleHQgKz0gcGFydC50ZXh0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ0b29sLWNhbGxcIjoge1xuICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnQudG9vbE5hbWUsXG4gICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgY29udGVudDogdGV4dCxcbiAgICAgICAgICB0b29sX2NhbGxzOiB0b29sQ2FsbHMubGVuZ3RoID4gMCA/IHRvb2xDYWxscyA6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidG9vbFwiOiB7XG4gICAgICAgIGZvciAoY29uc3QgdG9vbFJlc3BvbnNlIG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSB0b29sUmVzcG9uc2Uub3V0cHV0O1xuICAgICAgICAgIGxldCBjb250ZW50VmFsdWU7XG4gICAgICAgICAgc3dpdGNoIChvdXRwdXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci10ZXh0XCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IG91dHB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29udGVudFwiOlxuICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG91dHB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgIHJvbGU6IFwidG9vbFwiLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0b29sUmVzcG9uc2UudG9vbENhbGxJZCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRWYWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IG1lc3NhZ2VzLCB3YXJuaW5ncyB9O1xufVxuXG4vLyBzcmMvY2hhdC9nZXQtcmVzcG9uc2UtbWV0YWRhdGEudHNcbmZ1bmN0aW9uIGdldFJlc3BvbnNlTWV0YWRhdGEoe1xuICBpZCxcbiAgbW9kZWwsXG4gIGNyZWF0ZWRcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogaWQgIT0gbnVsbCA/IGlkIDogdm9pZCAwLFxuICAgIG1vZGVsSWQ6IG1vZGVsICE9IG51bGwgPyBtb2RlbCA6IHZvaWQgMCxcbiAgICB0aW1lc3RhbXA6IGNyZWF0ZWQgIT0gbnVsbCA/IG5ldyBEYXRlKGNyZWF0ZWQgKiAxZTMpIDogdm9pZCAwXG4gIH07XG59XG5cbi8vIHNyYy9jaGF0L21hcC1vcGVuYWktZmluaXNoLXJlYXNvbi50c1xuZnVuY3Rpb24gbWFwT3BlbkFJRmluaXNoUmVhc29uKGZpbmlzaFJlYXNvbikge1xuICBzd2l0Y2ggKGZpbmlzaFJlYXNvbikge1xuICAgIGNhc2UgXCJzdG9wXCI6XG4gICAgICByZXR1cm4gXCJzdG9wXCI7XG4gICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgcmV0dXJuIFwibGVuZ3RoXCI7XG4gICAgY2FzZSBcImNvbnRlbnRfZmlsdGVyXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGNhc2UgXCJmdW5jdGlvbl9jYWxsXCI6XG4gICAgY2FzZSBcInRvb2xfY2FsbHNcIjpcbiAgICAgIHJldHVybiBcInRvb2wtY2FsbHNcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xuICB9XG59XG5cbi8vIHNyYy9jaGF0L29wZW5haS1jaGF0LW9wdGlvbnMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgb3BlbmFpUHJvdmlkZXJPcHRpb25zID0gejIub2JqZWN0KHtcbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgICpcbiAgICogQWNjZXB0cyBhIEpTT04gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpblxuICAgKiB0aGUgR1BUIHRva2VuaXplcikgdG8gYW4gYXNzb2NpYXRlZCBiaWFzIHZhbHVlIGZyb20gLTEwMCB0byAxMDAuXG4gICAqL1xuICBsb2dpdEJpYXM6IHoyLnJlY29yZCh6Mi5jb2VyY2UubnVtYmVyKCksIHoyLm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9rZW5zLlxuICAgKlxuICAgKiBTZXR0aW5nIHRvIHRydWUgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMgdGhhdFxuICAgKiB3ZXJlIGdlbmVyYXRlZC5cbiAgICpcbiAgICogU2V0dGluZyB0byBhIG51bWJlciB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRvcCBuXG4gICAqIHRva2VucyB0aGF0IHdlcmUgZ2VuZXJhdGVkLlxuICAgKi9cbiAgbG9ncHJvYnM6IHoyLnVuaW9uKFt6Mi5ib29sZWFuKCksIHoyLm51bWJlcigpXSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHBhcmFsbGVsIGZ1bmN0aW9uIGNhbGxpbmcgZHVyaW5nIHRvb2wgdXNlLiBEZWZhdWx0IHRvIHRydWUuXG4gICAqL1xuICBwYXJhbGxlbFRvb2xDYWxsczogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG9cbiAgICogbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLlxuICAgKi9cbiAgdXNlcjogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFJlYXNvbmluZyBlZmZvcnQgZm9yIHJlYXNvbmluZyBtb2RlbHMuIERlZmF1bHRzIHRvIGBtZWRpdW1gLlxuICAgKi9cbiAgcmVhc29uaW5nRWZmb3J0OiB6Mi5lbnVtKFtcIm1pbmltYWxcIiwgXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogTWF4aW11bSBudW1iZXIgb2YgY29tcGxldGlvbiB0b2tlbnMgdG8gZ2VuZXJhdGUuIFVzZWZ1bCBmb3IgcmVhc29uaW5nIG1vZGVscy5cbiAgICovXG4gIG1heENvbXBsZXRpb25Ub2tlbnM6IHoyLm51bWJlcigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBpbiByZXNwb25zZXMgQVBJLlxuICAgKi9cbiAgc3RvcmU6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogTWV0YWRhdGEgdG8gYXNzb2NpYXRlIHdpdGggdGhlIHJlcXVlc3QuXG4gICAqL1xuICBtZXRhZGF0YTogejIucmVjb3JkKHoyLnN0cmluZygpLm1heCg2NCksIHoyLnN0cmluZygpLm1heCg1MTIpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogUGFyYW1ldGVycyBmb3IgcHJlZGljdGlvbiBtb2RlLlxuICAgKi9cbiAgcHJlZGljdGlvbjogejIucmVjb3JkKHoyLnN0cmluZygpLCB6Mi5hbnkoKSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIHN0cnVjdHVyZWQgb3V0cHV0cy5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgc3RydWN0dXJlZE91dHB1dHM6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogU2VydmljZSB0aWVyIGZvciB0aGUgcmVxdWVzdC5cbiAgICogLSAnYXV0byc6IERlZmF1bHQgc2VydmljZSB0aWVyXG4gICAqIC0gJ2ZsZXgnOiA1MCUgY2hlYXBlciBwcm9jZXNzaW5nIGF0IHRoZSBjb3N0IG9mIGluY3JlYXNlZCBsYXRlbmN5LiBPbmx5IGF2YWlsYWJsZSBmb3IgbzMgYW5kIG80LW1pbmkgbW9kZWxzLlxuICAgKiAtICdwcmlvcml0eSc6IEhpZ2hlci1zcGVlZCBwcm9jZXNzaW5nIHdpdGggcHJlZGljdGFibHkgbG93IGxhdGVuY3kgYXQgcHJlbWl1bSBjb3N0LiBBdmFpbGFibGUgZm9yIEVudGVycHJpc2UgY3VzdG9tZXJzLlxuICAgKlxuICAgKiBAZGVmYXVsdCAnYXV0bydcbiAgICovXG4gIHNlcnZpY2VUaWVyOiB6Mi5lbnVtKFtcImF1dG9cIiwgXCJmbGV4XCIsIFwicHJpb3JpdHlcIl0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHVzZSBzdHJpY3QgSlNPTiBzY2hlbWEgdmFsaWRhdGlvbi5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHN0cmljdEpzb25TY2hlbWE6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogQ29udHJvbHMgdGhlIHZlcmJvc2l0eSBvZiB0aGUgbW9kZWwncyByZXNwb25zZXMuXG4gICAqIExvd2VyIHZhbHVlcyB3aWxsIHJlc3VsdCBpbiBtb3JlIGNvbmNpc2UgcmVzcG9uc2VzLCB3aGlsZSBoaWdoZXIgdmFsdWVzIHdpbGwgcmVzdWx0IGluIG1vcmUgdmVyYm9zZSByZXNwb25zZXMuXG4gICAqL1xuICB0ZXh0VmVyYm9zaXR5OiB6Mi5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBBIGNhY2hlIGtleSBmb3IgcHJvbXB0IGNhY2hpbmcuIEFsbG93cyBtYW51YWwgY29udHJvbCBvdmVyIHByb21wdCBjYWNoaW5nIGJlaGF2aW9yLlxuICAgKiBVc2VmdWwgZm9yIGltcHJvdmluZyBjYWNoZSBoaXQgcmF0ZXMgYW5kIHdvcmtpbmcgYXJvdW5kIGF1dG9tYXRpYyBjYWNoaW5nIGlzc3Vlcy5cbiAgICovXG4gIHByb21wdENhY2hlS2V5OiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogQSBzdGFibGUgaWRlbnRpZmllciB1c2VkIHRvIGhlbHAgZGV0ZWN0IHVzZXJzIG9mIHlvdXIgYXBwbGljYXRpb25cbiAgICogdGhhdCBtYXkgYmUgdmlvbGF0aW5nIE9wZW5BSSdzIHVzYWdlIHBvbGljaWVzLiBUaGUgSURzIHNob3VsZCBiZSBhXG4gICAqIHN0cmluZyB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgZWFjaCB1c2VyLiBXZSByZWNvbW1lbmQgaGFzaGluZyB0aGVpclxuICAgKiB1c2VybmFtZSBvciBlbWFpbCBhZGRyZXNzLCBpbiBvcmRlciB0byBhdm9pZCBzZW5kaW5nIHVzIGFueSBpZGVudGlmeWluZ1xuICAgKiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIHNhZmV0eUlkZW50aWZpZXI6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvY2hhdC9vcGVuYWktY2hhdC1wcmVwYXJlLXRvb2xzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjJcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcblxuLy8gc3JjL3Rvb2wvZmlsZS1zZWFyY2gudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejMgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgY29tcGFyaXNvbkZpbHRlclNjaGVtYSA9IHozLm9iamVjdCh7XG4gIGtleTogejMuc3RyaW5nKCksXG4gIHR5cGU6IHozLmVudW0oW1wiZXFcIiwgXCJuZVwiLCBcImd0XCIsIFwiZ3RlXCIsIFwibHRcIiwgXCJsdGVcIl0pLFxuICB2YWx1ZTogejMudW5pb24oW3ozLnN0cmluZygpLCB6My5udW1iZXIoKSwgejMuYm9vbGVhbigpXSlcbn0pO1xudmFyIGNvbXBvdW5kRmlsdGVyU2NoZW1hID0gejMub2JqZWN0KHtcbiAgdHlwZTogejMuZW51bShbXCJhbmRcIiwgXCJvclwiXSksXG4gIGZpbHRlcnM6IHozLmFycmF5KFxuICAgIHozLnVuaW9uKFtjb21wYXJpc29uRmlsdGVyU2NoZW1hLCB6My5sYXp5KCgpID0+IGNvbXBvdW5kRmlsdGVyU2NoZW1hKV0pXG4gIClcbn0pO1xudmFyIGZpbHRlcnNTY2hlbWEgPSB6My51bmlvbihbY29tcGFyaXNvbkZpbHRlclNjaGVtYSwgY29tcG91bmRGaWx0ZXJTY2hlbWFdKTtcbnZhciBmaWxlU2VhcmNoQXJnc1NjaGVtYSA9IHozLm9iamVjdCh7XG4gIHZlY3RvclN0b3JlSWRzOiB6My5hcnJheSh6My5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgbWF4TnVtUmVzdWx0czogejMubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgcmFua2luZzogejMub2JqZWN0KHtcbiAgICByYW5rZXI6IHozLmVudW0oW1wiYXV0b1wiLCBcImRlZmF1bHQtMjAyNC0wOC0yMVwiXSkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpLFxuICBmaWx0ZXJzOiBmaWx0ZXJzU2NoZW1hLm9wdGlvbmFsKClcbn0pO1xudmFyIGZpbGVTZWFyY2ggPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSh7XG4gIGlkOiBcIm9wZW5haS5maWxlX3NlYXJjaFwiLFxuICBuYW1lOiBcImZpbGVfc2VhcmNoXCIsXG4gIGlucHV0U2NoZW1hOiB6My5vYmplY3Qoe1xuICAgIHF1ZXJ5OiB6My5zdHJpbmcoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3dlYi1zZWFyY2gtcHJldmlldy50c1xuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkyIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejQgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgd2ViU2VhcmNoUHJldmlld0FyZ3NTY2hlbWEgPSB6NC5vYmplY3Qoe1xuICAvKipcbiAgICogU2VhcmNoIGNvbnRleHQgc2l6ZSB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKiAtIGhpZ2g6IE1vc3QgY29tcHJlaGVuc2l2ZSBjb250ZXh0LCBoaWdoZXN0IGNvc3QsIHNsb3dlciByZXNwb25zZVxuICAgKiAtIG1lZGl1bTogQmFsYW5jZWQgY29udGV4dCwgY29zdCwgYW5kIGxhdGVuY3kgKGRlZmF1bHQpXG4gICAqIC0gbG93OiBMZWFzdCBjb250ZXh0LCBsb3dlc3QgY29zdCwgZmFzdGVzdCByZXNwb25zZVxuICAgKi9cbiAgc2VhcmNoQ29udGV4dFNpemU6IHo0LmVudW0oW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFVzZXIgbG9jYXRpb24gaW5mb3JtYXRpb24gdG8gcHJvdmlkZSBnZW9ncmFwaGljYWxseSByZWxldmFudCBzZWFyY2ggcmVzdWx0cy5cbiAgICovXG4gIHVzZXJMb2NhdGlvbjogejQub2JqZWN0KHtcbiAgICAvKipcbiAgICAgKiBUeXBlIG9mIGxvY2F0aW9uIChhbHdheXMgJ2FwcHJveGltYXRlJylcbiAgICAgKi9cbiAgICB0eXBlOiB6NC5saXRlcmFsKFwiYXBwcm94aW1hdGVcIiksXG4gICAgLyoqXG4gICAgICogVHdvLWxldHRlciBJU08gY291bnRyeSBjb2RlIChlLmcuLCAnVVMnLCAnR0InKVxuICAgICAqL1xuICAgIGNvdW50cnk6IHo0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ2l0eSBuYW1lIChmcmVlIHRleHQsIGUuZy4sICdNaW5uZWFwb2xpcycpXG4gICAgICovXG4gICAgY2l0eTogejQuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBSZWdpb24gbmFtZSAoZnJlZSB0ZXh0LCBlLmcuLCAnTWlubmVzb3RhJylcbiAgICAgKi9cbiAgICByZWdpb246IHo0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogSUFOQSB0aW1lem9uZSAoZS5nLiwgJ0FtZXJpY2EvQ2hpY2FnbycpXG4gICAgICovXG4gICAgdGltZXpvbmU6IHo0LnN0cmluZygpLm9wdGlvbmFsKClcbiAgfSkub3B0aW9uYWwoKVxufSk7XG52YXIgd2ViU2VhcmNoUHJldmlldyA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Mih7XG4gIGlkOiBcIm9wZW5haS53ZWJfc2VhcmNoX3ByZXZpZXdcIixcbiAgbmFtZTogXCJ3ZWJfc2VhcmNoX3ByZXZpZXdcIixcbiAgaW5wdXRTY2hlbWE6IHo0Lm9iamVjdCh7XG4gICAgYWN0aW9uOiB6NC5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHo0Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo0LmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICAgIHF1ZXJ5OiB6NC5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgejQub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejQubGl0ZXJhbChcIm9wZW5fcGFnZVwiKSxcbiAgICAgICAgdXJsOiB6NC5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NC5saXRlcmFsKFwiZmluZFwiKSxcbiAgICAgICAgdXJsOiB6NC5zdHJpbmcoKSxcbiAgICAgICAgcGF0dGVybjogejQuc3RyaW5nKClcbiAgICAgIH0pXG4gICAgXSkubnVsbGlzaCgpXG4gIH0pXG59KTtcblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtcHJlcGFyZS10b29scy50c1xuZnVuY3Rpb24gcHJlcGFyZUNoYXRUb29scyh7XG4gIHRvb2xzLFxuICB0b29sQ2hvaWNlLFxuICBzdHJ1Y3R1cmVkT3V0cHV0cyxcbiAgc3RyaWN0SnNvblNjaGVtYVxufSkge1xuICB0b29scyA9ICh0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMubGVuZ3RoKSA/IHRvb2xzIDogdm9pZCAwO1xuICBjb25zdCB0b29sV2FybmluZ3MgPSBbXTtcbiAgaWYgKHRvb2xzID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogdm9pZCAwLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IG9wZW5haVRvb2xzMiA9IFtdO1xuICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMpIHtcbiAgICBzd2l0Y2ggKHRvb2wudHlwZSkge1xuICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgICAgIHN0cmljdDogc3RydWN0dXJlZE91dHB1dHMgPyBzdHJpY3RKc29uU2NoZW1hIDogdm9pZCAwXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJvdmlkZXItZGVmaW5lZFwiOlxuICAgICAgICBzd2l0Y2ggKHRvb2wuaWQpIHtcbiAgICAgICAgICBjYXNlIFwib3BlbmFpLmZpbGVfc2VhcmNoXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBmaWxlU2VhcmNoQXJnc1NjaGVtYS5wYXJzZSh0b29sLmFyZ3MpO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImZpbGVfc2VhcmNoXCIsXG4gICAgICAgICAgICAgIHZlY3Rvcl9zdG9yZV9pZHM6IGFyZ3MudmVjdG9yU3RvcmVJZHMsXG4gICAgICAgICAgICAgIG1heF9udW1fcmVzdWx0czogYXJncy5tYXhOdW1SZXN1bHRzLFxuICAgICAgICAgICAgICByYW5raW5nX29wdGlvbnM6IGFyZ3MucmFua2luZyA/IHsgcmFua2VyOiBhcmdzLnJhbmtpbmcucmFua2VyIH0gOiB2b2lkIDAsXG4gICAgICAgICAgICAgIGZpbHRlcnM6IGFyZ3MuZmlsdGVyc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS53ZWJfc2VhcmNoX3ByZXZpZXdcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHdlYlNlYXJjaFByZXZpZXdBcmdzU2NoZW1hLnBhcnNlKHRvb2wuYXJncyk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwid2ViX3NlYXJjaF9wcmV2aWV3XCIsXG4gICAgICAgICAgICAgIHNlYXJjaF9jb250ZXh0X3NpemU6IGFyZ3Muc2VhcmNoQ29udGV4dFNpemUsXG4gICAgICAgICAgICAgIHVzZXJfbG9jYXRpb246IGFyZ3MudXNlckxvY2F0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdG9vbFdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXRvb2xcIiwgdG9vbCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdG9vbFdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXRvb2xcIiwgdG9vbCB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICh0b29sQ2hvaWNlID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogb3BlbmFpVG9vbHMyLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IHR5cGUgPSB0b29sQ2hvaWNlLnR5cGU7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJhdXRvXCI6XG4gICAgY2FzZSBcIm5vbmVcIjpcbiAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgIHJldHVybiB7IHRvb2xzOiBvcGVuYWlUb29sczIsIHRvb2xDaG9pY2U6IHR5cGUsIHRvb2xXYXJuaW5ncyB9O1xuICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b29sczogb3BlbmFpVG9vbHMyLFxuICAgICAgICB0b29sQ2hvaWNlOiB7XG4gICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b29sV2FybmluZ3NcbiAgICAgIH07XG4gICAgZGVmYXVsdDoge1xuICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHR5cGU7XG4gICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgICAgZnVuY3Rpb25hbGl0eTogYHRvb2wgY2hvaWNlIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciBPcGVuQUlDaGF0TGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgICB0aGlzLnN1cHBvcnRlZFVybHMgPSB7XG4gICAgICBcImltYWdlLypcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgcHJvbXB0LFxuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICBzZWVkLFxuICAgIHRvb2xzLFxuICAgIHRvb2xDaG9pY2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0gKF9hID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5haVByb3ZpZGVyT3B0aW9uc1xuICAgIH0pKSAhPSBudWxsID8gX2EgOiB7fTtcbiAgICBjb25zdCBzdHJ1Y3R1cmVkT3V0cHV0cyA9IChfYiA9IG9wZW5haU9wdGlvbnMuc3RydWN0dXJlZE91dHB1dHMpICE9IG51bGwgPyBfYiA6IHRydWU7XG4gICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInRvcEtcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICgocmVzcG9uc2VGb3JtYXQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlRm9ybWF0LnR5cGUpID09PSBcImpzb25cIiAmJiByZXNwb25zZUZvcm1hdC5zY2hlbWEgIT0gbnVsbCAmJiAhc3RydWN0dXJlZE91dHB1dHMpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJyZXNwb25zZUZvcm1hdFwiLFxuICAgICAgICBkZXRhaWxzOiBcIkpTT04gcmVzcG9uc2UgZm9ybWF0IHNjaGVtYSBpcyBvbmx5IHN1cHBvcnRlZCB3aXRoIHN0cnVjdHVyZWRPdXRwdXRzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IG1lc3NhZ2VzLCB3YXJuaW5nczogbWVzc2FnZVdhcm5pbmdzIH0gPSBjb252ZXJ0VG9PcGVuQUlDaGF0TWVzc2FnZXMoXG4gICAgICB7XG4gICAgICAgIHByb21wdCxcbiAgICAgICAgc3lzdGVtTWVzc2FnZU1vZGU6IGdldFN5c3RlbU1lc3NhZ2VNb2RlKHRoaXMubW9kZWxJZClcbiAgICAgIH1cbiAgICApO1xuICAgIHdhcm5pbmdzLnB1c2goLi4ubWVzc2FnZVdhcm5pbmdzKTtcbiAgICBjb25zdCBzdHJpY3RKc29uU2NoZW1hID0gKF9jID0gb3BlbmFpT3B0aW9ucy5zdHJpY3RKc29uU2NoZW1hKSAhPSBudWxsID8gX2MgOiBmYWxzZTtcbiAgICBjb25zdCBiYXNlQXJncyA9IHtcbiAgICAgIC8vIG1vZGVsIGlkOlxuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIC8vIG1vZGVsIHNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgbG9naXRfYmlhczogb3BlbmFpT3B0aW9ucy5sb2dpdEJpYXMsXG4gICAgICBsb2dwcm9iczogb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA9PT0gXCJudW1iZXJcIiA/IHRydWUgOiB2b2lkIDAsXG4gICAgICB0b3BfbG9ncHJvYnM6IHR5cGVvZiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID09PSBcIm51bWJlclwiID8gb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA6IHR5cGVvZiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID09PSBcImJvb2xlYW5cIiA/IG9wZW5haU9wdGlvbnMubG9ncHJvYnMgPyAwIDogdm9pZCAwIDogdm9pZCAwLFxuICAgICAgdXNlcjogb3BlbmFpT3B0aW9ucy51c2VyLFxuICAgICAgcGFyYWxsZWxfdG9vbF9jYWxsczogb3BlbmFpT3B0aW9ucy5wYXJhbGxlbFRvb2xDYWxscyxcbiAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgIG1heF90b2tlbnM6IG1heE91dHB1dFRva2VucyxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICBmcmVxdWVuY3lfcGVuYWx0eTogZnJlcXVlbmN5UGVuYWx0eSxcbiAgICAgIHByZXNlbmNlX3BlbmFsdHk6IHByZXNlbmNlUGVuYWx0eSxcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogKHJlc3BvbnNlRm9ybWF0ID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zZUZvcm1hdC50eXBlKSA9PT0gXCJqc29uXCIgPyBzdHJ1Y3R1cmVkT3V0cHV0cyAmJiByZXNwb25zZUZvcm1hdC5zY2hlbWEgIT0gbnVsbCA/IHtcbiAgICAgICAgdHlwZTogXCJqc29uX3NjaGVtYVwiLFxuICAgICAgICBqc29uX3NjaGVtYToge1xuICAgICAgICAgIHNjaGVtYTogcmVzcG9uc2VGb3JtYXQuc2NoZW1hLFxuICAgICAgICAgIHN0cmljdDogc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgICBuYW1lOiAoX2QgPSByZXNwb25zZUZvcm1hdC5uYW1lKSAhPSBudWxsID8gX2QgOiBcInJlc3BvbnNlXCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHJlc3BvbnNlRm9ybWF0LmRlc2NyaXB0aW9uXG4gICAgICAgIH1cbiAgICAgIH0gOiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9IDogdm9pZCAwLFxuICAgICAgc3RvcDogc3RvcFNlcXVlbmNlcyxcbiAgICAgIHNlZWQsXG4gICAgICB2ZXJib3NpdHk6IG9wZW5haU9wdGlvbnMudGV4dFZlcmJvc2l0eSxcbiAgICAgIC8vIG9wZW5haSBzcGVjaWZpYyBzZXR0aW5nczpcbiAgICAgIC8vIFRPRE8gQUkgU0RLIDY6IHJlbW92ZSwgd2UgYXV0by1tYXAgbWF4T3V0cHV0VG9rZW5zIG5vd1xuICAgICAgbWF4X2NvbXBsZXRpb25fdG9rZW5zOiBvcGVuYWlPcHRpb25zLm1heENvbXBsZXRpb25Ub2tlbnMsXG4gICAgICBzdG9yZTogb3BlbmFpT3B0aW9ucy5zdG9yZSxcbiAgICAgIG1ldGFkYXRhOiBvcGVuYWlPcHRpb25zLm1ldGFkYXRhLFxuICAgICAgcHJlZGljdGlvbjogb3BlbmFpT3B0aW9ucy5wcmVkaWN0aW9uLFxuICAgICAgcmVhc29uaW5nX2VmZm9ydDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdFZmZvcnQsXG4gICAgICBzZXJ2aWNlX3RpZXI6IG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIsXG4gICAgICBwcm9tcHRfY2FjaGVfa2V5OiBvcGVuYWlPcHRpb25zLnByb21wdENhY2hlS2V5LFxuICAgICAgc2FmZXR5X2lkZW50aWZpZXI6IG9wZW5haU9wdGlvbnMuc2FmZXR5SWRlbnRpZmllcixcbiAgICAgIC8vIG1lc3NhZ2VzOlxuICAgICAgbWVzc2FnZXNcbiAgICB9O1xuICAgIGlmIChpc1JlYXNvbmluZ01vZGVsKHRoaXMubW9kZWxJZCkpIHtcbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MudG9wX3AgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50b3BfcCA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJ0b3BQXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0b3BQIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5mcmVxdWVuY3lfcGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLmZyZXF1ZW5jeV9wZW5hbHR5ID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcImZyZXF1ZW5jeVBlbmFsdHlcIixcbiAgICAgICAgICBkZXRhaWxzOiBcImZyZXF1ZW5jeVBlbmFsdHkgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLnByZXNlbmNlX3BlbmFsdHkgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy5wcmVzZW5jZV9wZW5hbHR5ID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInByZXNlbmNlUGVuYWx0eVwiLFxuICAgICAgICAgIGRldGFpbHM6IFwicHJlc2VuY2VQZW5hbHR5IGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5sb2dpdF9iaWFzICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MubG9naXRfYmlhcyA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwibG9naXRCaWFzIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5sb2dwcm9icyAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLmxvZ3Byb2JzID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJsb2dwcm9icyBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MudG9wX2xvZ3Byb2JzICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MudG9wX2xvZ3Byb2JzID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJ0b3BMb2dwcm9icyBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MubWF4X3Rva2VucyAhPSBudWxsKSB7XG4gICAgICAgIGlmIChiYXNlQXJncy5tYXhfY29tcGxldGlvbl90b2tlbnMgPT0gbnVsbCkge1xuICAgICAgICAgIGJhc2VBcmdzLm1heF9jb21wbGV0aW9uX3Rva2VucyA9IGJhc2VBcmdzLm1heF90b2tlbnM7XG4gICAgICAgIH1cbiAgICAgICAgYmFzZUFyZ3MubWF4X3Rva2VucyA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMubW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTRvLXNlYXJjaC1wcmV2aWV3XCIpIHx8IHRoaXMubW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTRvLW1pbmktc2VhcmNoLXByZXZpZXdcIikpIHtcbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgc2VhcmNoIHByZXZpZXcgbW9kZWxzIGFuZCBoYXMgYmVlbiByZW1vdmVkLlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllciA9PT0gXCJmbGV4XCIgJiYgIXN1cHBvcnRzRmxleFByb2Nlc3NpbmcodGhpcy5tb2RlbElkKSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwiZmxleCBwcm9jZXNzaW5nIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBvMywgbzQtbWluaSwgYW5kIGdwdC01IG1vZGVsc1wiXG4gICAgICB9KTtcbiAgICAgIGJhc2VBcmdzLnNlcnZpY2VfdGllciA9IHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIgPT09IFwicHJpb3JpdHlcIiAmJiAhc3VwcG9ydHNQcmlvcml0eVByb2Nlc3NpbmcodGhpcy5tb2RlbElkKSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwicHJpb3JpdHkgcHJvY2Vzc2luZyBpcyBvbmx5IGF2YWlsYWJsZSBmb3Igc3VwcG9ydGVkIG1vZGVscyAoZ3B0LTQsIGdwdC01LCBncHQtNS1taW5pLCBvMywgbzQtbWluaSkgYW5kIHJlcXVpcmVzIEVudGVycHJpc2UgYWNjZXNzLiBncHQtNS1uYW5vIGlzIG5vdCBzdXBwb3J0ZWRcIlxuICAgICAgfSk7XG4gICAgICBiYXNlQXJncy5zZXJ2aWNlX3RpZXIgPSB2b2lkIDA7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICB0b29sQ2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlLFxuICAgICAgdG9vbFdhcm5pbmdzXG4gICAgfSA9IHByZXBhcmVDaGF0VG9vbHMoe1xuICAgICAgdG9vbHMsXG4gICAgICB0b29sQ2hvaWNlLFxuICAgICAgc3RydWN0dXJlZE91dHB1dHMsXG4gICAgICBzdHJpY3RKc29uU2NoZW1hXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLi4uYmFzZUFyZ3MsXG4gICAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICAgIHRvb2xfY2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3M6IFsuLi53YXJuaW5ncywgLi4udG9vbFdhcm5pbmdzXVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaywgX2wsIF9tLCBfbjtcbiAgICBjb25zdCB7IGFyZ3M6IGJvZHksIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9jaGF0L2NvbXBsZXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVycyh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBvcGVuYWlDaGF0UmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IGNob2ljZSA9IHJlc3BvbnNlLmNob2ljZXNbMF07XG4gICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgIGNvbnN0IHRleHQgPSBjaG9pY2UubWVzc2FnZS5jb250ZW50O1xuICAgIGlmICh0ZXh0ICE9IG51bGwgJiYgdGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZW50LnB1c2goeyB0eXBlOiBcInRleHRcIiwgdGV4dCB9KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiAoX2EgPSBjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKSAhPSBudWxsID8gX2EgOiBbXSkge1xuICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgdG9vbENhbGxJZDogKF9iID0gdG9vbENhbGwuaWQpICE9IG51bGwgPyBfYiA6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgIGlucHV0OiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFubm90YXRpb24gb2YgKF9jID0gY2hvaWNlLm1lc3NhZ2UuYW5ub3RhdGlvbnMpICE9IG51bGwgPyBfYyA6IFtdKSB7XG4gICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICB1cmw6IGFubm90YXRpb24udXJsLFxuICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi50aXRsZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMgPSAoX2QgPSByZXNwb25zZS51c2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM7XG4gICAgY29uc3QgcHJvbXB0VG9rZW5EZXRhaWxzID0gKF9lID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfZS5wcm9tcHRfdG9rZW5zX2RldGFpbHM7XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHsgb3BlbmFpOiB7fSB9O1xuICAgIGlmICgoY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuYWNjZXB0ZWRQcmVkaWN0aW9uVG9rZW5zID0gY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICB9XG4gICAgaWYgKChjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5yZWplY3RlZFByZWRpY3Rpb25Ub2tlbnMgPSBjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgIH1cbiAgICBpZiAoKChfZiA9IGNob2ljZS5sb2dwcm9icykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNvbnRlbnQpICE9IG51bGwpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmxvZ3Byb2JzID0gY2hvaWNlLmxvZ3Byb2JzLmNvbnRlbnQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50LFxuICAgICAgZmluaXNoUmVhc29uOiBtYXBPcGVuQUlGaW5pc2hSZWFzb24oY2hvaWNlLmZpbmlzaF9yZWFzb24pLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IChfaCA9IChfZyA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2cucHJvbXB0X3Rva2VucykgIT0gbnVsbCA/IF9oIDogdm9pZCAwLFxuICAgICAgICBvdXRwdXRUb2tlbnM6IChfaiA9IChfaSA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2kuY29tcGxldGlvbl90b2tlbnMpICE9IG51bGwgPyBfaiA6IHZvaWQgMCxcbiAgICAgICAgdG90YWxUb2tlbnM6IChfbCA9IChfayA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2sudG90YWxfdG9rZW5zKSAhPSBudWxsID8gX2wgOiB2b2lkIDAsXG4gICAgICAgIHJlYXNvbmluZ1Rva2VuczogKF9tID0gY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX20gOiB2b2lkIDAsXG4gICAgICAgIGNhY2hlZElucHV0VG9rZW5zOiAoX24gPSBwcm9tcHRUb2tlbkRldGFpbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb21wdFRva2VuRGV0YWlscy5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX24gOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEocmVzcG9uc2UpLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3MsXG4gICAgICBwcm92aWRlck1ldGFkYXRhXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb1N0cmVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAuLi5hcmdzLFxuICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgc3RyZWFtX29wdGlvbnM6IHtcbiAgICAgICAgaW5jbHVkZV91c2FnZTogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NoYXQvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzKHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBvcGVuYWlDaGF0Q2h1bmtTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgIGxldCBmaW5pc2hSZWFzb24gPSBcInVua25vd25cIjtcbiAgICBjb25zdCB1c2FnZSA9IHtcbiAgICAgIGlucHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICBvdXRwdXRUb2tlbnM6IHZvaWQgMCxcbiAgICAgIHRvdGFsVG9rZW5zOiB2b2lkIDBcbiAgICB9O1xuICAgIGxldCBpc0ZpcnN0Q2h1bmsgPSB0cnVlO1xuICAgIGxldCBpc0FjdGl2ZVRleHQgPSBmYWxzZTtcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmVhbTogcmVzcG9uc2UucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwic3RyZWFtLXN0YXJ0XCIsIHdhcm5pbmdzIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93LCBfeDtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogY2h1bmsuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2h1bmsudmFsdWU7XG4gICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0ZpcnN0Q2h1bmspIHtcbiAgICAgICAgICAgICAgaXNGaXJzdENodW5rID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEodmFsdWUpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLnVzYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSAoX2EgPSB2YWx1ZS51c2FnZS5wcm9tcHRfdG9rZW5zKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLm91dHB1dFRva2VucyA9IChfYiA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLnRvdGFsVG9rZW5zID0gKF9jID0gdmFsdWUudXNhZ2UudG90YWxfdG9rZW5zKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLnJlYXNvbmluZ1Rva2VucyA9IChfZSA9IChfZCA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfZC5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX2UgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLmNhY2hlZElucHV0VG9rZW5zID0gKF9nID0gKF9mID0gdmFsdWUudXNhZ2UucHJvbXB0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY2FjaGVkX3Rva2VucykgIT0gbnVsbCA/IF9nIDogdm9pZCAwO1xuICAgICAgICAgICAgICBpZiAoKChfaCA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfaC5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmFjY2VwdGVkUHJlZGljdGlvblRva2VucyA9IChfaSA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfaS5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoKChfaiA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfai5yZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLnJlamVjdGVkUHJlZGljdGlvblRva2VucyA9IChfayA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfay5yZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gdmFsdWUuY2hvaWNlc1swXTtcbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZmluaXNoX3JlYXNvbikgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBtYXBPcGVuQUlGaW5pc2hSZWFzb24oY2hvaWNlLmZpbmlzaF9yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgoX2wgPSBjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5sb2dwcm9icykgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLmNvbnRlbnQpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnMuY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZGVsdGEpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBjaG9pY2UuZGVsdGE7XG4gICAgICAgICAgICBpZiAoZGVsdGEuY29udGVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmICghaXNBY3RpdmVUZXh0KSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJ0ZXh0LXN0YXJ0XCIsIGlkOiBcIjBcIiB9KTtcbiAgICAgICAgICAgICAgICBpc0FjdGl2ZVRleHQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGRlbHRhOiBkZWx0YS5jb250ZW50XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbHRhLnRvb2xfY2FsbHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2xDYWxsRGVsdGEgb2YgZGVsdGEudG9vbF9jYWxscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdG9vbENhbGxEZWx0YS5pbmRleDtcbiAgICAgICAgICAgICAgICBpZiAodG9vbENhbGxzW2luZGV4XSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodG9vbENhbGxEZWx0YS50eXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZURhdGFFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogdG9vbENhbGxEZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXhwZWN0ZWQgJ2Z1bmN0aW9uJyB0eXBlLmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAodG9vbENhbGxEZWx0YS5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVzcG9uc2VEYXRhRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvb2xDYWxsRGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEV4cGVjdGVkICdpZCcgdG8gYmUgYSBzdHJpbmcuYFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmICgoKF9tID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9tLm5hbWUpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZURhdGFFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogdG9vbENhbGxEZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXhwZWN0ZWQgJ2Z1bmN0aW9uLm5hbWUnIHRvIGJlIGEgc3RyaW5nLmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsRGVsdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdG9vbENhbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsRGVsdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiAoX24gPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLmFyZ3VtZW50cykgIT0gbnVsbCA/IF9uIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoYXNGaW5pc2hlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbDIgPSB0b29sQ2FsbHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgaWYgKCgoX28gPSB0b29sQ2FsbDIuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfby5uYW1lKSAhPSBudWxsICYmICgoX3AgPSB0b29sQ2FsbDIuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfcC5hcmd1bWVudHMpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsMi5mdW5jdGlvbi5hcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbDIuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogdG9vbENhbGwyLmZ1bmN0aW9uLmFyZ3VtZW50c1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1BhcnNhYmxlSnNvbih0b29sQ2FsbDIuZnVuY3Rpb24uYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwyLmlkXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiAoX3EgPSB0b29sQ2FsbDIuaWQpICE9IG51bGwgPyBfcSA6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbDIuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0b29sQ2FsbDIuZnVuY3Rpb24uYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwyLmhhc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gdG9vbENhbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbENhbGwuaGFzRmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKChfciA9IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfci5hcmd1bWVudHMpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyArPSAoX3QgPSAoX3MgPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX3MuYXJndW1lbnRzKSAhPSBudWxsID8gX3QgOiBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgICBkZWx0YTogKF91ID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbi5hcmd1bWVudHMpICE9IG51bGwgPyBfdSA6IFwiXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoKChfdiA9IHRvb2xDYWxsLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX3YubmFtZSkgIT0gbnVsbCAmJiAoKF93ID0gdG9vbENhbGwuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfdy5hcmd1bWVudHMpICE9IG51bGwgJiYgaXNQYXJzYWJsZUpzb24odG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogKF94ID0gdG9vbENhbGwuaWQpICE9IG51bGwgPyBfeCA6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHNcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdG9vbENhbGwuaGFzRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbHRhLmFubm90YXRpb25zICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGRlbHRhLmFubm90YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICAgIHVybDogYW5ub3RhdGlvbi51cmwsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi50aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBpZiAoaXNBY3RpdmVUZXh0KSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1lbmRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaW5pc2hcIixcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uLFxuICAgICAgICAgICAgICB1c2FnZSxcbiAgICAgICAgICAgICAgLi4ucHJvdmlkZXJNZXRhZGF0YSAhPSBudWxsID8geyBwcm92aWRlck1ldGFkYXRhIH0gOiB7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHJlcXVlc3Q6IHsgYm9keSB9LFxuICAgICAgcmVzcG9uc2U6IHsgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzIH1cbiAgICB9O1xuICB9XG59O1xudmFyIG9wZW5haVRva2VuVXNhZ2VTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICBwcm9tcHRfdG9rZW5zOiB6NS5udW1iZXIoKS5udWxsaXNoKCksXG4gIGNvbXBsZXRpb25fdG9rZW5zOiB6NS5udW1iZXIoKS5udWxsaXNoKCksXG4gIHRvdGFsX3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpLFxuICBwcm9tcHRfdG9rZW5zX2RldGFpbHM6IHo1Lm9iamVjdCh7XG4gICAgY2FjaGVkX3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpXG4gIH0pLm51bGxpc2goKSxcbiAgY29tcGxldGlvbl90b2tlbnNfZGV0YWlsczogejUub2JqZWN0KHtcbiAgICByZWFzb25pbmdfdG9rZW5zOiB6NS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgYWNjZXB0ZWRfcHJlZGljdGlvbl90b2tlbnM6IHo1Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICByZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpXG4gIH0pLm51bGxpc2goKVxufSkubnVsbGlzaCgpO1xudmFyIG9wZW5haUNoYXRSZXNwb25zZVNjaGVtYSA9IHo1Lm9iamVjdCh7XG4gIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNyZWF0ZWQ6IHo1Lm51bWJlcigpLm51bGxpc2goKSxcbiAgbW9kZWw6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgY2hvaWNlczogejUuYXJyYXkoXG4gICAgejUub2JqZWN0KHtcbiAgICAgIG1lc3NhZ2U6IHo1Lm9iamVjdCh7XG4gICAgICAgIHJvbGU6IHo1LmxpdGVyYWwoXCJhc3Npc3RhbnRcIikubnVsbGlzaCgpLFxuICAgICAgICBjb250ZW50OiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIHRvb2xfY2FsbHM6IHo1LmFycmF5KFxuICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICBpZDogejUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImZ1bmN0aW9uXCIpLFxuICAgICAgICAgICAgZnVuY3Rpb246IHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgIG5hbWU6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgICBhcmd1bWVudHM6IHo1LnN0cmluZygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgICkubnVsbGlzaCgpLFxuICAgICAgICBhbm5vdGF0aW9uczogejUuYXJyYXkoXG4gICAgICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICBzdGFydF9pbmRleDogejUubnVtYmVyKCksXG4gICAgICAgICAgICBlbmRfaW5kZXg6IHo1Lm51bWJlcigpLFxuICAgICAgICAgICAgdXJsOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHRpdGxlOiB6NS5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgICkubnVsbGlzaCgpXG4gICAgICB9KSxcbiAgICAgIGluZGV4OiB6NS5udW1iZXIoKSxcbiAgICAgIGxvZ3Byb2JzOiB6NS5vYmplY3Qoe1xuICAgICAgICBjb250ZW50OiB6NS5hcnJheShcbiAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgdG9rZW46IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgbG9ncHJvYjogejUubnVtYmVyKCksXG4gICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHo1LmFycmF5KFxuICAgICAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHRva2VuOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBsb2dwcm9iOiB6NS5udW1iZXIoKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgICkubnVsbGlzaCgpXG4gICAgICB9KS5udWxsaXNoKCksXG4gICAgICBmaW5pc2hfcmVhc29uOiB6NS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICB9KVxuICApLFxuICB1c2FnZTogb3BlbmFpVG9rZW5Vc2FnZVNjaGVtYVxufSk7XG52YXIgb3BlbmFpQ2hhdENodW5rU2NoZW1hID0gejUudW5pb24oW1xuICB6NS5vYmplY3Qoe1xuICAgIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY3JlYXRlZDogejUubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgIG1vZGVsOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY2hvaWNlczogejUuYXJyYXkoXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICBkZWx0YTogejUub2JqZWN0KHtcbiAgICAgICAgICByb2xlOiB6NS5lbnVtKFtcImFzc2lzdGFudFwiXSkubnVsbGlzaCgpLFxuICAgICAgICAgIGNvbnRlbnQ6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICB0b29sX2NhbGxzOiB6NS5hcnJheShcbiAgICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgIGluZGV4OiB6NS5udW1iZXIoKSxcbiAgICAgICAgICAgICAgaWQ6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImZ1bmN0aW9uXCIpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgZnVuY3Rpb246IHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgbmFtZTogejUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogejUuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICkubnVsbGlzaCgpLFxuICAgICAgICAgIGFubm90YXRpb25zOiB6NS5hcnJheShcbiAgICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICAgICAgICAgICAgZW5kX2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICAgICAgICAgICAgdXJsOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGl0bGU6IHo1LnN0cmluZygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICkubnVsbGlzaCgpXG4gICAgICAgIH0pLm51bGxpc2goKSxcbiAgICAgICAgbG9ncHJvYnM6IHo1Lm9iamVjdCh7XG4gICAgICAgICAgY29udGVudDogejUuYXJyYXkoXG4gICAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgICB0b2tlbjogejUuc3RyaW5nKCksXG4gICAgICAgICAgICAgIGxvZ3Byb2I6IHo1Lm51bWJlcigpLFxuICAgICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHo1LmFycmF5KFxuICAgICAgICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICB0b2tlbjogejUuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICBsb2dwcm9iOiB6NS5udW1iZXIoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKS5udWxsaXNoKClcbiAgICAgICAgfSkubnVsbGlzaCgpLFxuICAgICAgICBmaW5pc2hfcmVhc29uOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIGluZGV4OiB6NS5udW1iZXIoKVxuICAgICAgfSlcbiAgICApLFxuICAgIHVzYWdlOiBvcGVuYWlUb2tlblVzYWdlU2NoZW1hXG4gIH0pLFxuICBvcGVuYWlFcnJvckRhdGFTY2hlbWFcbl0pO1xuZnVuY3Rpb24gaXNSZWFzb25pbmdNb2RlbChtb2RlbElkKSB7XG4gIHJldHVybiAobW9kZWxJZC5zdGFydHNXaXRoKFwib1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSkgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIik7XG59XG5mdW5jdGlvbiBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nKG1vZGVsSWQpIHtcbiAgcmV0dXJuIG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIik7XG59XG5mdW5jdGlvbiBzdXBwb3J0c1ByaW9yaXR5UHJvY2Vzc2luZyhtb2RlbElkKSB7XG4gIHJldHVybiBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNFwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1taW5pXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01XCIpICYmICFtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1uYW5vXCIpICYmICFtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1jaGF0XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIik7XG59XG5mdW5jdGlvbiBnZXRTeXN0ZW1NZXNzYWdlTW9kZShtb2RlbElkKSB7XG4gIHZhciBfYSwgX2I7XG4gIGlmICghaXNSZWFzb25pbmdNb2RlbChtb2RlbElkKSkge1xuICAgIHJldHVybiBcInN5c3RlbVwiO1xuICB9XG4gIHJldHVybiAoX2IgPSAoX2EgPSByZWFzb25pbmdNb2RlbHNbbW9kZWxJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5zeXN0ZW1NZXNzYWdlTW9kZSkgIT0gbnVsbCA/IF9iIDogXCJkZXZlbG9wZXJcIjtcbn1cbnZhciByZWFzb25pbmdNb2RlbHMgPSB7XG4gIFwibzEtbWluaVwiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgfSxcbiAgXCJvMS1taW5pLTIwMjQtMDktMTJcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcInJlbW92ZVwiXG4gIH0sXG4gIFwibzEtcHJldmlld1wiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgfSxcbiAgXCJvMS1wcmV2aWV3LTIwMjQtMDktMTJcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcInJlbW92ZVwiXG4gIH0sXG4gIG8zOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwiZGV2ZWxvcGVyXCJcbiAgfSxcbiAgXCJvMy0yMDI1LTA0LTE2XCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9LFxuICBcIm8zLW1pbmlcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH0sXG4gIFwibzMtbWluaS0yMDI1LTAxLTMxXCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9LFxuICBcIm80LW1pbmlcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH0sXG4gIFwibzQtbWluaS0yMDI1LTA0LTE2XCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9XG59O1xuXG4vLyBzcmMvY29tcGxldGlvbi9vcGVuYWktY29tcGxldGlvbi1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnMyLFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcjIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zMixcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NyB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL2NvbXBsZXRpb24vY29udmVydC10by1vcGVuYWktY29tcGxldGlvbi1wcm9tcHQudHNcbmltcG9ydCB7XG4gIEludmFsaWRQcm9tcHRFcnJvcixcbiAgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IgYXMgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IzXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5mdW5jdGlvbiBjb252ZXJ0VG9PcGVuQUlDb21wbGV0aW9uUHJvbXB0KHtcbiAgcHJvbXB0LFxuICB1c2VyID0gXCJ1c2VyXCIsXG4gIGFzc2lzdGFudCA9IFwiYXNzaXN0YW50XCJcbn0pIHtcbiAgbGV0IHRleHQgPSBcIlwiO1xuICBpZiAocHJvbXB0WzBdLnJvbGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICB0ZXh0ICs9IGAke3Byb21wdFswXS5jb250ZW50fVxuXG5gO1xuICAgIHByb21wdCA9IHByb21wdC5zbGljZSgxKTtcbiAgfVxuICBmb3IgKGNvbnN0IHsgcm9sZSwgY29udGVudCB9IG9mIHByb21wdCkge1xuICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUHJvbXB0RXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCBzeXN0ZW0gbWVzc2FnZSBpbiBwcm9tcHQ6ICR7Y29udGVudH1cIixcbiAgICAgICAgICBwcm9tcHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwidXNlclwiOiB7XG4gICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gY29udGVudC5tYXAoKHBhcnQpID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICByZXR1cm4gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcIik7XG4gICAgICAgIHRleHQgKz0gYCR7dXNlcn06XG4ke3VzZXJNZXNzYWdlfVxuXG5gO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjoge1xuICAgICAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlID0gY29udGVudC5tYXAoKHBhcnQpID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICByZXR1cm4gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOiB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjMoe1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwidG9vbC1jYWxsIG1lc3NhZ2VzXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgICB0ZXh0ICs9IGAke2Fzc2lzdGFudH06XG4ke2Fzc2lzdGFudE1lc3NhZ2V9XG5cbmA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInRvb2xcIjoge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IzKHtcbiAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcInRvb2wgbWVzc2FnZXNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHJvbGU7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcm9sZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB0ZXh0ICs9IGAke2Fzc2lzdGFudH06XG5gO1xuICByZXR1cm4ge1xuICAgIHByb21wdDogdGV4dCxcbiAgICBzdG9wU2VxdWVuY2VzOiBbYFxuJHt1c2VyfTpgXVxuICB9O1xufVxuXG4vLyBzcmMvY29tcGxldGlvbi9nZXQtcmVzcG9uc2UtbWV0YWRhdGEudHNcbmZ1bmN0aW9uIGdldFJlc3BvbnNlTWV0YWRhdGEyKHtcbiAgaWQsXG4gIG1vZGVsLFxuICBjcmVhdGVkXG59KSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGlkICE9IG51bGwgPyBpZCA6IHZvaWQgMCxcbiAgICBtb2RlbElkOiBtb2RlbCAhPSBudWxsID8gbW9kZWwgOiB2b2lkIDAsXG4gICAgdGltZXN0YW1wOiBjcmVhdGVkICE9IG51bGwgPyBuZXcgRGF0ZShjcmVhdGVkICogMWUzKSA6IHZvaWQgMFxuICB9O1xufVxuXG4vLyBzcmMvY29tcGxldGlvbi9tYXAtb3BlbmFpLWZpbmlzaC1yZWFzb24udHNcbmZ1bmN0aW9uIG1hcE9wZW5BSUZpbmlzaFJlYXNvbjIoZmluaXNoUmVhc29uKSB7XG4gIHN3aXRjaCAoZmluaXNoUmVhc29uKSB7XG4gICAgY2FzZSBcInN0b3BcIjpcbiAgICAgIHJldHVybiBcInN0b3BcIjtcbiAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBjYXNlIFwiY29udGVudF9maWx0ZXJcIjpcbiAgICAgIHJldHVybiBcImNvbnRlbnQtZmlsdGVyXCI7XG4gICAgY2FzZSBcImZ1bmN0aW9uX2NhbGxcIjpcbiAgICBjYXNlIFwidG9vbF9jYWxsc1wiOlxuICAgICAgcmV0dXJuIFwidG9vbC1jYWxsc1wiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJ1bmtub3duXCI7XG4gIH1cbn1cblxuLy8gc3JjL2NvbXBsZXRpb24vb3BlbmFpLWNvbXBsZXRpb24tb3B0aW9ucy50c1xuaW1wb3J0IHsgeiBhcyB6NiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zID0gejYub2JqZWN0KHtcbiAgLyoqXG4gIEVjaG8gYmFjayB0aGUgcHJvbXB0IGluIGFkZGl0aW9uIHRvIHRoZSBjb21wbGV0aW9uLlxuICAgICAqL1xuICBlY2hvOiB6Ni5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgXG4gIEFjY2VwdHMgYSBKU09OIG9iamVjdCB0aGF0IG1hcHMgdG9rZW5zIChzcGVjaWZpZWQgYnkgdGhlaXIgdG9rZW4gSUQgaW5cbiAgdGhlIEdQVCB0b2tlbml6ZXIpIHRvIGFuIGFzc29jaWF0ZWQgYmlhcyB2YWx1ZSBmcm9tIC0xMDAgdG8gMTAwLiBZb3VcbiAgY2FuIHVzZSB0aGlzIHRva2VuaXplciB0b29sIHRvIGNvbnZlcnQgdGV4dCB0byB0b2tlbiBJRHMuIE1hdGhlbWF0aWNhbGx5LFxuICB0aGUgYmlhcyBpcyBhZGRlZCB0byB0aGUgbG9naXRzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgcHJpb3IgdG8gc2FtcGxpbmcuXG4gIFRoZSBleGFjdCBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCwgYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZFxuICBkZWNyZWFzZSBvciBpbmNyZWFzZSBsaWtlbGlob29kIG9mIHNlbGVjdGlvbjsgdmFsdWVzIGxpa2UgLTEwMCBvciAxMDBcbiAgc2hvdWxkIHJlc3VsdCBpbiBhIGJhbiBvciBleGNsdXNpdmUgc2VsZWN0aW9uIG9mIHRoZSByZWxldmFudCB0b2tlbi5cbiAgXG4gIEFzIGFuIGV4YW1wbGUsIHlvdSBjYW4gcGFzcyB7XCI1MDI1NlwiOiAtMTAwfSB0byBwcmV2ZW50IHRoZSA8fGVuZG9mdGV4dHw+XG4gIHRva2VuIGZyb20gYmVpbmcgZ2VuZXJhdGVkLlxuICAgKi9cbiAgbG9naXRCaWFzOiB6Ni5yZWNvcmQoejYuc3RyaW5nKCksIHo2Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgVGhlIHN1ZmZpeCB0aGF0IGNvbWVzIGFmdGVyIGEgY29tcGxldGlvbiBvZiBpbnNlcnRlZCB0ZXh0LlxuICAgKi9cbiAgc3VmZml4OiB6Ni5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvXG4gIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gTGVhcm4gbW9yZS5cbiAgICovXG4gIHVzZXI6IHo2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuIEluY2x1ZGluZyBsb2dwcm9icyB3aWxsIGluY3JlYXNlXG4gIHRoZSByZXNwb25zZSBzaXplIGFuZCBjYW4gc2xvdyBkb3duIHJlc3BvbnNlIHRpbWVzLiBIb3dldmVyLCBpdCBjYW5cbiAgYmUgdXNlZnVsIHRvIGJldHRlciB1bmRlcnN0YW5kIGhvdyB0aGUgbW9kZWwgaXMgYmVoYXZpbmcuXG4gIFNldHRpbmcgdG8gdHJ1ZSB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2VucyB0aGF0XG4gIHdlcmUgZ2VuZXJhdGVkLlxuICBTZXR0aW5nIHRvIGEgbnVtYmVyIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9wIG5cbiAgdG9rZW5zIHRoYXQgd2VyZSBnZW5lcmF0ZWQuXG4gICAgICovXG4gIGxvZ3Byb2JzOiB6Ni51bmlvbihbejYuYm9vbGVhbigpLCB6Ni5udW1iZXIoKV0pLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvY29tcGxldGlvbi9vcGVuYWktY29tcGxldGlvbi1sYW5ndWFnZS1tb2RlbC50c1xudmFyIE9wZW5BSUNvbXBsZXRpb25MYW5ndWFnZU1vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICAgIHRoaXMuc3VwcG9ydGVkVXJscyA9IHtcbiAgICAgIC8vIE5vIFVSTHMgYXJlIHN1cHBvcnRlZCBmb3IgY29tcGxldGlvbiBtb2RlbHMuXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlck9wdGlvbnNOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlci5zcGxpdChcIi5cIilbMF0udHJpbSgpO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgcHJvbXB0LFxuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlczogdXNlclN0b3BTZXF1ZW5jZXMsXG4gICAgcmVzcG9uc2VGb3JtYXQsXG4gICAgdG9vbHMsXG4gICAgdG9vbENob2ljZSxcbiAgICBzZWVkLFxuICAgIHByb3ZpZGVyT3B0aW9uc1xuICB9KSB7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0ge1xuICAgICAgLi4uYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMyKHtcbiAgICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgc2NoZW1hOiBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zXG4gICAgICB9KSxcbiAgICAgIC4uLmF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zMih7XG4gICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyT3B0aW9uc05hbWUsXG4gICAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgc2NoZW1hOiBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zXG4gICAgICB9KVxuICAgIH07XG4gICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInRvcEtcIiB9KTtcbiAgICB9XG4gICAgaWYgKHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5sZW5ndGgpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJ0b29sc1wiIH0pO1xuICAgIH1cbiAgICBpZiAodG9vbENob2ljZSAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsIHNldHRpbmc6IFwidG9vbENob2ljZVwiIH0pO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2VGb3JtYXQgIT0gbnVsbCAmJiByZXNwb25zZUZvcm1hdC50eXBlICE9PSBcInRleHRcIikge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInJlc3BvbnNlRm9ybWF0XCIsXG4gICAgICAgIGRldGFpbHM6IFwiSlNPTiByZXNwb25zZSBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZC5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgcHJvbXB0OiBjb21wbGV0aW9uUHJvbXB0LCBzdG9wU2VxdWVuY2VzIH0gPSBjb252ZXJ0VG9PcGVuQUlDb21wbGV0aW9uUHJvbXB0KHsgcHJvbXB0IH0pO1xuICAgIGNvbnN0IHN0b3AgPSBbLi4uc3RvcFNlcXVlbmNlcyAhPSBudWxsID8gc3RvcFNlcXVlbmNlcyA6IFtdLCAuLi51c2VyU3RvcFNlcXVlbmNlcyAhPSBudWxsID8gdXNlclN0b3BTZXF1ZW5jZXMgOiBbXV07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLy8gbW9kZWwgaWQ6XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIC8vIG1vZGVsIHNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgICBlY2hvOiBvcGVuYWlPcHRpb25zLmVjaG8sXG4gICAgICAgIGxvZ2l0X2JpYXM6IG9wZW5haU9wdGlvbnMubG9naXRCaWFzLFxuICAgICAgICBsb2dwcm9iczogKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMpID09PSB0cnVlID8gMCA6IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzKSA9PT0gZmFsc2UgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzLFxuICAgICAgICBzdWZmaXg6IG9wZW5haU9wdGlvbnMuc3VmZml4LFxuICAgICAgICB1c2VyOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgICAgbWF4X3Rva2VuczogbWF4T3V0cHV0VG9rZW5zLFxuICAgICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiBmcmVxdWVuY3lQZW5hbHR5LFxuICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiBwcmVzZW5jZVBlbmFsdHksXG4gICAgICAgIHNlZWQsXG4gICAgICAgIC8vIHByb21wdDpcbiAgICAgICAgcHJvbXB0OiBjb21wbGV0aW9uUHJvbXB0LFxuICAgICAgICAvLyBzdG9wIHNlcXVlbmNlczpcbiAgICAgICAgc3RvcDogc3RvcC5sZW5ndGggPiAwID8gc3RvcCA6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb0dlbmVyYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCB7IGFyZ3MsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkyKHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzMih0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5OiBhcmdzLFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMihcbiAgICAgICAgb3BlbmFpQ29tcGxldGlvblJlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWw6IG9wdGlvbnMuYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICBjb25zdCBjaG9pY2UgPSByZXNwb25zZS5jaG9pY2VzWzBdO1xuICAgIGNvbnN0IHByb3ZpZGVyTWV0YWRhdGEgPSB7IG9wZW5haToge30gfTtcbiAgICBpZiAoY2hvaWNlLmxvZ3Byb2JzICE9IG51bGwpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmxvZ3Byb2JzID0gY2hvaWNlLmxvZ3Byb2JzO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudDogW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IGNob2ljZS50ZXh0IH1dLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IChfYSA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2EucHJvbXB0X3Rva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiAoX2IgPSByZXNwb25zZS51c2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNvbXBsZXRpb25fdG9rZW5zLFxuICAgICAgICB0b3RhbFRva2VuczogKF9jID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfYy50b3RhbF90b2tlbnNcbiAgICAgIH0sXG4gICAgICBmaW5pc2hSZWFzb246IG1hcE9wZW5BSUZpbmlzaFJlYXNvbjIoY2hvaWNlLmZpbmlzaF9yZWFzb24pLFxuICAgICAgcmVxdWVzdDogeyBib2R5OiBhcmdzIH0sXG4gICAgICByZXNwb25zZToge1xuICAgICAgICAuLi5nZXRSZXNwb25zZU1ldGFkYXRhMihyZXNwb25zZSksXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFyZ3MsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIC4uLmFyZ3MsXG4gICAgICBzdHJlYW06IHRydWUsXG4gICAgICBzdHJlYW1fb3B0aW9uczoge1xuICAgICAgICBpbmNsdWRlX3VzYWdlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSGVhZGVycywgdmFsdWU6IHJlc3BvbnNlIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpMih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NvbXBsZXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczIodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIyKFxuICAgICAgICBvcGVuYWlDb21wbGV0aW9uQ2h1bmtTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGxldCBmaW5pc2hSZWFzb24gPSBcInVua25vd25cIjtcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgY29uc3QgdXNhZ2UgPSB7XG4gICAgICBpbnB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgb3V0cHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICB0b3RhbFRva2Vuczogdm9pZCAwXG4gICAgfTtcbiAgICBsZXQgaXNGaXJzdENodW5rID0gdHJ1ZTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogY2h1bmsuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2h1bmsudmFsdWU7XG4gICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0ZpcnN0Q2h1bmspIHtcbiAgICAgICAgICAgICAgaXNGaXJzdENodW5rID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEyKHZhbHVlKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJ0ZXh0LXN0YXJ0XCIsIGlkOiBcIjBcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS51c2FnZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHVzYWdlLmlucHV0VG9rZW5zID0gdmFsdWUudXNhZ2UucHJvbXB0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnM7XG4gICAgICAgICAgICAgIHVzYWdlLnRvdGFsVG9rZW5zID0gdmFsdWUudXNhZ2UudG90YWxfdG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gdmFsdWUuY2hvaWNlc1swXTtcbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZmluaXNoX3JlYXNvbikgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBtYXBPcGVuQUlGaW5pc2hSZWFzb24yKGNob2ljZS5maW5pc2hfcmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UubG9ncHJvYnMpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNob2ljZSA9PSBudWxsID8gdm9pZCAwIDogY2hvaWNlLnRleHQpICE9IG51bGwgJiYgY2hvaWNlLnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIjBcIixcbiAgICAgICAgICAgICAgICBkZWx0YTogY2hvaWNlLnRleHRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBpZiAoIWlzRmlyc3RDaHVuaykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInRleHQtZW5kXCIsIGlkOiBcIjBcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZmluaXNoXCIsXG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbixcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YSxcbiAgICAgICAgICAgICAgdXNhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcbnZhciB1c2FnZVNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gIHByb21wdF90b2tlbnM6IHo3Lm51bWJlcigpLFxuICBjb21wbGV0aW9uX3Rva2VuczogejcubnVtYmVyKCksXG4gIHRvdGFsX3Rva2VuczogejcubnVtYmVyKClcbn0pO1xudmFyIG9wZW5haUNvbXBsZXRpb25SZXNwb25zZVNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gIGlkOiB6Ny5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNyZWF0ZWQ6IHo3Lm51bWJlcigpLm51bGxpc2goKSxcbiAgbW9kZWw6IHo3LnN0cmluZygpLm51bGxpc2goKSxcbiAgY2hvaWNlczogejcuYXJyYXkoXG4gICAgejcub2JqZWN0KHtcbiAgICAgIHRleHQ6IHo3LnN0cmluZygpLFxuICAgICAgZmluaXNoX3JlYXNvbjogejcuc3RyaW5nKCksXG4gICAgICBsb2dwcm9iczogejcub2JqZWN0KHtcbiAgICAgICAgdG9rZW5zOiB6Ny5hcnJheSh6Ny5zdHJpbmcoKSksXG4gICAgICAgIHRva2VuX2xvZ3Byb2JzOiB6Ny5hcnJheSh6Ny5udW1iZXIoKSksXG4gICAgICAgIHRvcF9sb2dwcm9iczogejcuYXJyYXkoejcucmVjb3JkKHo3LnN0cmluZygpLCB6Ny5udW1iZXIoKSkpLm51bGxpc2goKVxuICAgICAgfSkubnVsbGlzaCgpXG4gICAgfSlcbiAgKSxcbiAgdXNhZ2U6IHVzYWdlU2NoZW1hLm51bGxpc2goKVxufSk7XG52YXIgb3BlbmFpQ29tcGxldGlvbkNodW5rU2NoZW1hID0gejcudW5pb24oW1xuICB6Ny5vYmplY3Qoe1xuICAgIGlkOiB6Ny5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY3JlYXRlZDogejcubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgIG1vZGVsOiB6Ny5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY2hvaWNlczogejcuYXJyYXkoXG4gICAgICB6Ny5vYmplY3Qoe1xuICAgICAgICB0ZXh0OiB6Ny5zdHJpbmcoKSxcbiAgICAgICAgZmluaXNoX3JlYXNvbjogejcuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICBpbmRleDogejcubnVtYmVyKCksXG4gICAgICAgIGxvZ3Byb2JzOiB6Ny5vYmplY3Qoe1xuICAgICAgICAgIHRva2VuczogejcuYXJyYXkoejcuc3RyaW5nKCkpLFxuICAgICAgICAgIHRva2VuX2xvZ3Byb2JzOiB6Ny5hcnJheSh6Ny5udW1iZXIoKSksXG4gICAgICAgICAgdG9wX2xvZ3Byb2JzOiB6Ny5hcnJheSh6Ny5yZWNvcmQoejcuc3RyaW5nKCksIHo3Lm51bWJlcigpKSkubnVsbGlzaCgpXG4gICAgICAgIH0pLm51bGxpc2goKVxuICAgICAgfSlcbiAgICApLFxuICAgIHVzYWdlOiB1c2FnZVNjaGVtYS5udWxsaXNoKClcbiAgfSksXG4gIG9wZW5haUVycm9yRGF0YVNjaGVtYVxuXSk7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1tb2RlbC50c1xuaW1wb3J0IHtcbiAgVG9vTWFueUVtYmVkZGluZ1ZhbHVlc0ZvckNhbGxFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnMzLFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIzLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczMsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTNcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejkgfSBmcm9tIFwiem9kL3Y0XCI7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1vcHRpb25zLnRzXG5pbXBvcnQgeyB6IGFzIHo4IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIG9wZW5haUVtYmVkZGluZ1Byb3ZpZGVyT3B0aW9ucyA9IHo4Lm9iamVjdCh7XG4gIC8qKlxuICBUaGUgbnVtYmVyIG9mIGRpbWVuc2lvbnMgdGhlIHJlc3VsdGluZyBvdXRwdXQgZW1iZWRkaW5ncyBzaG91bGQgaGF2ZS5cbiAgT25seSBzdXBwb3J0ZWQgaW4gdGV4dC1lbWJlZGRpbmctMyBhbmQgbGF0ZXIgbW9kZWxzLlxuICAgICAqL1xuICBkaW1lbnNpb25zOiB6OC5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvXG4gIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gTGVhcm4gbW9yZS5cbiAgKi9cbiAgdXNlcjogejguc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1tb2RlbC50c1xudmFyIE9wZW5BSUVtYmVkZGluZ01vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICAgIHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwgPSAyMDQ4O1xuICAgIHRoaXMuc3VwcG9ydHNQYXJhbGxlbENhbGxzID0gdHJ1ZTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZG9FbWJlZCh7XG4gICAgdmFsdWVzLFxuICAgIGhlYWRlcnMsXG4gICAgYWJvcnRTaWduYWwsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPiB0aGlzLm1heEVtYmVkZGluZ3NQZXJDYWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVG9vTWFueUVtYmVkZGluZ1ZhbHVlc0ZvckNhbGxFcnJvcih7XG4gICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIG1heEVtYmVkZGluZ3NQZXJDYWxsOiB0aGlzLm1heEVtYmVkZGluZ3NQZXJDYWxsLFxuICAgICAgICB2YWx1ZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0gKF9hID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMzKHtcbiAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgc2NoZW1hOiBvcGVuYWlFbWJlZGRpbmdQcm92aWRlck9wdGlvbnNcbiAgICB9KSkgIT0gbnVsbCA/IF9hIDoge307XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWVcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTMoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9lbWJlZGRpbmdzXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczModGhpcy5jb25maWcuaGVhZGVycygpLCBoZWFkZXJzKSxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaW5wdXQ6IHZhbHVlcyxcbiAgICAgICAgZW5jb2RpbmdfZm9ybWF0OiBcImZsb2F0XCIsXG4gICAgICAgIGRpbWVuc2lvbnM6IG9wZW5haU9wdGlvbnMuZGltZW5zaW9ucyxcbiAgICAgICAgdXNlcjogb3BlbmFpT3B0aW9ucy51c2VyXG4gICAgICB9LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMyhcbiAgICAgICAgb3BlbmFpVGV4dEVtYmVkZGluZ1Jlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZW1iZWRkaW5nczogcmVzcG9uc2UuZGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW0uZW1iZWRkaW5nKSxcbiAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSA/IHsgdG9rZW5zOiByZXNwb25zZS51c2FnZS5wcm9tcHRfdG9rZW5zIH0gOiB2b2lkIDAsXG4gICAgICByZXNwb25zZTogeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsIGJvZHk6IHJhd1ZhbHVlIH1cbiAgICB9O1xuICB9XG59O1xudmFyIG9wZW5haVRleHRFbWJlZGRpbmdSZXNwb25zZVNjaGVtYSA9IHo5Lm9iamVjdCh7XG4gIGRhdGE6IHo5LmFycmF5KHo5Lm9iamVjdCh7IGVtYmVkZGluZzogejkuYXJyYXkoejkubnVtYmVyKCkpIH0pKSxcbiAgdXNhZ2U6IHo5Lm9iamVjdCh7IHByb21wdF90b2tlbnM6IHo5Lm51bWJlcigpIH0pLm51bGxpc2goKVxufSk7XG5cbi8vIHNyYy9pbWFnZS9vcGVuYWktaW1hZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzIGFzIGNvbWJpbmVIZWFkZXJzNCxcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNCxcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTAgfSBmcm9tIFwiem9kL3Y0XCI7XG5cbi8vIHNyYy9pbWFnZS9vcGVuYWktaW1hZ2Utb3B0aW9ucy50c1xudmFyIG1vZGVsTWF4SW1hZ2VzUGVyQ2FsbCA9IHtcbiAgXCJkYWxsLWUtM1wiOiAxLFxuICBcImRhbGwtZS0yXCI6IDEwLFxuICBcImdwdC1pbWFnZS0xXCI6IDEwXG59O1xudmFyIGhhc0RlZmF1bHRSZXNwb25zZUZvcm1hdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcImdwdC1pbWFnZS0xXCJdKTtcblxuLy8gc3JjL2ltYWdlL29wZW5haS1pbWFnZS1tb2RlbC50c1xudmFyIE9wZW5BSUltYWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgfVxuICBnZXQgbWF4SW1hZ2VzUGVyQ2FsbCgpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IG1vZGVsTWF4SW1hZ2VzUGVyQ2FsbFt0aGlzLm1vZGVsSWRdKSAhPSBudWxsID8gX2EgOiAxO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZSh7XG4gICAgcHJvbXB0LFxuICAgIG4sXG4gICAgc2l6ZSxcbiAgICBhc3BlY3RSYXRpbyxcbiAgICBzZWVkLFxuICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICBoZWFkZXJzLFxuICAgIGFib3J0U2lnbmFsXG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBpZiAoYXNwZWN0UmF0aW8gIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcImFzcGVjdFJhdGlvXCIsXG4gICAgICAgIGRldGFpbHM6IFwiVGhpcyBtb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGFzcGVjdCByYXRpby4gVXNlIGBzaXplYCBpbnN0ZWFkLlwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHNlZWQgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInNlZWRcIiB9KTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudERhdGUgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLmNvbmZpZy5faW50ZXJuYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jdXJyZW50RGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKSAhPSBudWxsID8gX2MgOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBjb25zdCB7IHZhbHVlOiByZXNwb25zZSwgcmVzcG9uc2VIZWFkZXJzIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNCh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2ltYWdlcy9nZW5lcmF0aW9uc1wiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnM0KHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgaGVhZGVycyksXG4gICAgICBib2R5OiB7XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIHByb21wdCxcbiAgICAgICAgbixcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgLi4uKF9kID0gcHJvdmlkZXJPcHRpb25zLm9wZW5haSkgIT0gbnVsbCA/IF9kIDoge30sXG4gICAgICAgIC4uLiFoYXNEZWZhdWx0UmVzcG9uc2VGb3JtYXQuaGFzKHRoaXMubW9kZWxJZCkgPyB7IHJlc3BvbnNlX2Zvcm1hdDogXCJiNjRfanNvblwiIH0gOiB7fVxuICAgICAgfSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjQoXG4gICAgICAgIG9wZW5haUltYWdlUmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBpbWFnZXM6IHJlc3BvbnNlLmRhdGEubWFwKChpdGVtKSA9PiBpdGVtLmI2NF9qc29uKSxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgdGltZXN0YW1wOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnNcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgIG9wZW5haToge1xuICAgICAgICAgIGltYWdlczogcmVzcG9uc2UuZGF0YS5tYXAoXG4gICAgICAgICAgICAoaXRlbSkgPT4gaXRlbS5yZXZpc2VkX3Byb21wdCA/IHtcbiAgICAgICAgICAgICAgcmV2aXNlZFByb21wdDogaXRlbS5yZXZpc2VkX3Byb21wdFxuICAgICAgICAgICAgfSA6IG51bGxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xudmFyIG9wZW5haUltYWdlUmVzcG9uc2VTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAgZGF0YTogejEwLmFycmF5KFxuICAgIHoxMC5vYmplY3QoeyBiNjRfanNvbjogejEwLnN0cmluZygpLCByZXZpc2VkX3Byb21wdDogejEwLnN0cmluZygpLm9wdGlvbmFsKCkgfSlcbiAgKVxufSk7XG5cbi8vIHNyYy90b29sL2NvZGUtaW50ZXJwcmV0ZXIudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb2RlSW50ZXJwcmV0ZXJJbnB1dFNjaGVtYSA9IHoxMS5vYmplY3Qoe1xuICBjb2RlOiB6MTEuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBjb250YWluZXJJZDogejExLnN0cmluZygpXG59KTtcbnZhciBjb2RlSW50ZXJwcmV0ZXJPdXRwdXRTY2hlbWEgPSB6MTEub2JqZWN0KHtcbiAgb3V0cHV0czogejExLmFycmF5KFxuICAgIHoxMS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHoxMS5vYmplY3QoeyB0eXBlOiB6MTEubGl0ZXJhbChcImxvZ3NcIiksIGxvZ3M6IHoxMS5zdHJpbmcoKSB9KSxcbiAgICAgIHoxMS5vYmplY3QoeyB0eXBlOiB6MTEubGl0ZXJhbChcImltYWdlXCIpLCB1cmw6IHoxMS5zdHJpbmcoKSB9KVxuICAgIF0pXG4gICkubnVsbGlzaCgpXG59KTtcbnZhciBjb2RlSW50ZXJwcmV0ZXJBcmdzU2NoZW1hID0gejExLm9iamVjdCh7XG4gIGNvbnRhaW5lcjogejExLnVuaW9uKFtcbiAgICB6MTEuc3RyaW5nKCksXG4gICAgejExLm9iamVjdCh7XG4gICAgICBmaWxlSWRzOiB6MTEuYXJyYXkoejExLnN0cmluZygpKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgXSkub3B0aW9uYWwoKVxufSk7XG52YXIgY29kZUludGVycHJldGVyVG9vbEZhY3RvcnkgPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEoe1xuICBpZDogXCJvcGVuYWkuY29kZV9pbnRlcnByZXRlclwiLFxuICBuYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgaW5wdXRTY2hlbWE6IGNvZGVJbnRlcnByZXRlcklucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWE6IGNvZGVJbnRlcnByZXRlck91dHB1dFNjaGVtYVxufSk7XG52YXIgY29kZUludGVycHJldGVyID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gY29kZUludGVycHJldGVyVG9vbEZhY3RvcnkoYXJncyk7XG59O1xuXG4vLyBzcmMvdG9vbC93ZWItc2VhcmNoLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTMgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgd2ViU2VhcmNoQXJnc1NjaGVtYSA9IHoxMi5vYmplY3Qoe1xuICBmaWx0ZXJzOiB6MTIub2JqZWN0KHtcbiAgICBhbGxvd2VkRG9tYWluczogejEyLmFycmF5KHoxMi5zdHJpbmcoKSkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpLFxuICBzZWFyY2hDb250ZXh0U2l6ZTogejEyLmVudW0oW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgdXNlckxvY2F0aW9uOiB6MTIub2JqZWN0KHtcbiAgICB0eXBlOiB6MTIubGl0ZXJhbChcImFwcHJveGltYXRlXCIpLFxuICAgIGNvdW50cnk6IHoxMi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNpdHk6IHoxMi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlZ2lvbjogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdGltZXpvbmU6IHoxMi5zdHJpbmcoKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKClcbn0pO1xudmFyIHdlYlNlYXJjaFRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkzKHtcbiAgaWQ6IFwib3BlbmFpLndlYl9zZWFyY2hcIixcbiAgbmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gIGlucHV0U2NoZW1hOiB6MTIub2JqZWN0KHtcbiAgICBhY3Rpb246IHoxMi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHoxMi5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTIubGl0ZXJhbChcInNlYXJjaFwiKSxcbiAgICAgICAgcXVlcnk6IHoxMi5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgejEyLm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxMi5saXRlcmFsKFwib3Blbl9wYWdlXCIpLFxuICAgICAgICB1cmw6IHoxMi5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6MTIub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejEyLmxpdGVyYWwoXCJmaW5kXCIpLFxuICAgICAgICB1cmw6IHoxMi5zdHJpbmcoKSxcbiAgICAgICAgcGF0dGVybjogejEyLnN0cmluZygpXG4gICAgICB9KVxuICAgIF0pLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgd2ViU2VhcmNoID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gd2ViU2VhcmNoVG9vbEZhY3RvcnkoYXJncyk7XG59O1xuXG4vLyBzcmMvb3BlbmFpLXRvb2xzLnRzXG52YXIgb3BlbmFpVG9vbHMgPSB7XG4gIC8qKlxuICAgKiBUaGUgQ29kZSBJbnRlcnByZXRlciB0b29sIGFsbG93cyBtb2RlbHMgdG8gd3JpdGUgYW5kIHJ1biBQeXRob24gY29kZSBpbiBhXG4gICAqIHNhbmRib3hlZCBlbnZpcm9ubWVudCB0byBzb2x2ZSBjb21wbGV4IHByb2JsZW1zIGluIGRvbWFpbnMgbGlrZSBkYXRhIGFuYWx5c2lzLFxuICAgKiBjb2RpbmcsIGFuZCBtYXRoLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byB1c2UgZm9yIHRoZSBjb2RlIGludGVycHJldGVyLlxuICAgKlxuICAgKiBNdXN0IGhhdmUgbmFtZSBgY29kZV9pbnRlcnByZXRlcmAuXG4gICAqL1xuICBjb2RlSW50ZXJwcmV0ZXIsXG4gIC8qKlxuICAgKiBGaWxlIHNlYXJjaCBpcyBhIHRvb2wgYXZhaWxhYmxlIGluIHRoZSBSZXNwb25zZXMgQVBJLiBJdCBlbmFibGVzIG1vZGVscyB0b1xuICAgKiByZXRyaWV2ZSBpbmZvcm1hdGlvbiBpbiBhIGtub3dsZWRnZSBiYXNlIG9mIHByZXZpb3VzbHkgdXBsb2FkZWQgZmlsZXMgdGhyb3VnaFxuICAgKiBzZW1hbnRpYyBhbmQga2V5d29yZCBzZWFyY2guXG4gICAqXG4gICAqIE11c3QgaGF2ZSBuYW1lIGBmaWxlX3NlYXJjaGAuXG4gICAqXG4gICAqIEBwYXJhbSB2ZWN0b3JTdG9yZUlkcyAtIFRoZSB2ZWN0b3Igc3RvcmUgSURzIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gbWF4TnVtUmVzdWx0cyAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICogQHBhcmFtIHJhbmtpbmcgLSBUaGUgcmFua2luZyBvcHRpb25zIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIFRoZSBmaWx0ZXJzIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKi9cbiAgZmlsZVNlYXJjaCxcbiAgLyoqXG4gICAqIFdlYiBzZWFyY2ggYWxsb3dzIG1vZGVscyB0byBhY2Nlc3MgdXAtdG8tZGF0ZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBpbnRlcm5ldFxuICAgKiBhbmQgcHJvdmlkZSBhbnN3ZXJzIHdpdGggc291cmNlZCBjaXRhdGlvbnMuXG4gICAqXG4gICAqIE11c3QgaGF2ZSBuYW1lIGB3ZWJfc2VhcmNoX3ByZXZpZXdgLlxuICAgKlxuICAgKiBAcGFyYW0gc2VhcmNoQ29udGV4dFNpemUgLSBUaGUgc2VhcmNoIGNvbnRleHQgc2l6ZSB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKiBAcGFyYW0gdXNlckxvY2F0aW9uIC0gVGhlIHVzZXIgbG9jYXRpb24gdG8gdXNlIGZvciB0aGUgd2ViIHNlYXJjaC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGB3ZWJTZWFyY2hgIGluc3RlYWQuXG4gICAqL1xuICB3ZWJTZWFyY2hQcmV2aWV3LFxuICAvKipcbiAgICogV2ViIHNlYXJjaCBhbGxvd3MgbW9kZWxzIHRvIGFjY2VzcyB1cC10by1kYXRlIGluZm9ybWF0aW9uIGZyb20gdGhlIGludGVybmV0XG4gICAqIGFuZCBwcm92aWRlIGFuc3dlcnMgd2l0aCBzb3VyY2VkIGNpdGF0aW9ucy5cbiAgICpcbiAgICogTXVzdCBoYXZlIG5hbWUgYHdlYl9zZWFyY2hgLlxuICAgKlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIFRoZSBmaWx0ZXJzIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSBzZWFyY2hDb250ZXh0U2l6ZSAtIFRoZSBzZWFyY2ggY29udGV4dCBzaXplIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSB1c2VyTG9jYXRpb24gLSBUaGUgdXNlciBsb2NhdGlvbiB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKi9cbiAgd2ViU2VhcmNoXG59O1xuXG4vLyBzcmMvcmVzcG9uc2VzL29wZW5haS1yZXNwb25zZXMtbGFuZ3VhZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIEFQSUNhbGxFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM1LFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcjMsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjUsXG4gIGdlbmVyYXRlSWQgYXMgZ2VuZXJhdGVJZDIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zNSxcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNVxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTQgfSBmcm9tIFwiem9kL3Y0XCI7XG5cbi8vIHNyYy9yZXNwb25zZXMvY29udmVydC10by1vcGVuYWktcmVzcG9uc2VzLWlucHV0LnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjRcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7IGNvbnZlcnRUb0Jhc2U2NCBhcyBjb252ZXJ0VG9CYXNlNjQyLCBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTMgfSBmcm9tIFwiem9kL3Y0XCI7XG5mdW5jdGlvbiBpc0ZpbGVJZChkYXRhLCBwcmVmaXhlcykge1xuICBpZiAoIXByZWZpeGVzKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBwcmVmaXhlcy5zb21lKChwcmVmaXgpID0+IGRhdGEuc3RhcnRzV2l0aChwcmVmaXgpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSVJlc3BvbnNlc0lucHV0KHtcbiAgcHJvbXB0LFxuICBzeXN0ZW1NZXNzYWdlTW9kZSxcbiAgZmlsZUlkUHJlZml4ZXNcbn0pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGNvbnN0IGlucHV0ID0gW107XG4gIGNvbnN0IHdhcm5pbmdzID0gW107XG4gIGZvciAoY29uc3QgeyByb2xlLCBjb250ZW50IH0gb2YgcHJvbXB0KSB7XG4gICAgc3dpdGNoIChyb2xlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgc3dpdGNoIChzeXN0ZW1NZXNzYWdlTW9kZSkge1xuICAgICAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICAgICAgaW5wdXQucHVzaCh7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImRldmVsb3BlclwiOiB7XG4gICAgICAgICAgICBpbnB1dC5wdXNoKHsgcm9sZTogXCJkZXZlbG9wZXJcIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicmVtb3ZlXCI6IHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3lzdGVtIG1lc3NhZ2VzIGFyZSByZW1vdmVkIGZvciB0aGlzIG1vZGVsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSBzeXN0ZW1NZXNzYWdlTW9kZTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVuc3VwcG9ydGVkIHN5c3RlbSBtZXNzYWdlIG1vZGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ1c2VyXCI6IHtcbiAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogY29udGVudC5tYXAoKHBhcnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EyLCBfYjIsIF9jMjtcbiAgICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImlucHV0X3RleHRcIiwgdGV4dDogcGFydC50ZXh0IH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImZpbGVcIjoge1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0Lm1lZGlhVHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZWRpYVR5cGUgPSBwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJpbWFnZS8qXCIgPyBcImltYWdlL2pwZWdcIiA6IHBhcnQubWVkaWFUeXBlO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9pbWFnZVwiLFxuICAgICAgICAgICAgICAgICAgICAuLi5wYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwgPyB7IGltYWdlX3VybDogcGFydC5kYXRhLnRvU3RyaW5nKCkgfSA6IHR5cGVvZiBwYXJ0LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgaXNGaWxlSWQocGFydC5kYXRhLCBmaWxlSWRQcmVmaXhlcykgPyB7IGZpbGVfaWQ6IHBhcnQuZGF0YSB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogYGRhdGE6JHttZWRpYVR5cGV9O2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NDIocGFydC5kYXRhKX1gXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogKF9iMiA9IChfYTIgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfYjIuaW1hZ2VEZXRhaWxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIikge1xuICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfdXJsOiBwYXJ0LmRhdGEudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9maWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIC4uLnR5cGVvZiBwYXJ0LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgaXNGaWxlSWQocGFydC5kYXRhLCBmaWxlSWRQcmVmaXhlcykgPyB7IGZpbGVfaWQ6IHBhcnQuZGF0YSB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAoX2MyID0gcGFydC5maWxlbmFtZSkgIT0gbnVsbCA/IF9jMiA6IGBwYXJ0LSR7aW5kZXh9LnBkZmAsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhOiBgZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LCR7Y29udmVydFRvQmFzZTY0MihwYXJ0LmRhdGEpfWBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yNCh7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IGBmaWxlIHBhcnQgbWVkaWEgdHlwZSAke3BhcnQubWVkaWFUeXBlfWBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjoge1xuICAgICAgICBjb25zdCByZWFzb25pbmdNZXNzYWdlcyA9IHt9O1xuICAgICAgICBjb25zdCB0b29sQ2FsbFBhcnRzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjb250ZW50KSB7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgICAgICBjb250ZW50OiBbeyB0eXBlOiBcIm91dHB1dF90ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9XSxcbiAgICAgICAgICAgICAgICBpZDogKF9jID0gKF9iID0gKF9hID0gcGFydC5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pdGVtSWQpICE9IG51bGwgPyBfYyA6IHZvaWQgMFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwidG9vbC1jYWxsXCI6IHtcbiAgICAgICAgICAgICAgdG9vbENhbGxQYXJ0c1twYXJ0LnRvb2xDYWxsSWRdID0gcGFydDtcbiAgICAgICAgICAgICAgaWYgKHBhcnQucHJvdmlkZXJFeGVjdXRlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25fY2FsbFwiLFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXJ0LnRvb2xOYW1lLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogSlNPTi5zdHJpbmdpZnkocGFydC5pbnB1dCksXG4gICAgICAgICAgICAgICAgaWQ6IChfZiA9IChfZSA9IChfZCA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Qub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2UuaXRlbUlkKSAhPSBudWxsID8gX2YgOiB2b2lkIDBcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInRvb2wtcmVzdWx0XCI6IHtcbiAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGB0b29sIHJlc3VsdCBwYXJ0cyBpbiBhc3Npc3RhbnQgbWVzc2FnZXMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIE9wZW5BSSByZXNwb25zZXNgXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgICAgICBjb25zdCBwcm92aWRlck9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczQoe1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyT3B0aW9uczogcGFydC5wcm92aWRlck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBvcGVuYWlSZXNwb25zZXNSZWFzb25pbmdQcm92aWRlck9wdGlvbnNTY2hlbWFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnN0IHJlYXNvbmluZ0lkID0gcHJvdmlkZXJPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBwcm92aWRlck9wdGlvbnMuaXRlbUlkO1xuICAgICAgICAgICAgICBpZiAocmVhc29uaW5nSWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUmVhc29uaW5nTWVzc2FnZSA9IHJlYXNvbmluZ01lc3NhZ2VzW3JlYXNvbmluZ0lkXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5UGFydHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocGFydC50ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIHN1bW1hcnlQYXJ0cy5wdXNoKHsgdHlwZTogXCJzdW1tYXJ5X3RleHRcIiwgdGV4dDogcGFydC50ZXh0IH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdSZWFzb25pbmdNZXNzYWdlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDYW5ub3QgYXBwZW5kIGVtcHR5IHJlYXNvbmluZyBwYXJ0IHRvIGV4aXN0aW5nIHJlYXNvbmluZyBzZXF1ZW5jZS4gU2tpcHBpbmcgcmVhc29uaW5nIHBhcnQ6ICR7SlNPTi5zdHJpbmdpZnkocGFydCl9LmBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdSZWFzb25pbmdNZXNzYWdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ01lc3NhZ2VzW3JlYXNvbmluZ0lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlYXNvbmluZ0lkLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogcHJvdmlkZXJPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBwcm92aWRlck9wdGlvbnMucmVhc29uaW5nRW5jcnlwdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogc3VtbWFyeVBhcnRzXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgaW5wdXQucHVzaChyZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBleGlzdGluZ1JlYXNvbmluZ01lc3NhZ2Uuc3VtbWFyeS5wdXNoKC4uLnN1bW1hcnlQYXJ0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE5vbi1PcGVuQUkgcmVhc29uaW5nIHBhcnRzIGFyZSBub3Qgc3VwcG9ydGVkLiBTa2lwcGluZyByZWFzb25pbmcgcGFydDogJHtKU09OLnN0cmluZ2lmeShwYXJ0KX0uYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSBwYXJ0Lm91dHB1dDtcbiAgICAgICAgICBsZXQgY29udGVudFZhbHVlO1xuICAgICAgICAgIHN3aXRjaCAob3V0cHV0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZXJyb3ItdGV4dFwiOlxuICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBvdXRwdXQudmFsdWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJqc29uXCI6XG4gICAgICAgICAgICBjYXNlIFwiZXJyb3ItanNvblwiOlxuICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBKU09OLnN0cmluZ2lmeShvdXRwdXQudmFsdWUpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uX2NhbGxfb3V0cHV0XCIsXG4gICAgICAgICAgICBjYWxsX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IGNvbnRlbnRWYWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGlucHV0LCB3YXJuaW5ncyB9O1xufVxudmFyIG9wZW5haVJlc3BvbnNlc1JlYXNvbmluZ1Byb3ZpZGVyT3B0aW9uc1NjaGVtYSA9IHoxMy5vYmplY3Qoe1xuICBpdGVtSWQ6IHoxMy5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQ6IHoxMy5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuXG4vLyBzcmMvcmVzcG9uc2VzL21hcC1vcGVuYWktcmVzcG9uc2VzLWZpbmlzaC1yZWFzb24udHNcbmZ1bmN0aW9uIG1hcE9wZW5BSVJlc3BvbnNlRmluaXNoUmVhc29uKHtcbiAgZmluaXNoUmVhc29uLFxuICBoYXNGdW5jdGlvbkNhbGxcbn0pIHtcbiAgc3dpdGNoIChmaW5pc2hSZWFzb24pIHtcbiAgICBjYXNlIHZvaWQgMDpcbiAgICBjYXNlIG51bGw6XG4gICAgICByZXR1cm4gaGFzRnVuY3Rpb25DYWxsID8gXCJ0b29sLWNhbGxzXCIgOiBcInN0b3BcIjtcbiAgICBjYXNlIFwibWF4X291dHB1dF90b2tlbnNcIjpcbiAgICAgIHJldHVybiBcImxlbmd0aFwiO1xuICAgIGNhc2UgXCJjb250ZW50X2ZpbHRlclwiOlxuICAgICAgcmV0dXJuIFwiY29udGVudC1maWx0ZXJcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGhhc0Z1bmN0aW9uQ2FsbCA/IFwidG9vbC1jYWxsc1wiIDogXCJ1bmtub3duXCI7XG4gIH1cbn1cblxuLy8gc3JjL3Jlc3BvbnNlcy9vcGVuYWktcmVzcG9uc2VzLXByZXBhcmUtdG9vbHMudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yNVxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuZnVuY3Rpb24gcHJlcGFyZVJlc3BvbnNlc1Rvb2xzKHtcbiAgdG9vbHMsXG4gIHRvb2xDaG9pY2UsXG4gIHN0cmljdEpzb25TY2hlbWFcbn0pIHtcbiAgdG9vbHMgPSAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmxlbmd0aCkgPyB0b29scyA6IHZvaWQgMDtcbiAgY29uc3QgdG9vbFdhcm5pbmdzID0gW107XG4gIGlmICh0b29scyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdG9vbHM6IHZvaWQgMCwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MgfTtcbiAgfVxuICBjb25zdCBvcGVuYWlUb29sczIgPSBbXTtcbiAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgc3dpdGNoICh0b29sLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLmlucHV0U2NoZW1hLFxuICAgICAgICAgIHN0cmljdDogc3RyaWN0SnNvblNjaGVtYVxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJvdmlkZXItZGVmaW5lZFwiOiB7XG4gICAgICAgIHN3aXRjaCAodG9vbC5pZCkge1xuICAgICAgICAgIGNhc2UgXCJvcGVuYWkuZmlsZV9zZWFyY2hcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IGZpbGVTZWFyY2hBcmdzU2NoZW1hLnBhcnNlKHRvb2wuYXJncyk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgICAgdmVjdG9yX3N0b3JlX2lkczogYXJncy52ZWN0b3JTdG9yZUlkcyxcbiAgICAgICAgICAgICAgbWF4X251bV9yZXN1bHRzOiBhcmdzLm1heE51bVJlc3VsdHMsXG4gICAgICAgICAgICAgIHJhbmtpbmdfb3B0aW9uczogYXJncy5yYW5raW5nID8geyByYW5rZXI6IGFyZ3MucmFua2luZy5yYW5rZXIgfSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgZmlsdGVyczogYXJncy5maWx0ZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLndlYl9zZWFyY2hfcHJldmlld1wiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gd2ViU2VhcmNoUHJldmlld0FyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ3ZWJfc2VhcmNoX3ByZXZpZXdcIixcbiAgICAgICAgICAgICAgc2VhcmNoX2NvbnRleHRfc2l6ZTogYXJncy5zZWFyY2hDb250ZXh0U2l6ZSxcbiAgICAgICAgICAgICAgdXNlcl9sb2NhdGlvbjogYXJncy51c2VyTG9jYXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkud2ViX3NlYXJjaFwiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gd2ViU2VhcmNoQXJnc1NjaGVtYS5wYXJzZSh0b29sLmFyZ3MpO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgZmlsdGVyczogYXJncy5maWx0ZXJzICE9IG51bGwgPyB7IGFsbG93ZWRfZG9tYWluczogYXJncy5maWx0ZXJzLmFsbG93ZWREb21haW5zIH0gOiB2b2lkIDAsXG4gICAgICAgICAgICAgIHNlYXJjaF9jb250ZXh0X3NpemU6IGFyZ3Muc2VhcmNoQ29udGV4dFNpemUsXG4gICAgICAgICAgICAgIHVzZXJfbG9jYXRpb246IGFyZ3MudXNlckxvY2F0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLmNvZGVfaW50ZXJwcmV0ZXJcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IGNvZGVJbnRlcnByZXRlckFyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb2RlX2ludGVycHJldGVyXCIsXG4gICAgICAgICAgICAgIGNvbnRhaW5lcjogYXJncy5jb250YWluZXIgPT0gbnVsbCA/IHsgdHlwZTogXCJhdXRvXCIsIGZpbGVfaWRzOiB2b2lkIDAgfSA6IHR5cGVvZiBhcmdzLmNvbnRhaW5lciA9PT0gXCJzdHJpbmdcIiA/IGFyZ3MuY29udGFpbmVyIDogeyB0eXBlOiBcImF1dG9cIiwgZmlsZV9pZHM6IGFyZ3MuY29udGFpbmVyLmZpbGVJZHMgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdG9vbFdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXRvb2xcIiwgdG9vbCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRvb2xXYXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZC10b29sXCIsIHRvb2wgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAodG9vbENob2ljZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdG9vbHM6IG9wZW5haVRvb2xzMiwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MgfTtcbiAgfVxuICBjb25zdCB0eXBlID0gdG9vbENob2ljZS50eXBlO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiYXV0b1wiOlxuICAgIGNhc2UgXCJub25lXCI6XG4gICAgY2FzZSBcInJlcXVpcmVkXCI6XG4gICAgICByZXR1cm4geyB0b29sczogb3BlbmFpVG9vbHMyLCB0b29sQ2hvaWNlOiB0eXBlLCB0b29sV2FybmluZ3MgfTtcbiAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgICAgdG9vbENob2ljZTogdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJjb2RlX2ludGVycHJldGVyXCIgfHwgdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJmaWxlX3NlYXJjaFwiIHx8IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwid2ViX3NlYXJjaF9wcmV2aWV3XCIgfHwgdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIgPyB7IHR5cGU6IHRvb2xDaG9pY2UudG9vbE5hbWUgfSA6IHsgdHlwZTogXCJmdW5jdGlvblwiLCBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lIH0sXG4gICAgICAgIHRvb2xXYXJuaW5nc1xuICAgICAgfTtcbiAgICBkZWZhdWx0OiB7XG4gICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjUoe1xuICAgICAgICBmdW5jdGlvbmFsaXR5OiBgdG9vbCBjaG9pY2UgdHlwZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vLyBzcmMvcmVzcG9uc2VzL29wZW5haS1yZXNwb25zZXMtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciB3ZWJTZWFyY2hDYWxsSXRlbSA9IHoxNC5vYmplY3Qoe1xuICB0eXBlOiB6MTQubGl0ZXJhbChcIndlYl9zZWFyY2hfY2FsbFwiKSxcbiAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgc3RhdHVzOiB6MTQuc3RyaW5nKCksXG4gIGFjdGlvbjogejE0LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgIHoxNC5vYmplY3Qoe1xuICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICBxdWVyeTogejE0LnN0cmluZygpLm51bGxpc2goKVxuICAgIH0pLFxuICAgIHoxNC5vYmplY3Qoe1xuICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJvcGVuX3BhZ2VcIiksXG4gICAgICB1cmw6IHoxNC5zdHJpbmcoKVxuICAgIH0pLFxuICAgIHoxNC5vYmplY3Qoe1xuICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJmaW5kXCIpLFxuICAgICAgdXJsOiB6MTQuc3RyaW5nKCksXG4gICAgICBwYXR0ZXJuOiB6MTQuc3RyaW5nKClcbiAgICB9KVxuICBdKS5udWxsaXNoKClcbn0pO1xudmFyIGNvZGVJbnRlcnByZXRlckNhbGxJdGVtID0gejE0Lm9iamVjdCh7XG4gIHR5cGU6IHoxNC5saXRlcmFsKFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIpLFxuICBpZDogejE0LnN0cmluZygpLFxuICBjb2RlOiB6MTQuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgY29udGFpbmVyX2lkOiB6MTQuc3RyaW5nKCksXG4gIG91dHB1dHM6IHoxNC5hcnJheShcbiAgICB6MTQuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICB6MTQub2JqZWN0KHsgdHlwZTogejE0LmxpdGVyYWwoXCJsb2dzXCIpLCBsb2dzOiB6MTQuc3RyaW5nKCkgfSksXG4gICAgICB6MTQub2JqZWN0KHsgdHlwZTogejE0LmxpdGVyYWwoXCJpbWFnZVwiKSwgdXJsOiB6MTQuc3RyaW5nKCkgfSlcbiAgICBdKVxuICApLm51bGxhYmxlKClcbn0pO1xudmFyIFRPUF9MT0dQUk9CU19NQVggPSAyMDtcbnZhciBMT0dQUk9CU19TQ0hFTUEgPSB6MTQuYXJyYXkoXG4gIHoxNC5vYmplY3Qoe1xuICAgIHRva2VuOiB6MTQuc3RyaW5nKCksXG4gICAgbG9ncHJvYjogejE0Lm51bWJlcigpLFxuICAgIHRvcF9sb2dwcm9iczogejE0LmFycmF5KFxuICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgIHRva2VuOiB6MTQuc3RyaW5nKCksXG4gICAgICAgIGxvZ3Byb2I6IHoxNC5udW1iZXIoKVxuICAgICAgfSlcbiAgICApXG4gIH0pXG4pO1xudmFyIE9wZW5BSVJlc3BvbnNlc0xhbmd1YWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYyXCI7XG4gICAgdGhpcy5zdXBwb3J0ZWRVcmxzID0ge1xuICAgICAgXCJpbWFnZS8qXCI6IFsvXmh0dHBzPzpcXC9cXC8uKiQvXSxcbiAgICAgIFwiYXBwbGljYXRpb24vcGRmXCI6IFsvXmh0dHBzPzpcXC9cXC8uKiQvXVxuICAgIH07XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICBzdG9wU2VxdWVuY2VzLFxuICAgIHRvcFAsXG4gICAgdG9wSyxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBzZWVkLFxuICAgIHByb21wdCxcbiAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgdG9vbHMsXG4gICAgdG9vbENob2ljZSxcbiAgICByZXNwb25zZUZvcm1hdFxuICB9KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3QgbW9kZWxDb25maWcgPSBnZXRSZXNwb25zZXNNb2RlbENvbmZpZyh0aGlzLm1vZGVsSWQpO1xuICAgIGlmICh0b3BLICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJ0b3BLXCIgfSk7XG4gICAgfVxuICAgIGlmIChzZWVkICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJzZWVkXCIgfSk7XG4gICAgfVxuICAgIGlmIChwcmVzZW5jZVBlbmFsdHkgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInByZXNlbmNlUGVuYWx0eVwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZyZXF1ZW5jeVBlbmFsdHkgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcImZyZXF1ZW5jeVBlbmFsdHlcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzdG9wU2VxdWVuY2VzICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJzdG9wU2VxdWVuY2VzXCIgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgaW5wdXQsIHdhcm5pbmdzOiBpbnB1dFdhcm5pbmdzIH0gPSBhd2FpdCBjb252ZXJ0VG9PcGVuQUlSZXNwb25zZXNJbnB1dCh7XG4gICAgICBwcm9tcHQsXG4gICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogbW9kZWxDb25maWcuc3lzdGVtTWVzc2FnZU1vZGUsXG4gICAgICBmaWxlSWRQcmVmaXhlczogdGhpcy5jb25maWcuZmlsZUlkUHJlZml4ZXNcbiAgICB9KTtcbiAgICB3YXJuaW5ncy5wdXNoKC4uLmlucHV0V2FybmluZ3MpO1xuICAgIGNvbnN0IG9wZW5haU9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczUoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5haVJlc3BvbnNlc1Byb3ZpZGVyT3B0aW9uc1NjaGVtYVxuICAgIH0pO1xuICAgIGNvbnN0IHN0cmljdEpzb25TY2hlbWEgPSAoX2EgPSBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnN0cmljdEpzb25TY2hlbWEpICE9IG51bGwgPyBfYSA6IGZhbHNlO1xuICAgIGxldCBpbmNsdWRlID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5pbmNsdWRlO1xuICAgIGNvbnN0IHRvcExvZ3Byb2JzID0gdHlwZW9mIChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzKSA9PT0gXCJudW1iZXJcIiA/IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMgOiAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5sb2dwcm9icykgPT09IHRydWUgPyBUT1BfTE9HUFJPQlNfTUFYIDogdm9pZCAwO1xuICAgIGluY2x1ZGUgPSB0b3BMb2dwcm9icyA/IEFycmF5LmlzQXJyYXkoaW5jbHVkZSkgPyBbLi4uaW5jbHVkZSwgXCJtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzXCJdIDogW1wibWVzc2FnZS5vdXRwdXRfdGV4dC5sb2dwcm9ic1wiXSA6IGluY2x1ZGU7XG4gICAgY29uc3Qgd2ViU2VhcmNoVG9vbE5hbWUgPSAoX2IgPSB0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMuZmluZChcbiAgICAgICh0b29sKSA9PiB0b29sLnR5cGUgPT09IFwicHJvdmlkZXItZGVmaW5lZFwiICYmICh0b29sLmlkID09PSBcIm9wZW5haS53ZWJfc2VhcmNoXCIgfHwgdG9vbC5pZCA9PT0gXCJvcGVuYWkud2ViX3NlYXJjaF9wcmV2aWV3XCIpXG4gICAgKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm5hbWU7XG4gICAgaW5jbHVkZSA9IHdlYlNlYXJjaFRvb2xOYW1lID8gQXJyYXkuaXNBcnJheShpbmNsdWRlKSA/IFsuLi5pbmNsdWRlLCBcIndlYl9zZWFyY2hfY2FsbC5hY3Rpb24uc291cmNlc1wiXSA6IFtcIndlYl9zZWFyY2hfY2FsbC5hY3Rpb24uc291cmNlc1wiXSA6IGluY2x1ZGU7XG4gICAgY29uc3QgY29kZUludGVycHJldGVyVG9vbE5hbWUgPSAoX2MgPSB0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMuZmluZChcbiAgICAgICh0b29sKSA9PiB0b29sLnR5cGUgPT09IFwicHJvdmlkZXItZGVmaW5lZFwiICYmIHRvb2wuaWQgPT09IFwib3BlbmFpLmNvZGVfaW50ZXJwcmV0ZXJcIlxuICAgICkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5uYW1lO1xuICAgIGluY2x1ZGUgPSBjb2RlSW50ZXJwcmV0ZXJUb29sTmFtZSA/IEFycmF5LmlzQXJyYXkoaW5jbHVkZSkgPyBbLi4uaW5jbHVkZSwgXCJjb2RlX2ludGVycHJldGVyX2NhbGwub3V0cHV0c1wiXSA6IFtcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbC5vdXRwdXRzXCJdIDogaW5jbHVkZTtcbiAgICBjb25zdCBiYXNlQXJncyA9IHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICBpbnB1dCxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICBtYXhfb3V0cHV0X3Rva2VuczogbWF4T3V0cHV0VG9rZW5zLFxuICAgICAgLi4uKChyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiIHx8IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnRleHRWZXJib3NpdHkpKSAmJiB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICAuLi4ocmVzcG9uc2VGb3JtYXQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlRm9ybWF0LnR5cGUpID09PSBcImpzb25cIiAmJiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHJlc3BvbnNlRm9ybWF0LnNjaGVtYSAhPSBudWxsID8ge1xuICAgICAgICAgICAgICB0eXBlOiBcImpzb25fc2NoZW1hXCIsXG4gICAgICAgICAgICAgIHN0cmljdDogc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgICAgICAgbmFtZTogKF9kID0gcmVzcG9uc2VGb3JtYXQubmFtZSkgIT0gbnVsbCA/IF9kIDogXCJyZXNwb25zZVwiLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzcG9uc2VGb3JtYXQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIHNjaGVtYTogcmVzcG9uc2VGb3JtYXQuc2NoZW1hXG4gICAgICAgICAgICB9IDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgLi4uKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMudGV4dFZlcmJvc2l0eSkgJiYge1xuICAgICAgICAgICAgdmVyYm9zaXR5OiBvcGVuYWlPcHRpb25zLnRleHRWZXJib3NpdHlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBwcm92aWRlciBvcHRpb25zOlxuICAgICAgbWV0YWRhdGE6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubWV0YWRhdGEsXG4gICAgICBwYXJhbGxlbF90b29sX2NhbGxzOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnBhcmFsbGVsVG9vbENhbGxzLFxuICAgICAgcHJldmlvdXNfcmVzcG9uc2VfaWQ6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgc3RvcmU6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc3RvcmUsXG4gICAgICB1c2VyOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICBpbnN0cnVjdGlvbnM6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgc2VydmljZV90aWVyOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyLFxuICAgICAgaW5jbHVkZSxcbiAgICAgIHByb21wdF9jYWNoZV9rZXk6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucHJvbXB0Q2FjaGVLZXksXG4gICAgICBzYWZldHlfaWRlbnRpZmllcjogb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zYWZldHlJZGVudGlmaWVyLFxuICAgICAgdG9wX2xvZ3Byb2JzOiB0b3BMb2dwcm9icyxcbiAgICAgIC8vIG1vZGVsLXNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgLi4ubW9kZWxDb25maWcuaXNSZWFzb25pbmdNb2RlbCAmJiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0KSAhPSBudWxsIHx8IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ1N1bW1hcnkpICE9IG51bGwpICYmIHtcbiAgICAgICAgcmVhc29uaW5nOiB7XG4gICAgICAgICAgLi4uKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0KSAhPSBudWxsICYmIHtcbiAgICAgICAgICAgIGVmZm9ydDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdFZmZvcnRcbiAgICAgICAgICB9LFxuICAgICAgICAgIC4uLihvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ1N1bW1hcnkpICE9IG51bGwgJiYge1xuICAgICAgICAgICAgc3VtbWFyeTogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLi4ubW9kZWxDb25maWcucmVxdWlyZWRBdXRvVHJ1bmNhdGlvbiAmJiB7XG4gICAgICAgIHRydW5jYXRpb246IFwiYXV0b1wiXG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAobW9kZWxDb25maWcuaXNSZWFzb25pbmdNb2RlbCkge1xuICAgICAgaWYgKGJhc2VBcmdzLnRlbXBlcmF0dXJlICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MudGVtcGVyYXR1cmUgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwidGVtcGVyYXR1cmVcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRlbXBlcmF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy50b3BfcCAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRvcF9wID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRvcFBcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRvcFAgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0KSAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwicmVhc29uaW5nRWZmb3J0XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJyZWFzb25pbmdFZmZvcnQgaXMgbm90IHN1cHBvcnRlZCBmb3Igbm9uLXJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwicmVhc29uaW5nU3VtbWFyeVwiLFxuICAgICAgICAgIGRldGFpbHM6IFwicmVhc29uaW5nU3VtbWFyeSBpcyBub3Qgc3VwcG9ydGVkIGZvciBub24tcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIpID09PSBcImZsZXhcIiAmJiAhbW9kZWxDb25maWcuc3VwcG9ydHNGbGV4UHJvY2Vzc2luZykge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwiZmxleCBwcm9jZXNzaW5nIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBvMywgbzQtbWluaSwgYW5kIGdwdC01IG1vZGVsc1wiXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBiYXNlQXJncy5zZXJ2aWNlX3RpZXI7XG4gICAgfVxuICAgIGlmICgob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllcikgPT09IFwicHJpb3JpdHlcIiAmJiAhbW9kZWxDb25maWcuc3VwcG9ydHNQcmlvcml0eVByb2Nlc3NpbmcpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJzZXJ2aWNlVGllclwiLFxuICAgICAgICBkZXRhaWxzOiBcInByaW9yaXR5IHByb2Nlc3NpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIHN1cHBvcnRlZCBtb2RlbHMgKGdwdC00LCBncHQtNSwgZ3B0LTUtbWluaSwgbzMsIG80LW1pbmkpIGFuZCByZXF1aXJlcyBFbnRlcnByaXNlIGFjY2Vzcy4gZ3B0LTUtbmFubyBpcyBub3Qgc3VwcG9ydGVkXCJcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGJhc2VBcmdzLnNlcnZpY2VfdGllcjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgIHRvb2xDaG9pY2U6IG9wZW5haVRvb2xDaG9pY2UsXG4gICAgICB0b29sV2FybmluZ3NcbiAgICB9ID0gcHJlcGFyZVJlc3BvbnNlc1Rvb2xzKHtcbiAgICAgIHRvb2xzLFxuICAgICAgdG9vbENob2ljZSxcbiAgICAgIHN0cmljdEpzb25TY2hlbWFcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgd2ViU2VhcmNoVG9vbE5hbWUsXG4gICAgICBhcmdzOiB7XG4gICAgICAgIC4uLmJhc2VBcmdzLFxuICAgICAgICB0b29sczogb3BlbmFpVG9vbHMyLFxuICAgICAgICB0b29sX2Nob2ljZTogb3BlbmFpVG9vbENob2ljZVxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzOiBbLi4ud2FybmluZ3MsIC4uLnRvb2xXYXJuaW5nc11cbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2ssIF9sLCBfbSwgX24sIF9vLCBfcCwgX3E7XG4gICAgY29uc3Qge1xuICAgICAgYXJnczogYm9keSxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgd2ViU2VhcmNoVG9vbE5hbWVcbiAgICB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICBwYXRoOiBcIi9yZXNwb25zZXNcIixcbiAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgIH0pO1xuICAgIGNvbnN0IHtcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHZhbHVlOiByZXNwb25zZSxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNSh7XG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczUodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjUoXG4gICAgICAgIHoxNC5vYmplY3Qoe1xuICAgICAgICAgIGlkOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgY3JlYXRlZF9hdDogejE0Lm51bWJlcigpLFxuICAgICAgICAgIGVycm9yOiB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgIGNvZGU6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHoxNC5zdHJpbmcoKVxuICAgICAgICAgIH0pLm51bGxpc2goKSxcbiAgICAgICAgICBtb2RlbDogejE0LnN0cmluZygpLFxuICAgICAgICAgIG91dHB1dDogejE0LmFycmF5KFxuICAgICAgICAgICAgejE0LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTQubGl0ZXJhbChcIm1lc3NhZ2VcIiksXG4gICAgICAgICAgICAgICAgcm9sZTogejE0LmxpdGVyYWwoXCJhc3Npc3RhbnRcIiksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB6MTQuYXJyYXkoXG4gICAgICAgICAgICAgICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJvdXRwdXRfdGV4dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogejE0LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBsb2dwcm9iczogTE9HUFJPQlNfU0NIRU1BLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM6IHoxNC5hcnJheShcbiAgICAgICAgICAgICAgICAgICAgICB6MTQuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6MTQubnVtYmVyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9pbmRleDogejE0Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHoxNC5zdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJmaWxlX2NpdGF0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogejE0Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfaW5kZXg6IHoxNC5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9pbmRleDogejE0Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU6IHoxNC5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiY29udGFpbmVyX2ZpbGVfY2l0YXRpb25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBjb2RlSW50ZXJwcmV0ZXJDYWxsSXRlbSxcbiAgICAgICAgICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJmdW5jdGlvbl9jYWxsXCIpLFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNC5zdHJpbmcoKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgd2ViU2VhcmNoQ2FsbEl0ZW0sXG4gICAgICAgICAgICAgIHoxNC5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiY29tcHV0ZXJfY2FsbFwiKSxcbiAgICAgICAgICAgICAgICBpZDogejE0LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIHN0YXR1czogejE0LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHoxNC5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiZmlsZV9zZWFyY2hfY2FsbFwiKSxcbiAgICAgICAgICAgICAgICBpZDogejE0LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIHN0YXR1czogejE0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgcXVlcmllczogejE0LmFycmF5KHoxNC5zdHJpbmcoKSkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgIHJlc3VsdHM6IHoxNC5hcnJheShcbiAgICAgICAgICAgICAgICAgIHoxNC5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICBzY29yZTogejE0Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHoxNC5zdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLm51bGxpc2goKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJyZWFzb25pbmdcIiksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogejE0LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OiB6MTQuYXJyYXkoXG4gICAgICAgICAgICAgICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJzdW1tYXJ5X3RleHRcIiksXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHoxNC5zdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICksXG4gICAgICAgICAgc2VydmljZV90aWVyOiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgIGluY29tcGxldGVfZGV0YWlsczogejE0Lm9iamVjdCh7IHJlYXNvbjogejE0LnN0cmluZygpIH0pLm51bGxhYmxlKCksXG4gICAgICAgICAgdXNhZ2U6IHVzYWdlU2NoZW1hMlxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJQ2FsbEVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0Qm9keVZhbHVlczogYm9keSxcbiAgICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHJlc3BvbnNlQm9keTogcmF3UmVzcG9uc2UsXG4gICAgICAgIGlzUmV0cnlhYmxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBbXTtcbiAgICBjb25zdCBsb2dwcm9icyA9IFtdO1xuICAgIGxldCBoYXNGdW5jdGlvbkNhbGwgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICBjYXNlIFwicmVhc29uaW5nXCI6IHtcbiAgICAgICAgICBpZiAocGFydC5zdW1tYXJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcGFydC5zdW1tYXJ5LnB1c2goeyB0eXBlOiBcInN1bW1hcnlfdGV4dFwiLCB0ZXh0OiBcIlwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHN1bW1hcnkgb2YgcGFydC5zdW1tYXJ5KSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ1wiLFxuICAgICAgICAgICAgICB0ZXh0OiBzdW1tYXJ5LnRleHQsXG4gICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFydC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQ6IChfYSA9IHBhcnQuZW5jcnlwdGVkX2NvbnRlbnQpICE9IG51bGwgPyBfYSA6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibWVzc2FnZVwiOiB7XG4gICAgICAgICAgZm9yIChjb25zdCBjb250ZW50UGFydCBvZiBwYXJ0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmICgoKF9jID0gKF9iID0gb3B0aW9ucy5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5sb2dwcm9icykgJiYgY29udGVudFBhcnQubG9ncHJvYnMpIHtcbiAgICAgICAgICAgICAgbG9ncHJvYnMucHVzaChjb250ZW50UGFydC5sb2dwcm9icyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgdGV4dDogY29udGVudFBhcnQudGV4dCxcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiBjb250ZW50UGFydC5hbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi50eXBlID09PSBcInVybF9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfZiA9IChfZSA9IChfZCA9IHRoaXMuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FsbChfZCkpICE9IG51bGwgPyBfZiA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICB1cmw6IGFubm90YXRpb24udXJsLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IGFubm90YXRpb24udGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uLnR5cGUgPT09IFwiZmlsZV9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF9pID0gKF9oID0gKF9nID0gdGhpcy5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfaC5jYWxsKF9nKSkgIT0gbnVsbCA/IF9pIDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogKF9rID0gKF9qID0gYW5ub3RhdGlvbi5xdW90ZSkgIT0gbnVsbCA/IF9qIDogYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF9rIDogXCJEb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfbCA9IGFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfbCA6IGFubm90YXRpb24uZmlsZV9pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvbl9jYWxsXCI6IHtcbiAgICAgICAgICBoYXNGdW5jdGlvbkNhbGwgPSB0cnVlO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5jYWxsX2lkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXJ0LmFyZ3VtZW50cyxcbiAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwid2ViX3NlYXJjaF9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246IHBhcnQuYWN0aW9uIH0pLFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgcmVzdWx0OiB7IHN0YXR1czogcGFydC5zdGF0dXMgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY29tcHV0ZXJfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICBpbnB1dDogXCJcIixcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvbXB1dGVyX3VzZVwiLFxuICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY29tcHV0ZXJfdXNlX3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHN0YXR1czogcGFydC5zdGF0dXMgfHwgXCJjb21wbGV0ZWRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiZmlsZV9zZWFyY2hfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICB0eXBlOiBcImZpbGVfc2VhcmNoX3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHN0YXR1czogcGFydC5zdGF0dXMgfHwgXCJjb21wbGV0ZWRcIixcbiAgICAgICAgICAgICAgLi4ucGFydC5xdWVyaWVzICYmIHsgcXVlcmllczogcGFydC5xdWVyaWVzIH0sXG4gICAgICAgICAgICAgIC4uLnBhcnQucmVzdWx0cyAmJiB7IHJlc3VsdHM6IHBhcnQucmVzdWx0cyB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGNvZGU6IHBhcnQuY29kZSxcbiAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHBhcnQuY29udGFpbmVyX2lkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICBvdXRwdXRzOiBwYXJ0Lm91dHB1dHNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHtcbiAgICAgIG9wZW5haTogeyByZXNwb25zZUlkOiByZXNwb25zZS5pZCB9XG4gICAgfTtcbiAgICBpZiAobG9ncHJvYnMubGVuZ3RoID4gMCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBsb2dwcm9icztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZXNwb25zZS5zZXJ2aWNlX3RpZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLnNlcnZpY2VUaWVyID0gcmVzcG9uc2Uuc2VydmljZV90aWVyO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudCxcbiAgICAgIGZpbmlzaFJlYXNvbjogbWFwT3BlbkFJUmVzcG9uc2VGaW5pc2hSZWFzb24oe1xuICAgICAgICBmaW5pc2hSZWFzb246IChfbSA9IHJlc3BvbnNlLmluY29tcGxldGVfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9tLnJlYXNvbixcbiAgICAgICAgaGFzRnVuY3Rpb25DYWxsXG4gICAgICB9KSxcbiAgICAgIHVzYWdlOiB7XG4gICAgICAgIGlucHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnMsXG4gICAgICAgIG91dHB1dFRva2VuczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucyxcbiAgICAgICAgdG90YWxUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyArIHJlc3BvbnNlLnVzYWdlLm91dHB1dF90b2tlbnMsXG4gICAgICAgIHJlYXNvbmluZ1Rva2VuczogKF9vID0gKF9uID0gcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX24ucmVhc29uaW5nX3Rva2VucykgIT0gbnVsbCA/IF9vIDogdm9pZCAwLFxuICAgICAgICBjYWNoZWRJbnB1dFRva2VuczogKF9xID0gKF9wID0gcmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfcC5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX3EgOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGlkOiByZXNwb25zZS5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShyZXNwb25zZS5jcmVhdGVkX2F0ICogMWUzKSxcbiAgICAgICAgbW9kZWxJZDogcmVzcG9uc2UubW9kZWwsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBhcmdzOiBib2R5LFxuICAgICAgd2FybmluZ3MsXG4gICAgICB3ZWJTZWFyY2hUb29sTmFtZVxuICAgIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTUoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9yZXNwb25zZXNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNSh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5OiB7XG4gICAgICAgIC4uLmJvZHksXG4gICAgICAgIHN0cmVhbTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIzKFxuICAgICAgICBvcGVuYWlSZXNwb25zZXNDaHVua1NjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGZpbmlzaFJlYXNvbiA9IFwidW5rbm93blwiO1xuICAgIGNvbnN0IHVzYWdlID0ge1xuICAgICAgaW5wdXRUb2tlbnM6IHZvaWQgMCxcbiAgICAgIG91dHB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgdG90YWxUb2tlbnM6IHZvaWQgMFxuICAgIH07XG4gICAgY29uc3QgbG9ncHJvYnMgPSBbXTtcbiAgICBsZXQgcmVzcG9uc2VJZCA9IG51bGw7XG4gICAgY29uc3Qgb25nb2luZ1Rvb2xDYWxscyA9IHt9O1xuICAgIGxldCBoYXNGdW5jdGlvbkNhbGwgPSBmYWxzZTtcbiAgICBjb25zdCBhY3RpdmVSZWFzb25pbmcgPSB7fTtcbiAgICBsZXQgc2VydmljZVRpZXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmVhbTogcmVzcG9uc2UucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwic3RyZWFtLXN0YXJ0XCIsIHdhcm5pbmdzIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogY2h1bmsuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2h1bmsudmFsdWU7XG4gICAgICAgICAgICBpZiAoaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImZ1bmN0aW9uX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB2YWx1ZS5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmNhbGxfaWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmNhbGxfaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuaXRlbS5uYW1lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcIndlYl9zZWFyY2hfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiY29tcHV0ZXJfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvbXB1dGVyX3VzZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImZpbGVfc2VhcmNoX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImZpbGVfc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImZpbGVfc2VhcmNoXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWVzc2FnZVwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZFJlYXNvbmluZ0NodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtLmlkXSA9IHtcbiAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnQ6IHZhbHVlLml0ZW0uZW5jcnlwdGVkX2NvbnRlbnQsXG4gICAgICAgICAgICAgICAgICBzdW1tYXJ5UGFydHM6IFswXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nLXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbS5pZH06MGAsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiAoX2EgPSB2YWx1ZS5pdGVtLmVuY3J5cHRlZF9jb250ZW50KSAhPSBudWxsID8gX2EgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJmdW5jdGlvbl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaGFzRnVuY3Rpb25DYWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uY2FsbF9pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5jYWxsX2lkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiB2YWx1ZS5pdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwid2ViX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uOiB2YWx1ZS5pdGVtLmFjdGlvbiB9KSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDogeyBzdGF0dXM6IHZhbHVlLml0ZW0uc3RhdHVzIH0sXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImNvbXB1dGVyX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb21wdXRlcl91c2VcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl91c2VfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB2YWx1ZS5pdGVtLnN0YXR1cyB8fCBcImNvbXBsZXRlZFwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJmaWxlX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbGVfc2VhcmNoX3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogdmFsdWUuaXRlbS5zdGF0dXMgfHwgXCJjb21wbGV0ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUuaXRlbS5xdWVyaWVzICYmIHsgcXVlcmllczogdmFsdWUuaXRlbS5xdWVyaWVzIH0sXG4gICAgICAgICAgICAgICAgICAgIC4uLnZhbHVlLml0ZW0ucmVzdWx0cyAmJiB7IHJlc3VsdHM6IHZhbHVlLml0ZW0ucmVzdWx0cyB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHZhbHVlLml0ZW0uY29kZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHZhbHVlLml0ZW0uY29udGFpbmVyX2lkXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRzOiB2YWx1ZS5pdGVtLm91dHB1dHNcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcIm1lc3NhZ2VcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VPdXRwdXRJdGVtRG9uZVJlYXNvbmluZ0NodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVJlYXNvbmluZ1BhcnQgPSBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbS5pZF07XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdW1tYXJ5SW5kZXggb2YgYWN0aXZlUmVhc29uaW5nUGFydC5zdW1tYXJ5UGFydHMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nLWVuZFwiLFxuICAgICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbS5pZH06JHtzdW1tYXJ5SW5kZXh9YCxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogKF9iID0gdmFsdWUuaXRlbS5lbmNyeXB0ZWRfY29udGVudCkgIT0gbnVsbCA/IF9iIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbS5pZF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdO1xuICAgICAgICAgICAgICBpZiAodG9vbENhbGwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6IHZhbHVlLmRlbHRhXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUNyZWF0ZWRDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgcmVzcG9uc2VJZCA9IHZhbHVlLnJlc3BvbnNlLmlkO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicmVzcG9uc2UtbWV0YWRhdGFcIixcbiAgICAgICAgICAgICAgICBpZDogdmFsdWUucmVzcG9uc2UuaWQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSh2YWx1ZS5yZXNwb25zZS5jcmVhdGVkX2F0ICogMWUzKSxcbiAgICAgICAgICAgICAgICBtb2RlbElkOiB2YWx1ZS5yZXNwb25zZS5tb2RlbFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNUZXh0RGVsdGFDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGlmICgoKF9kID0gKF9jID0gb3B0aW9ucy5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfZC5sb2dwcm9icykgJiYgdmFsdWUubG9ncHJvYnMpIHtcbiAgICAgICAgICAgICAgICBsb2dwcm9icy5wdXNoKHZhbHVlLmxvZ3Byb2JzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVBhcnRBZGRlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuc3VtbWFyeV9pbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAoX2UgPSBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbV9pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZS5zdW1tYXJ5UGFydHMucHVzaChcbiAgICAgICAgICAgICAgICAgIHZhbHVlLnN1bW1hcnlfaW5kZXhcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IGAke3ZhbHVlLml0ZW1faWR9OiR7dmFsdWUuc3VtbWFyeV9pbmRleH1gLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogKF9nID0gKF9mID0gYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW1faWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2YuZW5jcnlwdGVkQ29udGVudCkgIT0gbnVsbCA/IF9nIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlUZXh0RGVsdGFDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1kZWx0YVwiLFxuICAgICAgICAgICAgICAgIGlkOiBgJHt2YWx1ZS5pdGVtX2lkfToke3ZhbHVlLnN1bW1hcnlfaW5kZXh9YCxcbiAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGEsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VGaW5pc2hlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBtYXBPcGVuQUlSZXNwb25zZUZpbmlzaFJlYXNvbih7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uOiAoX2ggPSB2YWx1ZS5yZXNwb25zZS5pbmNvbXBsZXRlX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfaC5yZWFzb24sXG4gICAgICAgICAgICAgICAgaGFzRnVuY3Rpb25DYWxsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB1c2FnZS5pbnB1dFRva2VucyA9IHZhbHVlLnJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gdmFsdWUucmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2UudG90YWxUb2tlbnMgPSB2YWx1ZS5yZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnMgKyB2YWx1ZS5yZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zO1xuICAgICAgICAgICAgICB1c2FnZS5yZWFzb25pbmdUb2tlbnMgPSAoX2ogPSAoX2kgPSB2YWx1ZS5yZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfaS5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX2ogOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLmNhY2hlZElucHV0VG9rZW5zID0gKF9sID0gKF9rID0gdmFsdWUucmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfay5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX2wgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUucmVzcG9uc2Uuc2VydmljZV90aWVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgc2VydmljZVRpZXIgPSB2YWx1ZS5yZXNwb25zZS5zZXJ2aWNlX3RpZXI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUFubm90YXRpb25BZGRlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuYW5ub3RhdGlvbi50eXBlID09PSBcInVybF9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfbyA9IChfbiA9IChfbSA9IHNlbGYuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX24uY2FsbChfbSkpICE9IG51bGwgPyBfbyA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICB1cmw6IHZhbHVlLmFubm90YXRpb24udXJsLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IHZhbHVlLmFubm90YXRpb24udGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5hbm5vdGF0aW9uLnR5cGUgPT09IFwiZmlsZV9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF9yID0gKF9xID0gKF9wID0gc2VsZi5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfcS5jYWxsKF9wKSkgIT0gbnVsbCA/IF9yIDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogKF90ID0gKF9zID0gdmFsdWUuYW5ub3RhdGlvbi5xdW90ZSkgIT0gbnVsbCA/IF9zIDogdmFsdWUuYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF90IDogXCJEb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfdSA9IHZhbHVlLmFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfdSA6IHZhbHVlLmFubm90YXRpb24uZmlsZV9pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzRXJyb3JDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZUlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobG9ncHJvYnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGxvZ3Byb2JzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcnZpY2VUaWVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuc2VydmljZVRpZXIgPSBzZXJ2aWNlVGllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZmluaXNoXCIsXG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbixcbiAgICAgICAgICAgICAgdXNhZ2UsXG4gICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcbnZhciB1c2FnZVNjaGVtYTIgPSB6MTQub2JqZWN0KHtcbiAgaW5wdXRfdG9rZW5zOiB6MTQubnVtYmVyKCksXG4gIGlucHV0X3Rva2Vuc19kZXRhaWxzOiB6MTQub2JqZWN0KHsgY2FjaGVkX3Rva2VuczogejE0Lm51bWJlcigpLm51bGxpc2goKSB9KS5udWxsaXNoKCksXG4gIG91dHB1dF90b2tlbnM6IHoxNC5udW1iZXIoKSxcbiAgb3V0cHV0X3Rva2Vuc19kZXRhaWxzOiB6MTQub2JqZWN0KHsgcmVhc29uaW5nX3Rva2VuczogejE0Lm51bWJlcigpLm51bGxpc2goKSB9KS5udWxsaXNoKClcbn0pO1xudmFyIHRleHREZWx0YUNodW5rU2NoZW1hID0gejE0Lm9iamVjdCh7XG4gIHR5cGU6IHoxNC5saXRlcmFsKFwicmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGFcIiksXG4gIGl0ZW1faWQ6IHoxNC5zdHJpbmcoKSxcbiAgZGVsdGE6IHoxNC5zdHJpbmcoKSxcbiAgbG9ncHJvYnM6IExPR1BST0JTX1NDSEVNQS5udWxsaXNoKClcbn0pO1xudmFyIGVycm9yQ2h1bmtTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgdHlwZTogejE0LmxpdGVyYWwoXCJlcnJvclwiKSxcbiAgY29kZTogejE0LnN0cmluZygpLFxuICBtZXNzYWdlOiB6MTQuc3RyaW5nKCksXG4gIHBhcmFtOiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBzZXF1ZW5jZV9udW1iZXI6IHoxNC5udW1iZXIoKVxufSk7XG52YXIgcmVzcG9uc2VGaW5pc2hlZENodW5rU2NoZW1hID0gejE0Lm9iamVjdCh7XG4gIHR5cGU6IHoxNC5lbnVtKFtcInJlc3BvbnNlLmNvbXBsZXRlZFwiLCBcInJlc3BvbnNlLmluY29tcGxldGVcIl0pLFxuICByZXNwb25zZTogejE0Lm9iamVjdCh7XG4gICAgaW5jb21wbGV0ZV9kZXRhaWxzOiB6MTQub2JqZWN0KHsgcmVhc29uOiB6MTQuc3RyaW5nKCkgfSkubnVsbGlzaCgpLFxuICAgIHVzYWdlOiB1c2FnZVNjaGVtYTIsXG4gICAgc2VydmljZV90aWVyOiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpXG4gIH0pXG59KTtcbnZhciByZXNwb25zZUNyZWF0ZWRDaHVua1NjaGVtYSA9IHoxNC5vYmplY3Qoe1xuICB0eXBlOiB6MTQubGl0ZXJhbChcInJlc3BvbnNlLmNyZWF0ZWRcIiksXG4gIHJlc3BvbnNlOiB6MTQub2JqZWN0KHtcbiAgICBpZDogejE0LnN0cmluZygpLFxuICAgIGNyZWF0ZWRfYXQ6IHoxNC5udW1iZXIoKSxcbiAgICBtb2RlbDogejE0LnN0cmluZygpLFxuICAgIHNlcnZpY2VfdGllcjogejE0LnN0cmluZygpLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgdHlwZTogejE0LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZFwiKSxcbiAgb3V0cHV0X2luZGV4OiB6MTQubnVtYmVyKCksXG4gIGl0ZW06IHoxNC5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICB6MTQub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwibWVzc2FnZVwiKSxcbiAgICAgIGlkOiB6MTQuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTQub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwicmVhc29uaW5nXCIpLFxuICAgICAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgIGVuY3J5cHRlZF9jb250ZW50OiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgfSksXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTQubGl0ZXJhbChcImZ1bmN0aW9uX2NhbGxcIiksXG4gICAgICBpZDogejE0LnN0cmluZygpLFxuICAgICAgY2FsbF9pZDogejE0LnN0cmluZygpLFxuICAgICAgbmFtZTogejE0LnN0cmluZygpLFxuICAgICAgYXJndW1lbnRzOiB6MTQuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTQub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwid2ViX3NlYXJjaF9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejE0LnN0cmluZygpLFxuICAgICAgYWN0aW9uOiB6MTQub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICAgIHF1ZXJ5OiB6MTQuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgfSkubnVsbGlzaCgpXG4gICAgfSksXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTQubGl0ZXJhbChcImNvbXB1dGVyX2NhbGxcIiksXG4gICAgICBpZDogejE0LnN0cmluZygpLFxuICAgICAgc3RhdHVzOiB6MTQuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTQub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiZmlsZV9zZWFyY2hfY2FsbFwiKSxcbiAgICAgIGlkOiB6MTQuc3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHoxNC5zdHJpbmcoKSxcbiAgICAgIHF1ZXJpZXM6IHoxNC5hcnJheSh6MTQuc3RyaW5nKCkpLm51bGxpc2goKSxcbiAgICAgIHJlc3VsdHM6IHoxNC5hcnJheShcbiAgICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgICAgYXR0cmlidXRlczogejE0Lm9iamVjdCh7XG4gICAgICAgICAgICBmaWxlX2lkOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgICBmaWxlbmFtZTogejE0LnN0cmluZygpLFxuICAgICAgICAgICAgc2NvcmU6IHoxNC5udW1iZXIoKSxcbiAgICAgICAgICAgIHRleHQ6IHoxNC5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICApLm9wdGlvbmFsKClcbiAgICB9KVxuICBdKVxufSk7XG52YXIgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZVNjaGVtYSA9IHoxNC5vYmplY3Qoe1xuICB0eXBlOiB6MTQubGl0ZXJhbChcInJlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmVcIiksXG4gIG91dHB1dF9pbmRleDogejE0Lm51bWJlcigpLFxuICBpdGVtOiB6MTQuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTQubGl0ZXJhbChcIm1lc3NhZ2VcIiksXG4gICAgICBpZDogejE0LnN0cmluZygpXG4gICAgfSksXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTQubGl0ZXJhbChcInJlYXNvbmluZ1wiKSxcbiAgICAgIGlkOiB6MTQuc3RyaW5nKCksXG4gICAgICBlbmNyeXB0ZWRfY29udGVudDogejE0LnN0cmluZygpLm51bGxpc2goKVxuICAgIH0pLFxuICAgIHoxNC5vYmplY3Qoe1xuICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJmdW5jdGlvbl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgIGNhbGxfaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgIG5hbWU6IHoxNC5zdHJpbmcoKSxcbiAgICAgIGFyZ3VtZW50czogejE0LnN0cmluZygpLFxuICAgICAgc3RhdHVzOiB6MTQubGl0ZXJhbChcImNvbXBsZXRlZFwiKVxuICAgIH0pLFxuICAgIGNvZGVJbnRlcnByZXRlckNhbGxJdGVtLFxuICAgIHdlYlNlYXJjaENhbGxJdGVtLFxuICAgIHoxNC5vYmplY3Qoe1xuICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJjb21wdXRlcl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejE0LmxpdGVyYWwoXCJjb21wbGV0ZWRcIilcbiAgICB9KSxcbiAgICB6MTQub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiZmlsZV9zZWFyY2hfY2FsbFwiKSxcbiAgICAgIGlkOiB6MTQuc3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHoxNC5saXRlcmFsKFwiY29tcGxldGVkXCIpLFxuICAgICAgcXVlcmllczogejE0LmFycmF5KHoxNC5zdHJpbmcoKSkubnVsbGlzaCgpLFxuICAgICAgcmVzdWx0czogejE0LmFycmF5KFxuICAgICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB6MTQub2JqZWN0KHtcbiAgICAgICAgICAgIGZpbGVfaWQ6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgICAgIGZpbGVuYW1lOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgICBzY29yZTogejE0Lm51bWJlcigpLFxuICAgICAgICAgICAgdGV4dDogejE0LnN0cmluZygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICkubnVsbGlzaCgpXG4gICAgfSlcbiAgXSlcbn0pO1xudmFyIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgdHlwZTogejE0LmxpdGVyYWwoXCJyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YVwiKSxcbiAgaXRlbV9pZDogejE0LnN0cmluZygpLFxuICBvdXRwdXRfaW5kZXg6IHoxNC5udW1iZXIoKSxcbiAgZGVsdGE6IHoxNC5zdHJpbmcoKVxufSk7XG52YXIgcmVzcG9uc2VBbm5vdGF0aW9uQWRkZWRTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgdHlwZTogejE0LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfdGV4dC5hbm5vdGF0aW9uLmFkZGVkXCIpLFxuICBhbm5vdGF0aW9uOiB6MTQuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTQubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgIHVybDogejE0LnN0cmluZygpLFxuICAgICAgdGl0bGU6IHoxNC5zdHJpbmcoKVxuICAgIH0pLFxuICAgIHoxNC5vYmplY3Qoe1xuICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJmaWxlX2NpdGF0aW9uXCIpLFxuICAgICAgZmlsZV9pZDogejE0LnN0cmluZygpLFxuICAgICAgZmlsZW5hbWU6IHoxNC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBpbmRleDogejE0Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgIHN0YXJ0X2luZGV4OiB6MTQubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgZW5kX2luZGV4OiB6MTQubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgcXVvdGU6IHoxNC5zdHJpbmcoKS5udWxsaXNoKClcbiAgICB9KVxuICBdKVxufSk7XG52YXIgcmVzcG9uc2VSZWFzb25pbmdTdW1tYXJ5UGFydEFkZGVkU2NoZW1hID0gejE0Lm9iamVjdCh7XG4gIHR5cGU6IHoxNC5saXRlcmFsKFwicmVzcG9uc2UucmVhc29uaW5nX3N1bW1hcnlfcGFydC5hZGRlZFwiKSxcbiAgaXRlbV9pZDogejE0LnN0cmluZygpLFxuICBzdW1tYXJ5X2luZGV4OiB6MTQubnVtYmVyKClcbn0pO1xudmFyIHJlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVRleHREZWx0YVNjaGVtYSA9IHoxNC5vYmplY3Qoe1xuICB0eXBlOiB6MTQubGl0ZXJhbChcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3RleHQuZGVsdGFcIiksXG4gIGl0ZW1faWQ6IHoxNC5zdHJpbmcoKSxcbiAgc3VtbWFyeV9pbmRleDogejE0Lm51bWJlcigpLFxuICBkZWx0YTogejE0LnN0cmluZygpXG59KTtcbnZhciBvcGVuYWlSZXNwb25zZXNDaHVua1NjaGVtYSA9IHoxNC51bmlvbihbXG4gIHRleHREZWx0YUNodW5rU2NoZW1hLFxuICByZXNwb25zZUZpbmlzaGVkQ2h1bmtTY2hlbWEsXG4gIHJlc3BvbnNlQ3JlYXRlZENodW5rU2NoZW1hLFxuICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZFNjaGVtYSxcbiAgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZVNjaGVtYSxcbiAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YVNjaGVtYSxcbiAgcmVzcG9uc2VBbm5vdGF0aW9uQWRkZWRTY2hlbWEsXG4gIHJlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVBhcnRBZGRlZFNjaGVtYSxcbiAgcmVzcG9uc2VSZWFzb25pbmdTdW1tYXJ5VGV4dERlbHRhU2NoZW1hLFxuICBlcnJvckNodW5rU2NoZW1hLFxuICB6MTQub2JqZWN0KHsgdHlwZTogejE0LnN0cmluZygpIH0pLmxvb3NlKClcbiAgLy8gZmFsbGJhY2sgZm9yIHVua25vd24gY2h1bmtzXG5dKTtcbmZ1bmN0aW9uIGlzVGV4dERlbHRhQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGFcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VPdXRwdXRJdGVtRG9uZUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmVcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VPdXRwdXRJdGVtRG9uZVJlYXNvbmluZ0NodW5rKGNodW5rKSB7XG4gIHJldHVybiBpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVDaHVuayhjaHVuaykgJiYgY2h1bmsuaXRlbS50eXBlID09PSBcInJlYXNvbmluZ1wiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUZpbmlzaGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuY29tcGxldGVkXCIgfHwgY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5pbmNvbXBsZXRlXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlQ3JlYXRlZENodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmNyZWF0ZWRcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlT3V0cHV0SXRlbUFkZGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWRcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRSZWFzb25pbmdDaHVuayhjaHVuaykge1xuICByZXR1cm4gaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZENodW5rKGNodW5rKSAmJiBjaHVuay5pdGVtLnR5cGUgPT09IFwicmVhc29uaW5nXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlQW5ub3RhdGlvbkFkZGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X3RleHQuYW5ub3RhdGlvbi5hZGRlZFwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlQYXJ0QWRkZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5yZWFzb25pbmdfc3VtbWFyeV9wYXJ0LmFkZGVkXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVRleHREZWx0YUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3RleHQuZGVsdGFcIjtcbn1cbmZ1bmN0aW9uIGlzRXJyb3JDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJlcnJvclwiO1xufVxuZnVuY3Rpb24gZ2V0UmVzcG9uc2VzTW9kZWxDb25maWcobW9kZWxJZCkge1xuICBjb25zdCBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nMiA9IG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIik7XG4gIGNvbnN0IHN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nMiA9IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC00XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW5hbm9cIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzNcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzQtbWluaVwiKTtcbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgcmVxdWlyZWRBdXRvVHJ1bmNhdGlvbjogZmFsc2UsXG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwic3lzdGVtXCIsXG4gICAgc3VwcG9ydHNGbGV4UHJvY2Vzc2luZzogc3VwcG9ydHNGbGV4UHJvY2Vzc2luZzIsXG4gICAgc3VwcG9ydHNQcmlvcml0eVByb2Nlc3Npbmc6IHN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nMlxuICB9O1xuICBpZiAobW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5kZWZhdWx0cyxcbiAgICAgIGlzUmVhc29uaW5nTW9kZWw6IGZhbHNlXG4gICAgfTtcbiAgfVxuICBpZiAobW9kZWxJZC5zdGFydHNXaXRoKFwib1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJjb2RleC1cIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiY29tcHV0ZXItdXNlXCIpKSB7XG4gICAgaWYgKG1vZGVsSWQuc3RhcnRzV2l0aChcIm8xLW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzEtcHJldmlld1wiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICAgIGlzUmVhc29uaW5nTW9kZWw6IHRydWUsXG4gICAgICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcInJlbW92ZVwiXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICBpc1JlYXNvbmluZ01vZGVsOiB0cnVlLFxuICAgICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwiZGV2ZWxvcGVyXCJcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgLi4uZGVmYXVsdHMsXG4gICAgaXNSZWFzb25pbmdNb2RlbDogZmFsc2VcbiAgfTtcbn1cbnZhciBvcGVuYWlSZXNwb25zZXNQcm92aWRlck9wdGlvbnNTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgbWV0YWRhdGE6IHoxNC5hbnkoKS5udWxsaXNoKCksXG4gIHBhcmFsbGVsVG9vbENhbGxzOiB6MTQuYm9vbGVhbigpLm51bGxpc2goKSxcbiAgcHJldmlvdXNSZXNwb25zZUlkOiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBzdG9yZTogejE0LmJvb2xlYW4oKS5udWxsaXNoKCksXG4gIHVzZXI6IHoxNC5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHJlYXNvbmluZ0VmZm9ydDogejE0LnN0cmluZygpLm51bGxpc2goKSxcbiAgc3RyaWN0SnNvblNjaGVtYTogejE0LmJvb2xlYW4oKS5udWxsaXNoKCksXG4gIGluc3RydWN0aW9uczogejE0LnN0cmluZygpLm51bGxpc2goKSxcbiAgcmVhc29uaW5nU3VtbWFyeTogejE0LnN0cmluZygpLm51bGxpc2goKSxcbiAgc2VydmljZVRpZXI6IHoxNC5lbnVtKFtcImF1dG9cIiwgXCJmbGV4XCIsIFwicHJpb3JpdHlcIl0pLm51bGxpc2goKSxcbiAgaW5jbHVkZTogejE0LmFycmF5KFxuICAgIHoxNC5lbnVtKFtcbiAgICAgIFwicmVhc29uaW5nLmVuY3J5cHRlZF9jb250ZW50XCIsXG4gICAgICBcImZpbGVfc2VhcmNoX2NhbGwucmVzdWx0c1wiLFxuICAgICAgXCJtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzXCJcbiAgICBdKVxuICApLm51bGxpc2goKSxcbiAgdGV4dFZlcmJvc2l0eTogejE0LmVudW0oW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkubnVsbGlzaCgpLFxuICBwcm9tcHRDYWNoZUtleTogejE0LnN0cmluZygpLm51bGxpc2goKSxcbiAgc2FmZXR5SWRlbnRpZmllcjogejE0LnN0cmluZygpLm51bGxpc2goKSxcbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2Vucy5cbiAgICpcbiAgICogU2V0dGluZyB0byB0cnVlIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9rZW5zIHRoYXRcbiAgICogd2VyZSBnZW5lcmF0ZWQuXG4gICAqXG4gICAqIFNldHRpbmcgdG8gYSBudW1iZXIgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b3AgblxuICAgKiB0b2tlbnMgdGhhdCB3ZXJlIGdlbmVyYXRlZC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9hcGktcmVmZXJlbmNlL3Jlc3BvbnNlcy9jcmVhdGVcbiAgICogQHNlZSBodHRwczovL2Nvb2tib29rLm9wZW5haS5jb20vZXhhbXBsZXMvdXNpbmdfbG9ncHJvYnNcbiAgICovXG4gIGxvZ3Byb2JzOiB6MTQudW5pb24oW3oxNC5ib29sZWFuKCksIHoxNC5udW1iZXIoKS5taW4oMSkubWF4KFRPUF9MT0dQUk9CU19NQVgpXSkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy9zcGVlY2gvb3BlbmFpLXNwZWVjaC1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM2LFxuICBjcmVhdGVCaW5hcnlSZXNwb25zZUhhbmRsZXIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zNixcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTUgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgT3BlbkFJUHJvdmlkZXJPcHRpb25zU2NoZW1hID0gejE1Lm9iamVjdCh7XG4gIGluc3RydWN0aW9uczogejE1LnN0cmluZygpLm51bGxpc2goKSxcbiAgc3BlZWQ6IHoxNS5udW1iZXIoKS5taW4oMC4yNSkubWF4KDQpLmRlZmF1bHQoMSkubnVsbGlzaCgpXG59KTtcbnZhciBPcGVuQUlTcGVlY2hNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgdGV4dCxcbiAgICB2b2ljZSA9IFwiYWxsb3lcIixcbiAgICBvdXRwdXRGb3JtYXQgPSBcIm1wM1wiLFxuICAgIHNwZWVkLFxuICAgIGluc3RydWN0aW9ucyxcbiAgICBsYW5ndWFnZSxcbiAgICBwcm92aWRlck9wdGlvbnNcbiAgfSkge1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3Qgb3BlbkFJT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNih7XG4gICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogT3BlbkFJUHJvdmlkZXJPcHRpb25zU2NoZW1hXG4gICAgfSk7XG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICB2b2ljZSxcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogXCJtcDNcIixcbiAgICAgIHNwZWVkLFxuICAgICAgaW5zdHJ1Y3Rpb25zXG4gICAgfTtcbiAgICBpZiAob3V0cHV0Rm9ybWF0KSB7XG4gICAgICBpZiAoW1wibXAzXCIsIFwib3B1c1wiLCBcImFhY1wiLCBcImZsYWNcIiwgXCJ3YXZcIiwgXCJwY21cIl0uaW5jbHVkZXMob3V0cHV0Rm9ybWF0KSkge1xuICAgICAgICByZXF1ZXN0Qm9keS5yZXNwb25zZV9mb3JtYXQgPSBvdXRwdXRGb3JtYXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcIm91dHB1dEZvcm1hdFwiLFxuICAgICAgICAgIGRldGFpbHM6IGBVbnN1cHBvcnRlZCBvdXRwdXQgZm9ybWF0OiAke291dHB1dEZvcm1hdH0uIFVzaW5nIG1wMyBpbnN0ZWFkLmBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcGVuQUlPcHRpb25zKSB7XG4gICAgICBjb25zdCBzcGVlY2hNb2RlbE9wdGlvbnMgPSB7fTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNwZWVjaE1vZGVsT3B0aW9ucykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHNwZWVjaE1vZGVsT3B0aW9uc1trZXldO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHJlcXVlc3RCb2R5W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFuZ3VhZ2UpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJsYW5ndWFnZVwiLFxuICAgICAgICBkZXRhaWxzOiBgT3BlbkFJIHNwZWVjaCBtb2RlbHMgZG8gbm90IHN1cHBvcnQgbGFuZ3VhZ2Ugc2VsZWN0aW9uLiBMYW5ndWFnZSBwYXJhbWV0ZXIgXCIke2xhbmd1YWdlfVwiIHdhcyBpZ25vcmVkLmBcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWVzdEJvZHksXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLmNvbmZpZy5faW50ZXJuYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jdXJyZW50RGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKSAhPSBudWxsID8gX2MgOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBjb25zdCB7IHJlcXVlc3RCb2R5LCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbHVlOiBhdWRpbyxcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2F1ZGlvL3NwZWVjaFwiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnM2KHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVCaW5hcnlSZXNwb25zZUhhbmRsZXIoKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1ZGlvLFxuICAgICAgd2FybmluZ3MsXG4gICAgICByZXF1ZXN0OiB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8vIHNyYy90cmFuc2NyaXB0aW9uL29wZW5haS10cmFuc2NyaXB0aW9uLW1vZGVsLnRzXG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczcsXG4gIGNvbnZlcnRCYXNlNjRUb1VpbnQ4QXJyYXksXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjYsXG4gIG1lZGlhVHlwZVRvRXh0ZW5zaW9uLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczcsXG4gIHBvc3RGb3JtRGF0YVRvQXBpXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxNyB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL3RyYW5zY3JpcHRpb24vb3BlbmFpLXRyYW5zY3JpcHRpb24tb3B0aW9ucy50c1xuaW1wb3J0IHsgeiBhcyB6MTYgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgb3BlbkFJVHJhbnNjcmlwdGlvblByb3ZpZGVyT3B0aW9ucyA9IHoxNi5vYmplY3Qoe1xuICAvKipcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byBpbmNsdWRlIGluIHRoZSB0cmFuc2NyaXB0aW9uIHJlc3BvbnNlLlxuICAgKi9cbiAgaW5jbHVkZTogejE2LmFycmF5KHoxNi5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8gaW4gSVNPLTYzOS0xIGZvcm1hdC5cbiAgICovXG4gIGxhbmd1YWdlOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsJ3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LlxuICAgKi9cbiAgcHJvbXB0OiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLlxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICB0ZW1wZXJhdHVyZTogejE2Lm51bWJlcigpLm1pbigwKS5tYXgoMSkuZGVmYXVsdCgwKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogVGhlIHRpbWVzdGFtcCBncmFudWxhcml0aWVzIHRvIHBvcHVsYXRlIGZvciB0aGlzIHRyYW5zY3JpcHRpb24uXG4gICAqIEBkZWZhdWx0IFsnc2VnbWVudCddXG4gICAqL1xuICB0aW1lc3RhbXBHcmFudWxhcml0aWVzOiB6MTYuYXJyYXkoejE2LmVudW0oW1wid29yZFwiLCBcInNlZ21lbnRcIl0pKS5kZWZhdWx0KFtcInNlZ21lbnRcIl0pLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvdHJhbnNjcmlwdGlvbi9vcGVuYWktdHJhbnNjcmlwdGlvbi1tb2RlbC50c1xudmFyIGxhbmd1YWdlTWFwID0ge1xuICBhZnJpa2FhbnM6IFwiYWZcIixcbiAgYXJhYmljOiBcImFyXCIsXG4gIGFybWVuaWFuOiBcImh5XCIsXG4gIGF6ZXJiYWlqYW5pOiBcImF6XCIsXG4gIGJlbGFydXNpYW46IFwiYmVcIixcbiAgYm9zbmlhbjogXCJic1wiLFxuICBidWxnYXJpYW46IFwiYmdcIixcbiAgY2F0YWxhbjogXCJjYVwiLFxuICBjaGluZXNlOiBcInpoXCIsXG4gIGNyb2F0aWFuOiBcImhyXCIsXG4gIGN6ZWNoOiBcImNzXCIsXG4gIGRhbmlzaDogXCJkYVwiLFxuICBkdXRjaDogXCJubFwiLFxuICBlbmdsaXNoOiBcImVuXCIsXG4gIGVzdG9uaWFuOiBcImV0XCIsXG4gIGZpbm5pc2g6IFwiZmlcIixcbiAgZnJlbmNoOiBcImZyXCIsXG4gIGdhbGljaWFuOiBcImdsXCIsXG4gIGdlcm1hbjogXCJkZVwiLFxuICBncmVlazogXCJlbFwiLFxuICBoZWJyZXc6IFwiaGVcIixcbiAgaGluZGk6IFwiaGlcIixcbiAgaHVuZ2FyaWFuOiBcImh1XCIsXG4gIGljZWxhbmRpYzogXCJpc1wiLFxuICBpbmRvbmVzaWFuOiBcImlkXCIsXG4gIGl0YWxpYW46IFwiaXRcIixcbiAgamFwYW5lc2U6IFwiamFcIixcbiAga2FubmFkYTogXCJrblwiLFxuICBrYXpha2g6IFwia2tcIixcbiAga29yZWFuOiBcImtvXCIsXG4gIGxhdHZpYW46IFwibHZcIixcbiAgbGl0aHVhbmlhbjogXCJsdFwiLFxuICBtYWNlZG9uaWFuOiBcIm1rXCIsXG4gIG1hbGF5OiBcIm1zXCIsXG4gIG1hcmF0aGk6IFwibXJcIixcbiAgbWFvcmk6IFwibWlcIixcbiAgbmVwYWxpOiBcIm5lXCIsXG4gIG5vcndlZ2lhbjogXCJub1wiLFxuICBwZXJzaWFuOiBcImZhXCIsXG4gIHBvbGlzaDogXCJwbFwiLFxuICBwb3J0dWd1ZXNlOiBcInB0XCIsXG4gIHJvbWFuaWFuOiBcInJvXCIsXG4gIHJ1c3NpYW46IFwicnVcIixcbiAgc2VyYmlhbjogXCJzclwiLFxuICBzbG92YWs6IFwic2tcIixcbiAgc2xvdmVuaWFuOiBcInNsXCIsXG4gIHNwYW5pc2g6IFwiZXNcIixcbiAgc3dhaGlsaTogXCJzd1wiLFxuICBzd2VkaXNoOiBcInN2XCIsXG4gIHRhZ2Fsb2c6IFwidGxcIixcbiAgdGFtaWw6IFwidGFcIixcbiAgdGhhaTogXCJ0aFwiLFxuICB0dXJraXNoOiBcInRyXCIsXG4gIHVrcmFpbmlhbjogXCJ1a1wiLFxuICB1cmR1OiBcInVyXCIsXG4gIHZpZXRuYW1lc2U6IFwidmlcIixcbiAgd2Vsc2g6IFwiY3lcIlxufTtcbnZhciBPcGVuQUlUcmFuc2NyaXB0aW9uTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIGF1ZGlvLFxuICAgIG1lZGlhVHlwZSxcbiAgICBwcm92aWRlck9wdGlvbnNcbiAgfSkge1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3Qgb3BlbkFJT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNyh7XG4gICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogb3BlbkFJVHJhbnNjcmlwdGlvblByb3ZpZGVyT3B0aW9uc1xuICAgIH0pO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgY29uc3QgYmxvYiA9IGF1ZGlvIGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBCbG9iKFthdWRpb10pIDogbmV3IEJsb2IoW2NvbnZlcnRCYXNlNjRUb1VpbnQ4QXJyYXkoYXVkaW8pXSk7XG4gICAgZm9ybURhdGEuYXBwZW5kKFwibW9kZWxcIiwgdGhpcy5tb2RlbElkKTtcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gbWVkaWFUeXBlVG9FeHRlbnNpb24obWVkaWFUeXBlKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoXG4gICAgICBcImZpbGVcIixcbiAgICAgIG5ldyBGaWxlKFtibG9iXSwgXCJhdWRpb1wiLCB7IHR5cGU6IG1lZGlhVHlwZSB9KSxcbiAgICAgIGBhdWRpby4ke2ZpbGVFeHRlbnNpb259YFxuICAgICk7XG4gICAgaWYgKG9wZW5BSU9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHRyYW5zY3JpcHRpb25Nb2RlbE9wdGlvbnMgPSB7XG4gICAgICAgIGluY2x1ZGU6IG9wZW5BSU9wdGlvbnMuaW5jbHVkZSxcbiAgICAgICAgbGFuZ3VhZ2U6IG9wZW5BSU9wdGlvbnMubGFuZ3VhZ2UsXG4gICAgICAgIHByb21wdDogb3BlbkFJT3B0aW9ucy5wcm9tcHQsXG4gICAgICAgIC8vIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvYXVkaW8vY3JlYXRlVHJhbnNjcmlwdGlvbiNhdWRpb19jcmVhdGV0cmFuc2NyaXB0aW9uLXJlc3BvbnNlX2Zvcm1hdFxuICAgICAgICAvLyBwcmVmZXIgdmVyYm9zZV9qc29uIHRvIGdldCBzZWdtZW50cyBmb3IgbW9kZWxzIHRoYXQgc3VwcG9ydCBpdFxuICAgICAgICByZXNwb25zZV9mb3JtYXQ6IFtcbiAgICAgICAgICBcImdwdC00by10cmFuc2NyaWJlXCIsXG4gICAgICAgICAgXCJncHQtNG8tbWluaS10cmFuc2NyaWJlXCJcbiAgICAgICAgXS5pbmNsdWRlcyh0aGlzLm1vZGVsSWQpID8gXCJqc29uXCIgOiBcInZlcmJvc2VfanNvblwiLFxuICAgICAgICB0ZW1wZXJhdHVyZTogb3BlbkFJT3B0aW9ucy50ZW1wZXJhdHVyZSxcbiAgICAgICAgdGltZXN0YW1wX2dyYW51bGFyaXRpZXM6IG9wZW5BSU9wdGlvbnMudGltZXN0YW1wR3JhbnVsYXJpdGllc1xuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRyYW5zY3JpcHRpb25Nb2RlbE9wdGlvbnMpKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke2tleX1bXWAsIFN0cmluZyhpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybURhdGEsXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnLl9pbnRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnREYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHsgZm9ybURhdGEsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RGb3JtRGF0YVRvQXBpKHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvYXVkaW8vdHJhbnNjcmlwdGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNyh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBmb3JtRGF0YSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjYoXG4gICAgICAgIG9wZW5haVRyYW5zY3JpcHRpb25SZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgbGFuZ3VhZ2UgPSByZXNwb25zZS5sYW5ndWFnZSAhPSBudWxsICYmIHJlc3BvbnNlLmxhbmd1YWdlIGluIGxhbmd1YWdlTWFwID8gbGFuZ3VhZ2VNYXBbcmVzcG9uc2UubGFuZ3VhZ2VdIDogdm9pZCAwO1xuICAgIHJldHVybiB7XG4gICAgICB0ZXh0OiByZXNwb25zZS50ZXh0LFxuICAgICAgc2VnbWVudHM6IChfZyA9IChfZiA9IChfZCA9IHJlc3BvbnNlLnNlZ21lbnRzKSA9PSBudWxsID8gdm9pZCAwIDogX2QubWFwKChzZWdtZW50KSA9PiAoe1xuICAgICAgICB0ZXh0OiBzZWdtZW50LnRleHQsXG4gICAgICAgIHN0YXJ0U2Vjb25kOiBzZWdtZW50LnN0YXJ0LFxuICAgICAgICBlbmRTZWNvbmQ6IHNlZ21lbnQuZW5kXG4gICAgICB9KSkpICE9IG51bGwgPyBfZiA6IChfZSA9IHJlc3BvbnNlLndvcmRzKSA9PSBudWxsID8gdm9pZCAwIDogX2UubWFwKCh3b3JkKSA9PiAoe1xuICAgICAgICB0ZXh0OiB3b3JkLndvcmQsXG4gICAgICAgIHN0YXJ0U2Vjb25kOiB3b3JkLnN0YXJ0LFxuICAgICAgICBlbmRTZWNvbmQ6IHdvcmQuZW5kXG4gICAgICB9KSkpICE9IG51bGwgPyBfZyA6IFtdLFxuICAgICAgbGFuZ3VhZ2UsXG4gICAgICBkdXJhdGlvbkluU2Vjb25kczogKF9oID0gcmVzcG9uc2UuZHVyYXRpb24pICE9IG51bGwgPyBfaCA6IHZvaWQgMCxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgdGltZXN0YW1wOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbnZhciBvcGVuYWlUcmFuc2NyaXB0aW9uUmVzcG9uc2VTY2hlbWEgPSB6MTcub2JqZWN0KHtcbiAgdGV4dDogejE3LnN0cmluZygpLFxuICBsYW5ndWFnZTogejE3LnN0cmluZygpLm51bGxpc2goKSxcbiAgZHVyYXRpb246IHoxNy5udW1iZXIoKS5udWxsaXNoKCksXG4gIHdvcmRzOiB6MTcuYXJyYXkoXG4gICAgejE3Lm9iamVjdCh7XG4gICAgICB3b3JkOiB6MTcuc3RyaW5nKCksXG4gICAgICBzdGFydDogejE3Lm51bWJlcigpLFxuICAgICAgZW5kOiB6MTcubnVtYmVyKClcbiAgICB9KVxuICApLm51bGxpc2goKSxcbiAgc2VnbWVudHM6IHoxNy5hcnJheShcbiAgICB6MTcub2JqZWN0KHtcbiAgICAgIGlkOiB6MTcubnVtYmVyKCksXG4gICAgICBzZWVrOiB6MTcubnVtYmVyKCksXG4gICAgICBzdGFydDogejE3Lm51bWJlcigpLFxuICAgICAgZW5kOiB6MTcubnVtYmVyKCksXG4gICAgICB0ZXh0OiB6MTcuc3RyaW5nKCksXG4gICAgICB0b2tlbnM6IHoxNy5hcnJheSh6MTcubnVtYmVyKCkpLFxuICAgICAgdGVtcGVyYXR1cmU6IHoxNy5udW1iZXIoKSxcbiAgICAgIGF2Z19sb2dwcm9iOiB6MTcubnVtYmVyKCksXG4gICAgICBjb21wcmVzc2lvbl9yYXRpbzogejE3Lm51bWJlcigpLFxuICAgICAgbm9fc3BlZWNoX3Byb2I6IHoxNy5udW1iZXIoKVxuICAgIH0pXG4gICkubnVsbGlzaCgpXG59KTtcblxuLy8gc3JjL29wZW5haS1wcm92aWRlci50c1xuZnVuY3Rpb24gY3JlYXRlT3BlbkFJKG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBiYXNlVVJMID0gKF9hID0gd2l0aG91dFRyYWlsaW5nU2xhc2gob3B0aW9ucy5iYXNlVVJMKSkgIT0gbnVsbCA/IF9hIDogXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxXCI7XG4gIGNvbnN0IHByb3ZpZGVyTmFtZSA9IChfYiA9IG9wdGlvbnMubmFtZSkgIT0gbnVsbCA/IF9iIDogXCJvcGVuYWlcIjtcbiAgY29uc3QgZ2V0SGVhZGVycyA9ICgpID0+ICh7XG4gICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvYWRBcGlLZXkoe1xuICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSxcbiAgICAgIGVudmlyb25tZW50VmFyaWFibGVOYW1lOiBcIk9QRU5BSV9BUElfS0VZXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJPcGVuQUlcIlxuICAgIH0pfWAsXG4gICAgXCJPcGVuQUktT3JnYW5pemF0aW9uXCI6IG9wdGlvbnMub3JnYW5pemF0aW9uLFxuICAgIFwiT3BlbkFJLVByb2plY3RcIjogb3B0aW9ucy5wcm9qZWN0LFxuICAgIC4uLm9wdGlvbnMuaGVhZGVyc1xuICB9KTtcbiAgY29uc3QgY3JlYXRlQ2hhdE1vZGVsID0gKG1vZGVsSWQpID0+IG5ldyBPcGVuQUlDaGF0TGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0uY2hhdGAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlQ29tcGxldGlvbk1vZGVsID0gKG1vZGVsSWQpID0+IG5ldyBPcGVuQUlDb21wbGV0aW9uTGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0uY29tcGxldGlvbmAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlRW1iZWRkaW5nTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUVtYmVkZGluZ01vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5lbWJlZGRpbmdgLFxuICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgIGhlYWRlcnM6IGdldEhlYWRlcnMsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IGNyZWF0ZUltYWdlTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUltYWdlTW9kZWwobW9kZWxJZCwge1xuICAgIHByb3ZpZGVyOiBgJHtwcm92aWRlck5hbWV9LmltYWdlYCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVUcmFuc2NyaXB0aW9uTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSVRyYW5zY3JpcHRpb25Nb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0udHJhbnNjcmlwdGlvbmAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlU3BlZWNoTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSVNwZWVjaE1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5zcGVlY2hgLFxuICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgIGhlYWRlcnM6IGdldEhlYWRlcnMsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IGNyZWF0ZUxhbmd1YWdlTW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIGlmIChuZXcudGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIE9wZW5BSSBtb2RlbCBmdW5jdGlvbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggdGhlIG5ldyBrZXl3b3JkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2VzTW9kZWwobW9kZWxJZCk7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZVJlc3BvbnNlc01vZGVsID0gKG1vZGVsSWQpID0+IHtcbiAgICByZXR1cm4gbmV3IE9wZW5BSVJlc3BvbnNlc0xhbmd1YWdlTW9kZWwobW9kZWxJZCwge1xuICAgICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0ucmVzcG9uc2VzYCxcbiAgICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgZmlsZUlkUHJlZml4ZXM6IFtcImZpbGUtXCJdXG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHByb3ZpZGVyID0gZnVuY3Rpb24obW9kZWxJZCkge1xuICAgIHJldHVybiBjcmVhdGVMYW5ndWFnZU1vZGVsKG1vZGVsSWQpO1xuICB9O1xuICBwcm92aWRlci5sYW5ndWFnZU1vZGVsID0gY3JlYXRlTGFuZ3VhZ2VNb2RlbDtcbiAgcHJvdmlkZXIuY2hhdCA9IGNyZWF0ZUNoYXRNb2RlbDtcbiAgcHJvdmlkZXIuY29tcGxldGlvbiA9IGNyZWF0ZUNvbXBsZXRpb25Nb2RlbDtcbiAgcHJvdmlkZXIucmVzcG9uc2VzID0gY3JlYXRlUmVzcG9uc2VzTW9kZWw7XG4gIHByb3ZpZGVyLmVtYmVkZGluZyA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci50ZXh0RW1iZWRkaW5nID0gY3JlYXRlRW1iZWRkaW5nTW9kZWw7XG4gIHByb3ZpZGVyLnRleHRFbWJlZGRpbmdNb2RlbCA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci5pbWFnZSA9IGNyZWF0ZUltYWdlTW9kZWw7XG4gIHByb3ZpZGVyLmltYWdlTW9kZWwgPSBjcmVhdGVJbWFnZU1vZGVsO1xuICBwcm92aWRlci50cmFuc2NyaXB0aW9uID0gY3JlYXRlVHJhbnNjcmlwdGlvbk1vZGVsO1xuICBwcm92aWRlci50cmFuc2NyaXB0aW9uTW9kZWwgPSBjcmVhdGVUcmFuc2NyaXB0aW9uTW9kZWw7XG4gIHByb3ZpZGVyLnNwZWVjaCA9IGNyZWF0ZVNwZWVjaE1vZGVsO1xuICBwcm92aWRlci5zcGVlY2hNb2RlbCA9IGNyZWF0ZVNwZWVjaE1vZGVsO1xuICBwcm92aWRlci50b29scyA9IG9wZW5haVRvb2xzO1xuICByZXR1cm4gcHJvdmlkZXI7XG59XG52YXIgb3BlbmFpID0gY3JlYXRlT3BlbkFJKCk7XG5leHBvcnQge1xuICBjcmVhdGVPcGVuQUksXG4gIG9wZW5haVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@ai-sdk+openai@2.0.30_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs\n");

/***/ })

};
;